(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},2060:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>h,originalPathname:()=>c,pages:()=>u,routeModule:()=>f,tree:()=>d}),r(8530),r(1550),r(1936);var i=r(8868),n=r(7364),a=r(647),s=r.n(a),o=r(2004),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8530)),"/Users/rodrigo.barona/Documents/GitHub/eleva-care/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,2776))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1550)),"/Users/rodrigo.barona/Documents/GitHub/eleva-care/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,1936,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,2776))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/rodrigo.barona/Documents/GitHub/eleva-care/app/page.tsx"],c="/page",h={require:r,loadChunk:()=>Promise.resolve()},f=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},445:(e,t,r)=>{Promise.resolve().then(r.bind(r,2035))},8261:(e,t,r)=>{Promise.resolve().then(r.bind(r,1871))},2118:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8162,23)),Promise.resolve().then(r.t.bind(r,1342,23)),Promise.resolve().then(r.t.bind(r,8225,23)),Promise.resolve().then(r.t.bind(r,6510,23)),Promise.resolve().then(r.t.bind(r,3059,23)),Promise.resolve().then(r.t.bind(r,9090,23))},2035:(e,t,r)=>{"use strict";let i,n,a,s,o;r.d(t,{default:()=>ys});var l=r(9522),d=r(1616),u=r.t(d,2);function c(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function h(...e){return d.useCallback(c(...e),e)}var f=d.forwardRef((e,t)=>{let{children:r,...i}=e,n=d.Children.toArray(r),a=n.find(g);if(a){let e=a.props.children,r=n.map(t=>t!==a?t:d.Children.count(e)>1?d.Children.only(null):d.isValidElement(e)?e.props.children:null);return(0,l.jsx)(p,{...i,ref:t,children:d.isValidElement(e)?d.cloneElement(e,void 0,r):null})}return(0,l.jsx)(p,{...i,ref:t,children:r})});f.displayName="Slot";var p=d.forwardRef((e,t)=>{let{children:r,...i}=e;if(d.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r);return d.cloneElement(r,{...function(e,t){let r={...t};for(let i in t){let n=e[i],a=t[i];/^on[A-Z]/.test(i)?n&&a?r[i]=(...e)=>{a(...e),n(...e)}:n&&(r[i]=n):"style"===i?r[i]={...n,...a}:"className"===i&&(r[i]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props),ref:t?c(t,e):e})}return d.Children.count(r)>1?d.Children.only(null):null});p.displayName="SlotClone";var m=({children:e})=>(0,l.jsx)(l.Fragment,{children:e});function g(e){return d.isValidElement(e)&&e.type===m}let v=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,y=function(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i);else for(r in t)t[r]&&(n&&(n+=" "),n+=r)}return n}(e))&&(i&&(i+=" "),i+=t);return i},b=e=>{let t=x(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),E(r,t)||w(e)},getConflictingClassGroupIds:(e,t)=>{let n=r[e]||[];return t&&i[e]?[...n,...i[e]]:n}}},E=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],i=t.nextPart.get(r),n=i?E(e.slice(1),i):void 0;if(n)return n;if(0===t.validators.length)return;let a=e.join("-");return t.validators.find(({validator:e})=>e(a))?.classGroupId},T=/^\[(.+)\]$/,w=e=>{if(T.test(e)){let t=T.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},x=e=>{let{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return L(Object.entries(e.classGroups),r).forEach(([e,r])=>{S(r,i,e,t)}),i},S=(e,t,r,i)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:A(t,e)).classGroupId=r;return}if("function"==typeof e){if(R(e)){S(e(i),t,r,i);return}t.validators.push({validator:e,classGroupId:r});return}Object.entries(e).forEach(([e,n])=>{S(n,A(t,e),r,i)})})},A=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},R=e=>e.isThemeGetter,L=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,k=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,i=new Map,n=(n,a)=>{r.set(n,a),++t>e&&(t=0,i=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=i.get(e))?(n(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):n(e,t)}}},D=e=>{let{separator:t,experimentalParseClassName:r}=e,i=1===t.length,n=t[0],a=t.length,s=e=>{let r;let s=[],o=0,l=0;for(let d=0;d<e.length;d++){let u=e[d];if(0===o){if(u===n&&(i||e.slice(d,d+a)===t)){s.push(e.slice(l,d)),l=d+a;continue}if("/"===u){r=d;continue}}"["===u?o++:"]"===u&&o--}let d=0===s.length?e:e.substring(l),u=d.startsWith("!"),c=u?d.substring(1):d;return{modifiers:s,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:r&&r>l?r-l:void 0}};return r?e=>r({className:e,parseClassName:s}):s},I=e=>{if(e.length<=1)return e;let t=[],r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},C=e=>({cache:k(e.cacheSize),parseClassName:D(e),...b(e)}),P=/\s+/,O=(e,t)=>{let{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:n}=t,a=[],s=e.trim().split(P),o="";for(let e=s.length-1;e>=0;e-=1){let t=s[e],{modifiers:l,hasImportantModifier:d,baseClassName:u,maybePostfixModifierPosition:c}=r(t),h=!!c,f=i(h?u.substring(0,c):u);if(!f){if(!h||!(f=i(u))){o=t+(o.length>0?" "+o:o);continue}h=!1}let p=I(l).join(":"),m=d?p+"!":p,g=m+f;if(a.includes(g))continue;a.push(g);let v=n(f,h);for(let e=0;e<v.length;++e){let t=v[e];a.push(m+t)}o=t+(o.length>0?" "+o:o)}return o};function N(){let e,t,r=0,i="";for(;r<arguments.length;)(e=arguments[r++])&&(t=M(e))&&(i&&(i+=" "),i+=t);return i}let M=e=>{let t;if("string"==typeof e)return e;let r="";for(let i=0;i<e.length;i++)e[i]&&(t=M(e[i]))&&(r&&(r+=" "),r+=t);return r},F=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},U=/^\[(?:([a-z-]+):)?(.+)\]$/i,B=/^\d+\/\d+$/,j=new Set(["px","full","screen"]),$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,q=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,H=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,V=e=>z(e)||j.has(e)||B.test(e),W=e=>eo(e,"length",el),z=e=>!!e&&!Number.isNaN(Number(e)),Y=e=>eo(e,"number",z),X=e=>!!e&&Number.isInteger(Number(e)),Q=e=>e.endsWith("%")&&z(e.slice(0,-1)),J=e=>U.test(e),Z=e=>$.test(e),ee=new Set(["length","size","percentage"]),et=e=>eo(e,ee,ed),er=e=>eo(e,"position",ed),ei=new Set(["image","url"]),en=e=>eo(e,ei,ec),ea=e=>eo(e,"",eu),es=()=>!0,eo=(e,t,r)=>{let i=U.exec(e);return!!i&&(i[1]?"string"==typeof t?i[1]===t:t.has(i[1]):r(i[2]))},el=e=>G.test(e)&&!q.test(e),ed=()=>!1,eu=e=>H.test(e),ec=e=>K.test(e);Symbol.toStringTag;let eh=function(e,...t){let r,i,n;let a=function(o){return i=(r=C(t.reduce((e,t)=>t(e),e()))).cache.get,n=r.cache.set,a=s,s(o)};function s(e){let t=i(e);if(t)return t;let a=O(e,r);return n(e,a),a}return function(){return a(N.apply(null,arguments))}}(()=>{let e=F("colors"),t=F("spacing"),r=F("blur"),i=F("brightness"),n=F("borderColor"),a=F("borderRadius"),s=F("borderSpacing"),o=F("borderWidth"),l=F("contrast"),d=F("grayscale"),u=F("hueRotate"),c=F("invert"),h=F("gap"),f=F("gradientColorStops"),p=F("gradientColorStopPositions"),m=F("inset"),g=F("margin"),v=F("opacity"),y=F("padding"),b=F("saturate"),E=F("scale"),T=F("sepia"),w=F("skew"),x=F("space"),S=F("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",J,t],k=()=>[J,t],D=()=>["",V,W],I=()=>["auto",z,J],C=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],P=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",J],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[z,J];return{cacheSize:500,separator:":",theme:{colors:[es],spacing:[V,W],blur:["none","",Z,J],brightness:B(),borderColor:[e],borderRadius:["none","","full",Z,J],borderSpacing:k(),borderWidth:D(),contrast:B(),grayscale:M(),hueRotate:B(),invert:M(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[Q,W],inset:L(),margin:L(),opacity:B(),padding:k(),saturate:B(),scale:B(),sepia:M(),skew:B(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",J]}],container:["container"],columns:[{columns:[Z]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...C(),J]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",X,J]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",J]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",X,J]}],"grid-cols":[{"grid-cols":[es]}],"col-start-end":[{col:["auto",{span:["full",X,J]},J]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[es]}],"row-start-end":[{row:["auto",{span:[X,J]},J]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",J]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",J]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",J,t]}],"min-w":[{"min-w":[J,t,"min","max","fit"]}],"max-w":[{"max-w":[J,t,"none","full","min","max","fit","prose",{screen:[Z]},Z]}],h:[{h:[J,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[J,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[J,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[J,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Z,W]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Y]}],"font-family":[{font:[es]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",J]}],"line-clamp":[{"line-clamp":["none",z,Y]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",V,J]}],"list-image":[{"list-image":["none",J]}],"list-style-type":[{list:["none","disc","decimal",J]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...P(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",V,W]}],"underline-offset":[{"underline-offset":["auto",V,J]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",J]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",J]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...C(),er]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",et]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},en]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...P(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:P()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...P()]}],"outline-offset":[{"outline-offset":[V,J]}],"outline-w":[{outline:[V,W]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[V,W]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Z,ea]}],"shadow-color":[{shadow:[es]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Z,J]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[c]}],saturate:[{saturate:[b]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[c]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",J]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",J]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",J]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[X,J]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",J]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",J]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",J]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[V,W,Y]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function ef(...e){return eh(function(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i)}return n}(e))&&(i&&(i+=" "),i+=t);return i}(e))}let ep=(s="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",o={variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==o?void 0:o.variants)==null)return y(s,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:i}=o,n=Object.keys(r).map(t=>{let n=null==e?void 0:e[t],a=null==i?void 0:i[t];if(null===n)return null;let s=v(n)||v(a);return r[t][s]}),a=e&&Object.entries(e).reduce((e,t)=>{let[r,i]=t;return void 0===i||(e[r]=i),e},{});return y(s,n,null==o?void 0:null===(t=o.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...a}[t]):({...i,...a})[t]===r})?[...e,r,n]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),em=d.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...n},a)=>{let s=i?f:"button";return l.jsx(s,{className:ef(ep({variant:t,size:r,className:e})),ref:a,...n})});em.displayName="Button";let eg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ev=(...e)=>e.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");var ey={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let eb=(0,d.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:a,iconNode:s,...o},l)=>(0,d.createElement)("svg",{ref:l,...ey,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:ev("lucide",n),...o},[...s.map(([e,t])=>(0,d.createElement)(e,t)),...Array.isArray(a)?a:[a]])),eE=(e,t)=>{let r=(0,d.forwardRef)(({className:r,...i},n)=>(0,d.createElement)(eb,{ref:n,iconNode:t,className:ev(`lucide-${eg(e)}`,r),...i}));return r.displayName=`${e}`,r},eT=eE("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]),e_=eE("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),ew=eE("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),ex=eE("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]),eS=eE("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),eA=eE("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),eR={language:"English",nav:{services:"Services",approach:"Approach",mission:"Mission",team:"Team"},hero:{title:"Empowering Women's Health at Every Stage",subtitle:"Eleva Care offers a holistic approach to women's health, connecting you with expert providers who specialize in supporting women through every stage of life.",cta1:"Take a Quiz",cta2:"Book Now"},podcast:{title:"Elevating Women's Health with Patr\xedcia Mota, PT, PhD by Eleva Care",description:"Empower your health journey with \"Elevating Women's Health\" by Eleva Care. Our expert hosts break down cutting-edge research in women's health each week, translating complex studies into actionable insights. From reproductive wellness to mental health, we cover it all.",cta:"Listen Now"},services:{title:"Our Services",subtitle:"Comprehensive care for every stage of a woman's life",items:[{icon:l.jsx(eT,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Pregnancy & Postpartum",description:"Expert care and support throughout your pregnancy and postpartum journey, including physical therapy, OB/GYN care, and nutritional guidance.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(e_,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Pelvic Health",description:"Specialized treatments for pelvic pain, incontinence, and prolapse, with customized plans tailored to your unique needs.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(ew,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Mental Wellness",description:"Access to therapy and support for stress, anxiety, and depression, ensuring your mental health is prioritized at every stage.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(ex,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Fitness & Nutrition",description:"Personalized fitness plans and nutritional guidance to help you achieve your health goals and feel your best.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(eS,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Teen Health",description:"Specialized support for young women navigating puberty, menstruation, and the transition to adulthood.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(eA,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Menopause Management",description:"Comprehensive care to address hormonal changes and prioritize well-being during the menopausal transition.",image:"/placeholder.png?height=200&width=300"}]},approach:{title:"Our Approach",description:"At Eleva Care, we believe in a collaborative approach to care. Our team of experts work together to provide you with comprehensive and personalized support, ensuring that every aspect of your health is addressed."},mission:{title:"Our Mission",subtitle:"Transforming women's health care through innovation and compassion",description:"At Eleva Care, we are dedicated to empowering women of all ages to take control of their health and well-being. Our mission is to provide a supportive and inclusive platform that connects individuals with expert-led resources, evidence-based information, and a collaborative community of healthcare professionals.",vision:{title:"Our Vision",description:"To bridge the gap between scientific research and practical application, delivering accessible and personalized women's health care solutions throughout every life stage."},cta:"Join Us",stats:[{value:"10K+",label:"Women Helped"},{value:"50+",label:"Expert Providers"},{value:"95%",label:"Patient Satisfaction"},{value:"24/7",label:"Support Available"}],beliefs:{title:"At Eleva Care, we believe:",items:["Every woman deserves access to quality healthcare.","Knowledge is power in healthcare decisions.","Collaboration leads to better health outcomes.","Women's health is a lifelong, evolving journey.","Pelvic health is essential to overall well-being."]}},team:{title:"Meet Our Team",subtitle:"Founded by passionate experts in women's health",description:"Eleva Care is led by a team of dedicated professionals who bring together years of experience in women's health, technology, and patient care. Our founders and key team members are committed to revolutionizing the way women access and experience healthcare.",members:[{name:"Dr. Patricia Mota",role:"Founder & CEO",image:"/placeholder.png?height=400&width=300",quote:"Our goal is to make expert women's health care accessible to all, regardless of location or circumstances."},{name:"Dr. Sofia Rodriguez",role:"Chief Medical Officer",image:"/placeholder.png?height=400&width=300",quote:"We're bridging the gap between cutting-edge research and everyday patient care."},{name:"Emma Chen",role:"Head of Patient Experience",image:"/placeholder.png?height=400&width=300",quote:"At Eleva Care, we're reimagining healthcare to put women's needs and experiences first."},{name:"Dr. Aisha Patel",role:"Lead Researcher",image:"/placeholder.png?height=400&width=300",quote:"Our research drives innovation in women's health, leading to better outcomes for all."}]},newsletter:{title:"Stay Updated",description:"Subscribe to our newsletter for the latest in women's health, expert tips, and exclusive content.",placeholder:"Enter your email",cta:"Subscribe",privacy:"We respect your privacy. Unsubscribe at any time."},social:{title:"Follow Us",linkedin:"LinkedIn",instagram:"Instagram",facebook:"Facebook",twitter:"Twitter",scholar:"Google Scholar"},footer:{copyright:"\xa9 2024 Eleva Care. All rights reserved.",terms:"Terms of Service",privacy:"Privacy"}},eL={language:"Portugu\xeas",nav:{services:"Servi\xe7os",approach:"Abordagem",mission:"Miss\xe3o",team:"Equipa"},hero:{title:"Capacitando a Sa\xfade das Mulheres em Todas as Etapas",subtitle:"A Eleva Care oferece uma abordagem hol\xedstica \xe0 sa\xfade das mulheres, conectando-a com prestadores especializados que se dedicam a apoiar as mulheres em todas as fases da vida.",cta1:"Fazer um Question\xe1rio",cta2:"Marcar Agora"},podcast:{title:"Elevando a Sa\xfade das Mulheres com Patr\xedcia Mota, PT, PhD pela Eleva Care",description:'Capacite a sua jornada de sa\xfade com "Elevando a Sa\xfade das Mulheres" pela Eleva Care. As nossas apresentadoras especialistas analisam semanalmente as pesquisas mais recentes em sa\xfade feminina, traduzindo estudos complexos em informa\xe7\xf5es pr\xe1ticas. Desde o bem-estar reprodutivo at\xe9 \xe0 sa\xfade mental, abordamos tudo.',cta:"Ouvir Agora"},services:{title:"Os Nossos Servi\xe7os",subtitle:"Cuidados abrangentes para cada fase da vida de uma mulher",items:[{icon:l.jsx(eT,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Gravidez e P\xf3s-parto",description:"Cuidados e apoio especializados durante toda a sua jornada de gravidez e p\xf3s-parto, incluindo fisioterapia, cuidados obst\xe9tricos/ginecol\xf3gicos e orienta\xe7\xe3o nutricional.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(e_,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Sa\xfade P\xe9lvica",description:"Tratamentos especializados para dor p\xe9lvica, incontin\xeancia e prolapso, com planos personalizados adaptados \xe0s suas necessidades \xfanicas.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(ew,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Bem-estar Mental",description:"Acesso a terapia e apoio para stress, ansiedade e depress\xe3o, garantindo que a sua sa\xfade mental \xe9 priorizada em todas as etapas.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(ex,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Fitness e Nutri\xe7\xe3o",description:"Planos de fitness personalizados e orienta\xe7\xe3o nutricional para ajud\xe1-la a alcan\xe7ar os seus objetivos de sa\xfade e sentir-se no seu melhor.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(eS,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Sa\xfade Adolescente",description:"Apoio especializado para jovens mulheres que atravessam a puberdade, menstrua\xe7\xe3o e a transi\xe7\xe3o para a idade adulta.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(eA,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Gest\xe3o da Menopausa",description:"Cuidados abrangentes para abordar as mudan\xe7as hormonais e priorizar o bem-estar durante a transi\xe7\xe3o da menopausa.",image:"/placeholder.png?height=200&width=300"}]},approach:{title:"A Nossa Abordagem",description:"Na Eleva Care, acreditamos numa abordagem colaborativa aos cuidados. A nossa equipa de especialistas trabalha em conjunto para lhe proporcionar um apoio abrangente e personalizado, garantindo que todos os aspectos da sua sa\xfade s\xe3o abordados."},mission:{title:"A Nossa Miss\xe3o",subtitle:"Transformar os cuidados de sa\xfade das mulheres atrav\xe9s da inova\xe7\xe3o e compaix\xe3o",description:"Na Eleva Care, dedicamo-nos a capacitar mulheres de todas as idades para assumirem o controlo da sua sa\xfade e bem-estar. A nossa miss\xe3o \xe9 fornecer uma plataforma de apoio e inclusiva que conecte indiv\xedduos com recursos liderados por especialistas, informa\xe7\xf5es baseadas em evid\xeancias e uma comunidade colaborativa de profissionais de sa\xfade.",vision:{title:"A Nossa Vis\xe3o",description:"Colmatar a lacuna entre a investiga\xe7\xe3o cient\xedfica e a aplica\xe7\xe3o pr\xe1tica, oferecendo solu\xe7\xf5es de cuidados de sa\xfade feminina acess\xedveis e personalizadas ao longo de todas as fases da vida."},cta:"Junte-se a N\xf3s",stats:[{value:"10K+",label:"Mulheres Ajudadas"},{value:"50+",label:"Prestadores Especializados"},{value:"95%",label:"Satisfa\xe7\xe3o das Pacientes"},{value:"24/7",label:"Apoio Dispon\xedvel"}],beliefs:{title:"Na Eleva Care, acreditamos que:",items:["Toda mulher merece acesso a cuidados de sa\xfade de qualidade.","O conhecimento \xe9 poder nas decis\xf5es de sa\xfade.","A colabora\xe7\xe3o leva a melhores resultados de sa\xfade.","A sa\xfade das mulheres \xe9 uma jornada em constante evolu\xe7\xe3o ao longo da vida.","A sa\xfade p\xe9lvica \xe9 essencial para o bem-estar geral."]}},team:{title:"Conhe\xe7a a Nossa Equipa",subtitle:"Fundada por especialistas apaixonados em sa\xfade feminina",description:"A Eleva Care \xe9 liderada por uma equipa de profissionais dedicados que re\xfanem anos de experi\xeancia em sa\xfade feminina, tecnologia e cuidados ao paciente. Os nossos fundadores e membros-chave da equipa est\xe3o comprometidos em revolucionar a forma como as mulheres acedem e experienciam os cuidados de sa\xfade.",members:[{name:"Dra. Patr\xedcia Mota",role:"Fundadora e CEO",image:"/placeholder.png?height=400&width=300",quote:"O nosso objetivo \xe9 tornar os cuidados de sa\xfade feminina especializados acess\xedveis a todas, independentemente da localiza\xe7\xe3o ou circunst\xe2ncias."},{name:"Dra. Sofia Rodriguez",role:"Diretora M\xe9dica",image:"/placeholder.png?height=400&width=300",quote:"Estamos a colmatar a lacuna entre a investiga\xe7\xe3o de ponta e os cuidados di\xe1rios \xe0s pacientes."},{name:"Emma Chen",role:"Respons\xe1vel pela Experi\xeancia da Paciente",image:"/placeholder.png?height=400&width=300",quote:"Na Eleva Care, estamos a reimaginar os cuidados de sa\xfade para colocar as necessidades e experi\xeancias das mulheres em primeiro lugar."},{name:"Dra. Aisha Patel",role:"Investigadora Principal",image:"/placeholder.png?height=400&width=300",quote:"A nossa investiga\xe7\xe3o impulsiona a inova\xe7\xe3o na sa\xfade das mulheres, levando a melhores resultados para todas."}]},newsletter:{title:"Mantenha-se Atualizada",description:"Subscreva a nossa newsletter para receber as \xfaltimas novidades em sa\xfade feminina, dicas de especialistas e conte\xfado exclusivo.",placeholder:"Insira o seu e-mail",cta:"Subscrever",privacy:"Respeitamos a sua privacidade. Cancele a subscri\xe7\xe3o a qualquer momento."},social:{title:"Siga-nos",linkedin:"LinkedIn",instagram:"Instagram",facebook:"Facebook",twitter:"Twitter",scholar:"Google Scholar"},footer:{copyright:"\xa9 2024 Eleva Care. Todos os direitos reservados.",terms:"Termos de Servi\xe7o",privacy:"Privacidade"}},ek={language:"Espa\xf1ol",nav:{services:"Servicios",approach:"Enfoque",mission:"Misi\xf3n",team:"Equipo"},hero:{title:"Empoderando la Salud de las Mujeres en Cada Etapa",subtitle:"Eleva Care ofrece un enfoque hol\xedstico para la salud de las mujeres, conect\xe1ndote con proveedores expertos que se especializan en apoyar a las mujeres en cada etapa de la vida.",cta1:"Hacer un Cuestionario",cta2:"Reservar Ahora"},podcast:{title:"Elevando la Salud de las Mujeres con Patr\xedcia Mota, PT, PhD por Eleva Care",description:'Empodera tu viaje de salud con "Elevando la Salud de las Mujeres" de Eleva Care. Nuestras anfitrionas expertas analizan semanalmente las investigaciones m\xe1s recientes en salud femenina, traduciendo estudios complejos en informaci\xf3n pr\xe1ctica. Desde el bienestar reproductivo hasta la salud mental, lo cubrimos todo.',cta:"Escuchar Ahora"},services:{title:"Nuestros Servicios",subtitle:"Atenci\xf3n integral para cada etapa de la vida de una mujer",items:[{icon:l.jsx(eT,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Embarazo y Posparto",description:"Atenci\xf3n y apoyo expertos durante todo tu viaje de embarazo y posparto, incluyendo fisioterapia, atenci\xf3n obst\xe9trica/ginecol\xf3gica y orientaci\xf3n nutricional.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(e_,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Salud P\xe9lvica",description:"Tratamientos especializados para el dolor p\xe9lvico, incontinencia y prolapso, con planes personalizados adaptados a tus necesidades \xfanicas.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(ew,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Bienestar Mental",description:"Acceso a terapia y apoyo para el estr\xe9s, la ansiedad y la depresi\xf3n, asegurando que tu salud mental sea priorizada en cada etapa.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(ex,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Fitness y Nutrici\xf3n",description:"Planes de fitness personalizados y orientaci\xf3n nutricional para ayudarte a alcanzar tus objetivos de salud y sentirte en tu mejor forma.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(eS,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Salud Adolescente",description:"Apoyo especializado para mujeres j\xf3venes que atraviesan la pubertad, la menstruaci\xf3n y la transici\xf3n a la edad adulta.",image:"/placeholder.png?height=200&width=300"},{icon:l.jsx(eA,{className:"w-12 h-12 text-[#0d6c70] mb-4"}),title:"Manejo de la Menopausia",description:"Atenci\xf3n integral para abordar los cambios hormonales y priorizar el bienestar durante la transici\xf3n de la menopausia.",image:"/placeholder.png?height=200&width=300"}]},approach:{title:"Nuestro Enfoque",description:"En Eleva Care, creemos en un enfoque colaborativo para la atenci\xf3n. Nuestro equipo de expertos trabaja en conjunto para brindarte un apoyo integral y personalizado, asegurando que se aborde cada aspecto de tu salud."},mission:{title:"Nuestra Misi\xf3n",subtitle:"Transformar la atenci\xf3n de la salud de las mujeres a trav\xe9s de la innovaci\xf3n y la compasi\xf3n",description:"En Eleva Care, nos dedicamos a empoderar a mujeres de todas las edades para que tomen el control de su salud y bienestar. Nuestra misi\xf3n es proporcionar una plataforma de apoyo e inclusiva que conecte a las personas con recursos dirigidos por expertos, informaci\xf3n basada en evidencia y una comunidad colaborativa de profesionales de la salud.",vision:{title:"Nuestra Visi\xf3n",description:"Cerrar la brecha entre la investigaci\xf3n cient\xedfica y la aplicaci\xf3n pr\xe1ctica, ofreciendo soluciones de atenci\xf3n de salud femenina accesibles y personalizadas a lo largo de todas las etapas de la vida."},cta:"\xdanete a Nosotros",stats:[{value:"10K+",label:"Mujeres Ayudadas"},{value:"50+",label:"Proveedores Expertos"},{value:"95%",label:"Satisfacci\xf3n de Pacientes"},{value:"24/7",label:"Apoyo Disponible"}],beliefs:{title:"En Eleva Care, creemos que:",items:["Toda mujer merece acceso a atenci\xf3n m\xe9dica de calidad.","El conocimiento es poder en las decisiones de salud.","La colaboraci\xf3n conduce a mejores resultados de salud.","La salud de las mujeres es un viaje en constante evoluci\xf3n a lo largo de la vida.","La salud p\xe9lvica es esencial para el bienestar general."]}},team:{title:"Conoce a Nuestro Equipo",subtitle:"Fundado por expertos apasionados en salud femenina",description:"Eleva Care est\xe1 liderado por un equipo de profesionales dedicados que re\xfanen a\xf1os de experiencia en salud femenina, tecnolog\xeda y atenci\xf3n al paciente. Nuestros fundadores y miembros clave del equipo est\xe1n comprometidos a revolucionar la forma en que las mujeres acceden y experimentan la atenci\xf3n m\xe9dica.",members:[{name:"Dra. Patricia Mota",role:"Fundadora y CEO",image:"/placeholder.png?height=400&width=300",quote:"Nuestro objetivo es hacer que la atenci\xf3n m\xe9dica especializada para mujeres sea accesible para todas, independientemente de su ubicaci\xf3n o circunstancias."},{name:"Dra. Sof\xeda Rodr\xedguez",role:"Directora M\xe9dica",image:"/placeholder.png?height=400&width=300",quote:"Estamos cerrando la brecha entre la investigaci\xf3n de vanguardia y la atenci\xf3n diaria a las pacientes."},{name:"Emma Chen",role:"Responsable de Experiencia del Paciente",image:"/placeholder.png?height=400&width=300",quote:"En Eleva Care, estamos reimaginando la atenci\xf3n m\xe9dica para poner las necesidades y experiencias de las mujeres en primer lugar."},{name:"Dra. Aisha Patel",role:"Investigadora Principal",image:"/placeholder.png?height=400&width=300",quote:"Nuestra investigaci\xf3n impulsa la innovaci\xf3n en la salud de las mujeres, llevando a mejores resultados para todas."}]},newsletter:{title:"Mantente Actualizada",description:"Suscr\xedbete a nuestro bolet\xedn para recibir las \xfaltimas novedades en salud femenina, consejos de expertos y contenido exclusivo.",placeholder:"Introduce tu email",cta:"Suscribirse",privacy:"Respetamos tu privacidad. Cancela la suscripci\xf3n en cualquier momento."},social:{title:"S\xedguenos",linkedin:"LinkedIn",instagram:"Instagram",facebook:"Facebook",twitter:"Twitter",scholar:"Google Scholar"},footer:{copyright:"\xa9 2024 Eleva Care. Todos los derechos reservados.",terms:"T\xe9rminos de Servicio",privacy:"Privacidad"}},eD=d.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ef("rounded-xl border bg-card text-card-foreground shadow",e),...t}));eD.displayName="Card",d.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ef("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader",d.forwardRef(({className:e,...t},r)=>l.jsx("h3",{ref:r,className:ef("font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle",d.forwardRef(({className:e,...t},r)=>l.jsx("p",{ref:r,className:ef("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let eI=d.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ef("p-6 pt-0",e),...t}));eI.displayName="CardContent",d.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ef("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";let eC=eE("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eP=eE("Podcast",[["path",{d:"M16.85 18.58a9 9 0 1 0-9.7 0",key:"d71mpg"}],["path",{d:"M8 14a5 5 0 1 1 8 0",key:"fc81rn"}],["circle",{cx:"12",cy:"11",r:"1",key:"1gvufo"}],["path",{d:"M13 17a1 1 0 1 0-2 0l.5 4.5a.5.5 0 1 0 1 0Z",key:"za5kbj"}]]),eO=eE("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),eN=eE("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),eM=eE("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),eF=eE("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),eU=eE("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),eB=eE("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var ej=r(1161),e$=r.n(ej),eG=r(494),eq=r.n(eG);let eH=d.forwardRef(({className:e,type:t,...r},i)=>l.jsx("input",{type:t,className:ef("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));eH.displayName="Input";var eK=e6(),eV=e=>e4(e,eK),eW=e6();eV.write=e=>e4(e,eW);var ez=e6();eV.onStart=e=>e4(e,ez);var eY=e6();eV.onFrame=e=>e4(e,eY);var eX=e6();eV.onFinish=e=>e4(e,eX);var eQ=[];eV.setTimeout=(e,t)=>{let r=eV.now()+t,i=()=>{let e=eQ.findIndex(e=>e.cancel==i);~e&&eQ.splice(e,1),e1-=~e?1:0},n={time:r,handler:e,cancel:i};return eQ.splice(eJ(r),0,n),e1+=1,e3(),n};var eJ=e=>~(~eQ.findIndex(t=>t.time>e)||~eQ.length);eV.cancel=e=>{ez.delete(e),eY.delete(e),eX.delete(e),eK.delete(e),eW.delete(e)},eV.sync=e=>{e2=!0,eV.batchedUpdates(e),e2=!1},eV.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function i(...e){t=e,eV.onStart(r)}return i.handler=e,i.cancel=()=>{ez.delete(r),t=null},i};var eZ="undefined"!=typeof window?window.requestAnimationFrame:()=>{};eV.use=e=>eZ=e,eV.now="undefined"!=typeof performance?()=>performance.now():Date.now,eV.batchedUpdates=e=>e(),eV.catch=console.error,eV.frameLoop="always",eV.advance=()=>{"demand"!==eV.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):e8()};var e0=-1,e1=0,e2=!1;function e4(e,t){e2?(t.delete(e),e(0)):(t.add(e),e3())}function e3(){e0<0&&(e0=0,"demand"!==eV.frameLoop&&eZ(e5))}function e5(){~e0&&(eZ(e5),eV.batchedUpdates(e8))}function e8(){let e=e0,t=eJ(e0=eV.now());if(t&&(e9(eQ.splice(0,t),e=>e.handler()),e1-=t),!e1){e0=-1;return}ez.flush(),eK.flush(e?Math.min(64,e0-e):16.667),eY.flush(),eW.flush(),eX.flush()}function e6(){let e=new Set,t=e;return{add(r){e1+=t!=e||e.has(r)?0:1,e.add(r)},delete:r=>(e1-=t==e&&e.has(r)?1:0,e.delete(r)),flush(r){t.size&&(e=new Set,e1-=t.size,e9(t,t=>t(r)&&e.add(t)),e1+=e.size,t=e)}}}function e9(e,t){e.forEach(e=>{try{t(e)}catch(e){eV.catch(e)}})}var e7=Object.defineProperty,te={};function tt(){}((e,t)=>{for(var r in t)e7(e,r,{get:t[r],enumerable:!0})})(te,{assign:()=>tp,colors:()=>tc,createStringInterpolator:()=>u7,skipAnimation:()=>th,to:()=>ce,willAdvance:()=>tf});var tr=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),ti={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function tn(e,t){if(ti.arr(e)){if(!ti.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var ta=(e,t)=>e.forEach(t);function ts(e,t,r){if(ti.arr(e)){for(let i=0;i<e.length;i++)t.call(r,e[i],`${i}`);return}for(let i in e)e.hasOwnProperty(i)&&t.call(r,e[i],i)}var to=e=>ti.und(e)?[]:ti.arr(e)?e:[e];function tl(e,t){if(e.size){let r=Array.from(e);e.clear(),ta(r,t)}}var td=(e,...t)=>tl(e,e=>e(...t)),tu=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),tc=null,th=!1,tf=tt,tp=e=>{e.to&&(ce=e.to),e.now&&(eV.now=e.now),void 0!==e.colors&&(tc=e.colors),null!=e.skipAnimation&&(th=e.skipAnimation),e.createStringInterpolator&&(u7=e.createStringInterpolator),e.requestAnimationFrame&&eV.use(e.requestAnimationFrame),e.batchedUpdates&&(eV.batchedUpdates=e.batchedUpdates),e.willAdvance&&(tf=e.willAdvance),e.frameLoop&&(eV.frameLoop=e.frameLoop)},tm=new Set,tg=[],tv=[],ty=0,tb={get idle(){return!tm.size&&!tg.length},start(e){ty>e.priority?(tm.add(e),eV.onStart(tE)):(tT(e),eV(tw))},advance:tw,sort(e){if(ty)eV.onFrame(()=>tb.sort(e));else{let t=tg.indexOf(e);~t&&(tg.splice(t,1),t_(e))}},clear(){tg=[],tm.clear()}};function tE(){tm.forEach(tT),tm.clear(),eV(tw)}function tT(e){tg.includes(e)||t_(e)}function t_(e){tg.splice(function(e,t){let r=e.findIndex(t);return r<0?e.length:r}(tg,t=>t.priority>e.priority),0,e)}function tw(e){let t=tv;for(let r=0;r<tg.length;r++){let i=tg[r];ty=i.priority,i.idle||(tf(i),i.advance(e),i.idle||t.push(i))}return ty=0,(tv=tg).length=0,(tg=t).length>0}var tx="[-+]?\\d*\\.?\\d+",tS=tx+"%";function tA(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var tR=RegExp("rgb"+tA(tx,tx,tx)),tL=RegExp("rgba"+tA(tx,tx,tx,tx)),tk=RegExp("hsl"+tA(tx,tS,tS)),tD=RegExp("hsla"+tA(tx,tS,tS,tx)),tI=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tC=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tP=/^#([0-9a-fA-F]{6})$/,tO=/^#([0-9a-fA-F]{8})$/;function tN(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function tM(e,t,r){let i=r<.5?r*(1+t):r+t-r*t,n=2*r-i;return Math.round(255*tN(n,i,e+1/3))<<24|Math.round(255*tN(n,i,e))<<16|Math.round(255*tN(n,i,e-1/3))<<8}function tF(e){let t=parseInt(e,10);return t<0?0:t>255?255:t}function tU(e){return(parseFloat(e)%360+360)%360/360}function tB(e){let t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function tj(e){let t=parseFloat(e);return t<0?0:t>100?1:t/100}function t$(e){let t;let r="number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=tP.exec(e))?parseInt(t[1]+"ff",16)>>>0:tc&&void 0!==tc[e]?tc[e]:(t=tR.exec(e))?(tF(t[1])<<24|tF(t[2])<<16|tF(t[3])<<8|255)>>>0:(t=tL.exec(e))?(tF(t[1])<<24|tF(t[2])<<16|tF(t[3])<<8|tB(t[4]))>>>0:(t=tI.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=tO.exec(e))?parseInt(t[1],16)>>>0:(t=tC.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=tk.exec(e))?(255|tM(tU(t[1]),tj(t[2]),tj(t[3])))>>>0:(t=tD.exec(e))?(tM(tU(t[1]),tj(t[2]),tj(t[3]))|tB(t[4]))>>>0:null;if(null===r)return e;let i=(4278190080&(r=r||0))>>>24,n=(16711680&r)>>>16,a=(65280&r)>>>8,s=(255&r)/255;return`rgba(${i}, ${n}, ${a}, ${s})`}var tG=(e,t,r)=>{if(ti.fun(e))return e;if(ti.arr(e))return tG({range:e,output:t,extrapolate:r});if(ti.str(e.output[0]))return u7(e);let i=e.output,n=e.range||[0,1],a=e.extrapolateLeft||e.extrapolate||"extend",s=e.extrapolateRight||e.extrapolate||"extend",o=e.easing||(e=>e);return t=>{let r=function(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(t,n);return function(e,t,r,i,n,a,s,o,l){let d=l?l(e):e;if(d<t){if("identity"===s)return d;"clamp"===s&&(d=t)}if(d>r){if("identity"===o)return d;"clamp"===o&&(d=r)}return i===n?i:t===r?e<=t?i:n:(t===-1/0?d=-d:r===1/0?d-=t:d=(d-t)/(r-t),d=a(d),i===-1/0?d=-d:n===1/0?d+=i:d=d*(n-i)+i,d)}(t,n[r],n[r+1],i[r],i[r+1],o,a,s,e.map)}},tq=Symbol.for("FluidValue.get"),tH=Symbol.for("FluidValue.observers"),tK=e=>!!(e&&e[tq]),tV=e=>e&&e[tq]?e[tq]():e,tW=e=>e[tH]||null;function tz(e,t){let r=e[tH];r&&r.forEach(e=>{e.eventObserved?e.eventObserved(t):e(t)})}var tY=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");tX(this,e)}},tX=(e,t)=>tZ(e,tq,t);function tQ(e,t){if(e[tq]){let r=e[tH];r||tZ(e,tH,r=new Set),!r.has(t)&&(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function tJ(e,t){let r=e[tH];if(r&&r.has(t)){let i=r.size-1;i?r.delete(t):e[tH]=null,e.observerRemoved&&e.observerRemoved(i,t)}}var tZ=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),t0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,t1=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,t2=RegExp(`(${t0.source})(%|[a-z]+)`,"i"),t4=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,t3=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,t5=e=>{let[t,r]=t8(e);if(!t||tu())return e;let i=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(i)return i.trim();if(r&&r.startsWith("--")){let e=window.getComputedStyle(document.documentElement).getPropertyValue(r);if(e)return e}else if(r&&t3.test(r))return t5(r);else if(r)return r;return e},t8=e=>{let t=t3.exec(e);if(!t)return[,];let[,r,i]=t;return[r,i]},t6=(e,t,r,i,n)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(i)}, ${n})`,t9=e=>{ct||(ct=tc?RegExp(`(${Object.keys(tc).join("|")})(?!\\w)`,"g"):/^\b$/);let t=e.output.map(e=>tV(e).replace(t3,t5).replace(t1,t$).replace(ct,t$)),r=t.map(e=>e.match(t0).map(Number)),i=r[0].map((e,t)=>r.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})).map(t=>tG({...e,output:t}));return e=>{let r=!t2.test(t[0])&&t.find(e=>t2.test(e))?.replace(t0,""),n=0;return t[0].replace(t0,()=>`${i[n++](e)}${r||""}`).replace(t4,t6)}},t7="react-spring: ",re=e=>{let t=!1;if("function"!=typeof e)throw TypeError(`${t7}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},rt=re(console.warn),rr=re(console.warn);function ri(e){return ti.str(e)&&("#"==e[0]||/\d/.test(e)||!tu()&&t3.test(e)||e in(tc||{}))}var rn=new WeakMap,ra=new Set,rs=()=>{let e=()=>{ra.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},ro=tu()?d.useEffect:d.useLayoutEffect,rl=()=>{let e=(0,d.useRef)(!1);return ro(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function rd(){let e=(0,d.useState)()[1],t=rl();return()=>{t.current&&e(Math.random())}}var ru=e=>(0,d.useEffect)(e,rc),rc=[];function rh(e){let t=(0,d.useRef)();return(0,d.useEffect)(()=>{t.current=e}),t.current}var rf=Symbol.for("Animated:node"),rp=e=>!!e&&e[rf]===e,rm=e=>e&&e[rf],rg=(e,t)=>tr(e,rf,t),rv=e=>e&&e[rf]&&e[rf].getPayload(),ry=class{constructor(){rg(this,this)}getPayload(){return this.payload||[]}},rb=class extends ry{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,ti.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new rb(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return ti.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){let{done:e}=this;this.done=!1,ti.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},rE=class extends rb{constructor(e){super(0),this._string=null,this._toString=tG({output:[e,e]})}static create(e){return new rE(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(ti.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=tG({output:[this.getValue(),e]})),this._value=0,super.reset()}},rT={dependencies:null},r_=class extends ry{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let t={};return ts(this.source,(r,i)=>{rp(r)?t[i]=r.getValue(e):tK(r)?t[i]=tV(r):e||(t[i]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&ta(this.payload,e=>e.reset())}_makePayload(e){if(e){let t=new Set;return ts(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){rT.dependencies&&tK(e)&&rT.dependencies.add(e);let t=rv(e);t&&ta(t,e=>this.add(e))}},rw=class extends r_{constructor(e){super(e)}static create(e){return new rw(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let t=this.getPayload();return e.length==t.length?t.map((t,r)=>t.setValue(e[r])).some(Boolean):(super.setValue(e.map(rx)),!0)}};function rx(e){return(ri(e)?rE:rb).create(e)}function rS(e){let t=rm(e);return t?t.constructor:ti.arr(e)?rw:ri(e)?rE:rb}var rA=(e,t)=>{let r=!ti.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,d.forwardRef)((i,n)=>{let a=(0,d.useRef)(null),s=r&&(0,d.useCallback)(e=>{a.current=function(e,t){return e&&(ti.fun(e)?e(t):e.current=t),t}(n,e)},[n]),[o,l]=function(e,t){let r=new Set;return rT.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new r_(e),rT.dependencies=null,[e,r]}(i,t),u=rd(),c=()=>{let e=a.current;(!r||e)&&!1===(!!e&&t.applyAnimatedValues(e,o.getValue(!0)))&&u()},h=new rR(c,l),f=(0,d.useRef)();ro(()=>(f.current=h,ta(l,e=>tQ(e,h)),()=>{f.current&&(ta(f.current.deps,e=>tJ(e,f.current)),eV.cancel(f.current.update))})),(0,d.useEffect)(c,[]),ru(()=>()=>{let e=f.current;ta(e.deps,t=>tJ(t,e))});let p=t.getComponentProps(o.getValue());return d.createElement(e,{...p,ref:s})})},rR=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&eV.write(this.update)}},rL=Symbol.for("AnimatedComponent"),rk=e=>ti.str(e)?e:e&&ti.str(e.displayName)?e.displayName:ti.fun(e)&&e.name||null;function rD(e,...t){return ti.fun(e)?e(...t):e}var rI=(e,t)=>!0===e||!!(t&&e&&(ti.fun(e)?e(t):to(e).includes(t))),rC=(e,t)=>ti.obj(e)?t&&e[t]:e,rP=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,rO=e=>e,rN=(e,t=rO)=>{let r=rM;e.default&&!0!==e.default&&(r=Object.keys(e=e.default));let i={};for(let n of r){let r=t(e[n],n);ti.und(r)||(i[n]=r)}return i},rM=["config","onProps","onStart","onChange","onPause","onResume","onRest"],rF={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function rU(e){let t=function(e){let t={},r=0;if(ts(e,(e,i)=>{!rF[i]&&(t[i]=e,r++)}),r)return t}(e);if(t){let r={to:t};return ts(e,(e,i)=>i in t||(r[i]=e)),r}return{...e}}function rB(e){return e=tV(e),ti.arr(e)?e.map(rB):ri(e)?te.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function rj(e){return ti.fun(e)||ti.arr(e)&&ti.obj(e[0])}var r$={default:{tension:170,friction:26},molasses:{tension:280,friction:120}},rG={...r$.default,mass:1,damping:1,easing:e=>e,clamp:!1},rq=class{constructor(){this.velocity=0,Object.assign(this,rG)}};function rH(e,t){if(ti.und(t.decay)){let r=!ti.und(t.tension)||!ti.und(t.friction);!r&&ti.und(t.frequency)&&ti.und(t.damping)&&ti.und(t.mass)||(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}else e.duration=void 0}var rK=[],rV=class{constructor(){this.changed=!1,this.values=rK,this.toValues=null,this.fromValues=rK,this.config=new rq,this.immediate=!1}};function rW(e,{key:t,props:r,defaultProps:i,state:n,actions:a}){return new Promise((s,o)=>{let l,d;let u=rI(r.cancel??i?.cancel,t);if(u)f();else{ti.und(r.pause)||(n.paused=rI(r.pause,t));let e=i?.pause;!0!==e&&(e=n.paused||rI(e,t)),l=rD(r.delay||0,t),e?(n.resumeQueue.add(h),a.pause()):(a.resume(),h())}function c(){n.resumeQueue.add(h),n.timeouts.delete(d),d.cancel(),l=d.time-eV.now()}function h(){l>0&&!te.skipAnimation?(n.delayed=!0,d=eV.setTimeout(f,l),n.pauseQueue.add(c),n.timeouts.add(d)):f()}function f(){n.delayed&&(n.delayed=!1),n.pauseQueue.delete(c),n.timeouts.delete(d),e<=(n.cancelId||0)&&(u=!0);try{a.start({...r,callId:e,cancel:u},s)}catch(e){o(e)}}})}var rz=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?rQ(e.get()):t.every(e=>e.noop)?rY(e.get()):rX(e.get(),t.every(e=>e.finished)),rY=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),rX=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),rQ=e=>({value:e,cancelled:!0,finished:!1});function rJ(e,t,r,i){let{callId:n,parentId:a,onRest:s}=t,{asyncTo:o,promise:l}=r;return a||e!==o||t.reset?r.promise=(async()=>{let d,u,c;r.asyncId=n,r.asyncTo=e;let h=rN(t,(e,t)=>"onRest"===t?void 0:e),f=new Promise((e,t)=>(d=e,u=t)),p=e=>{let t=n<=(r.cancelId||0)&&rQ(i)||n!==r.asyncId&&rX(i,!1);if(t)throw e.result=t,u(e),e},m=(e,t)=>{let a=new r0,s=new r1;return(async()=>{if(te.skipAnimation)throw rZ(r),s.result=rX(i,!1),u(s),s;p(a);let o=ti.obj(e)?{...e}:{...t,to:e};o.parentId=n,ts(h,(e,t)=>{ti.und(o[t])&&(o[t]=e)});let l=await i.start(o);return p(a),r.paused&&await new Promise(e=>{r.resumeQueue.add(e)}),l})()};if(te.skipAnimation)return rZ(r),rX(i,!1);try{let t;t=ti.arr(e)?(async e=>{for(let t of e)await m(t)})(e):Promise.resolve(e(m,i.stop.bind(i))),await Promise.all([t.then(d),f]),c=rX(i.get(),!0,!1)}catch(e){if(e instanceof r0)c=e.result;else if(e instanceof r1)c=e.result;else throw e}finally{n==r.asyncId&&(r.asyncId=a,r.asyncTo=a?o:void 0,r.promise=a?l:void 0)}return ti.fun(s)&&eV.batchedUpdates(()=>{s(c,i,i.item)}),c})():l}function rZ(e,t){tl(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var r0=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},r1=class extends Error{constructor(){super("SkipAnimationSignal")}},r2=e=>e instanceof r3,r4=1,r3=class extends tY{constructor(){super(...arguments),this.id=r4++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=rm(this);return e&&e.getValue()}to(...e){return te.to(this,e)}interpolate(...e){return rt(`${t7}The "interpolate" function is deprecated in v9 (use "to" instead)`),te.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){tz(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||tb.sort(this),tz(this,{type:"priority",parent:this,priority:e})}},r5=Symbol.for("SpringPhase"),r8=e=>(1&e[r5])>0,r6=e=>(2&e[r5])>0,r9=e=>(4&e[r5])>0,r7=(e,t)=>t?e[r5]|=3:e[r5]&=-3,ie=(e,t)=>t?e[r5]|=4:e[r5]&=-5,it=class extends r3{constructor(e,t){if(super(),this.animation=new rV,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ti.und(e)||!ti.und(t)){let r=ti.obj(e)?{...e}:{...t,from:e};ti.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(r6(this)||this._state.asyncTo)||r9(this)}get goal(){return tV(this.animation.to)}get velocity(){let e=rm(this);return e instanceof rb?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return r8(this)}get isAnimating(){return r6(this)}get isPaused(){return r9(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1,i=this.animation,{toValues:n}=i,{config:a}=i,s=rv(i.to);!s&&tK(i.to)&&(n=to(tV(i.to))),i.values.forEach((o,l)=>{if(o.done)return;let d=o.constructor==rE?1:s?s[l].lastPosition:n[l],u=i.immediate,c=d;if(!u){let t;if(c=o.lastPosition,a.tension<=0){o.done=!0;return}let r=o.elapsedTime+=e,n=i.fromValues[l],s=null!=o.v0?o.v0:o.v0=ti.arr(a.velocity)?a.velocity[l]:a.velocity,h=a.precision||(n==d?.005:Math.min(1,.001*Math.abs(d-n)));if(ti.und(a.duration)){if(a.decay){let e=!0===a.decay?.998:a.decay,i=Math.exp(-(1-e)*r);c=n+s/(1-e)*(1-i),u=Math.abs(o.lastPosition-c)<=h,t=s*i}else{t=null==o.lastVelocity?s:o.lastVelocity;let r=a.restVelocity||h/10,i=a.clamp?0:a.bounce,l=!ti.und(i),f=n==d?o.v0>0:n<d,p=Math.ceil(e/1);for(let e=0;e<p&&!(!(Math.abs(t)>r)&&(u=Math.abs(d-c)<=h));++e){l&&(c==d||c>d==f)&&(t=-t*i,c=d);let e=(-(1e-6*a.tension)*(c-d)+-(.001*a.friction)*t)/a.mass;t+=1*e,c+=1*t}}}else{let i=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,o.durationProgress>0&&(o.elapsedTime=a.duration*o.durationProgress,r=o.elapsedTime+=e)),i=(i=(a.progress||0)+r/this._memoizedDuration)>1?1:i<0?0:i,o.durationProgress=i),t=((c=n+a.easing(i)*(d-n))-o.lastPosition)/e,u=1==i}o.lastVelocity=t,Number.isNaN(c)&&(console.warn("Got NaN while animating:",this),u=!0)}s&&!s[l].done&&(u=!1),u?o.done=!0:t=!1,o.setValue(c,a.round)&&(r=!0)});let o=rm(this),l=o.getValue();if(t){let e=tV(i.to);(l!==e||r)&&!a.decay?(o.setValue(e),this._onChange(e)):r&&a.decay&&this._onChange(l),this._stop()}else r&&this._onChange(l)}set(e){return eV.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(r6(this)){let{to:e,config:t}=this.animation;eV.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return ti.und(e)?(r=this.queue||[],this.queue=[]):r=[ti.obj(e)?e:{...t,to:e}],Promise.all(r.map(e=>this._update(e))).then(e=>rz(this,e))}stop(e){let{to:t}=this.animation;return this._focus(this.get()),rZ(this._state,e&&this._lastCallId),eV.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){let t=this.key||"",{to:r,from:i}=e;(null==(r=ti.obj(r)?r[t]:r)||rj(r))&&(r=void 0),null==(i=ti.obj(i)?i[t]:i)&&(i=void 0);let n={to:r,from:i};return r8(this)||(e.reverse&&([r,i]=[i,r]),i=tV(i),ti.und(i)?rm(this)||this._set(r):this._set(i)),n}_update({...e},t){let{key:r,defaultProps:i}=this;e.default&&Object.assign(i,rN(e,(e,t)=>/^on/.test(t)?rC(e,r):e)),il(this,e,"onProps"),id(this,"onProps",e,this);let n=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let a=this._state;return rW(++this._lastCallId,{key:r,props:e,defaultProps:i,state:a,actions:{pause:()=>{r9(this)||(ie(this,!0),td(a.pauseQueue),id(this,"onPause",rX(this,ir(this,this.animation.to)),this))},resume:()=>{r9(this)&&(ie(this,!1),r6(this)&&this._resume(),td(a.resumeQueue),id(this,"onResume",rX(this,ir(this,this.animation.to)),this))},start:this._merge.bind(this,n)}}).then(r=>{if(e.loop&&r.finished&&!(t&&r.noop)){let t=ii(e);if(t)return this._update(t,!0)}return r})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(rQ(this));let i=!ti.und(e.to),n=!ti.und(e.from);if(i||n){if(!(t.callId>this._lastToId))return r(rQ(this));this._lastToId=t.callId}let{key:a,defaultProps:s,animation:o}=this,{to:l,from:d}=o,{to:u=l,from:c=d}=e;n&&!i&&(!t.default||ti.und(u))&&(u=c),t.reverse&&([u,c]=[c,u]);let h=!tn(c,d);h&&(o.from=c),c=tV(c);let f=!tn(u,l);f&&this._focus(u);let p=rj(t.to),{config:m}=o,{decay:g,velocity:v}=m;(i||n)&&(m.velocity=0),t.config&&!p&&function(e,t,r){for(let i in r&&(rH(r={...r},t),t={...r,...t}),rH(e,t),Object.assign(e,t),rG)null==e[i]&&(e[i]=rG[i]);let{frequency:i,damping:n}=e,{mass:a}=e;ti.und(i)||(i<.01&&(i=.01),n<0&&(n=0),e.tension=Math.pow(2*Math.PI/i,2)*a,e.friction=4*Math.PI*n*a/i)}(m,rD(t.config,a),t.config!==s.config?rD(s.config,a):void 0);let y=rm(this);if(!y||ti.und(u))return r(rX(this,!0));let b=ti.und(t.reset)?n&&!t.default:!ti.und(c)&&rI(t.reset,a),E=b?c:this.get(),T=rB(u),w=ti.num(T)||ti.arr(T)||ri(T),x=!p&&(!w||rI(s.immediate||t.immediate,a));if(f){let e=rS(u);if(e!==y.constructor){if(x)y=this._set(T);else throw Error(`Cannot animate between ${y.constructor.name} and ${e.name}, as the "to" prop suggests`)}}let S=y.constructor,A=tK(u),R=!1;if(!A){let e=b||!r8(this)&&h;(f||e)&&(A=!(R=tn(rB(E),T))),(tn(o.immediate,x)||x)&&tn(m.decay,g)&&tn(m.velocity,v)||(A=!0)}if(R&&r6(this)&&(o.changed&&!b?A=!0:A||this._stop(l)),!p&&((A||tK(l))&&(o.values=y.getPayload(),o.toValues=tK(u)?null:S==rE?[1]:to(T)),o.immediate==x||(o.immediate=x,x||b||this._set(l)),A)){let{onRest:e}=o;ta(io,e=>il(this,t,e));let i=rX(this,ir(this,l));td(this._pendingCalls,i),this._pendingCalls.add(r),o.changed&&eV.batchedUpdates(()=>{o.changed=!b,e?.(i,this),b?rD(s.onRest,i):o.onStart?.(i,this)})}b&&this._set(E),p?r(rJ(t.to,t,this._state,this)):A?this._start():r6(this)&&!f?this._pendingCalls.add(r):r(rY(E))}_focus(e){let t=this.animation;e!==t.to&&(tW(this)&&this._detach(),t.to=e,tW(this)&&this._attach())}_attach(){let e=0,{to:t}=this.animation;tK(t)&&(tQ(t,this),r2(t)&&(e=t.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;tK(e)&&tJ(e,this)}_set(e,t=!0){let r=tV(e);if(!ti.und(r)){let e=rm(this);if(!e||!tn(r,e.getValue())){let i=rS(r);e&&e.constructor==i?e.setValue(r):rg(this,i.create(r)),e&&eV.batchedUpdates(()=>{this._onChange(r,t)})}}return rm(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,id(this,"onStart",rX(this,ir(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),rD(this.animation.onChange,e,this)),rD(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){let e=this.animation;rm(this).reset(tV(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),r6(this)||(r7(this,!0),r9(this)||this._resume())}_resume(){te.skipAnimation?this.finish():tb.start(this)}_stop(e,t){if(r6(this)){r7(this,!1);let r=this.animation;ta(r.values,e=>{e.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),tz(this,{type:"idle",parent:this});let i=t?rQ(this.get()):rX(this.get(),ir(this,e??r.to));td(this._pendingCalls,i),r.changed&&(r.changed=!1,id(this,"onRest",i,this))}}};function ir(e,t){let r=rB(t);return tn(rB(e.get()),r)}function ii(e,t=e.loop,r=e.to){let i=rD(t);if(i){let n=!0!==i&&rU(i),a=(n||e).reverse,s=!n||n.reset;return ia({...e,loop:t,default:!1,pause:void 0,to:!a||rj(r)?r:void 0,from:s?e.from:void 0,reset:s,...n})}}function ia(e){let{to:t,from:r}=e=rU(e),i=new Set;return ti.obj(t)&&is(t,i),ti.obj(r)&&is(r,i),e.keys=i.size?Array.from(i):null,e}function is(e,t){ts(e,(e,r)=>null!=e&&t.add(r))}var io=["onStart","onRest","onChange","onPause","onResume"];function il(e,t,r){e.animation[r]=t[r]!==rP(t,r)?rC(t[r],e.key):void 0}function id(e,t,...r){e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var iu=["onStart","onChange","onRest"],ic=1,ih=class{constructor(e,t){this.id=ic++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(let t in e){let r=e[t];ti.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(ia(e)),this}start(e){let{queue:t}=this;return(e?t=to(e).map(ia):this.queue=[],this._flush)?this._flush(this,t):(iE(this,t),ip(this,t))}stop(e,t){if(!!e!==e&&(t=e),t){let r=this.springs;ta(to(t),t=>r[t].stop(!!e))}else rZ(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(ti.und(e))this.start({pause:!0});else{let t=this.springs;ta(to(e),e=>t[e].pause())}return this}resume(e){if(ti.und(e))this.start({pause:!1});else{let t=this.springs;ta(to(e),e=>t[e].resume())}return this}each(e){ts(this.springs,e)}_onFrame(){let{onStart:e,onChange:t,onRest:r}=this._events,i=this._active.size>0,n=this._changed.size>0;(i&&!this._started||n&&!this._started)&&(this._started=!0,tl(e,([e,t])=>{t.value=this.get(),e(t,this,this._item)}));let a=!i&&this._started,s=n||a&&r.size?this.get():null;n&&t.size&&tl(t,([e,t])=>{t.value=s,e(t,this,this._item)}),a&&(this._started=!1,tl(r,([e,t])=>{t.value=s,e(t,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}eV.onFrame(this._onFrame)}};function ip(e,t){return Promise.all(t.map(t=>im(e,t))).then(t=>rz(e,t))}async function im(e,t,r){let{keys:i,to:n,from:a,loop:s,onRest:o,onResolve:l}=t,d=ti.obj(t.default)&&t.default;s&&(t.loop=!1),!1===n&&(t.to=null),!1===a&&(t.from=null);let u=ti.arr(n)||ti.fun(n)?n:void 0;u?(t.to=void 0,t.onRest=void 0,d&&(d.onRest=void 0)):ta(iu,r=>{let i=t[r];if(ti.fun(i)){let n=e._events[r];t[r]=({finished:e,cancelled:t})=>{let r=n.get(i);r?(e||(r.finished=!1),t&&(r.cancelled=!0)):n.set(i,{value:null,finished:e||!1,cancelled:t||!1})},d&&(d[r]=t[r])}});let c=e._state;!c.paused===t.pause?(c.paused=t.pause,td(t.pause?c.pauseQueue:c.resumeQueue)):c.paused&&(t.pause=!0);let h=(i||Object.keys(e.springs)).map(r=>e.springs[r].start(t)),f=!0===t.cancel||!0===rP(t,"cancel");(u||f&&c.asyncId)&&h.push(rW(++e._lastAsyncId,{props:t,state:c,actions:{pause:tt,resume:tt,start(t,r){f?(rZ(c,e._lastAsyncId),r(rQ(e))):(t.onRest=o,r(rJ(u,t,c,e)))}}})),c.paused&&await new Promise(e=>{c.resumeQueue.add(e)});let p=rz(e,await Promise.all(h));if(s&&p.finished&&!(r&&p.noop)){let r=ii(t,s,n);if(r)return iE(e,[r]),im(e,r,!0)}return l&&eV.batchedUpdates(()=>l(p,e,e.item)),p}function ig(e,t){let r={...e.springs};return t&&ta(to(t),e=>{ti.und(e.keys)&&(e=ia(e)),ti.obj(e.to)||(e={...e,to:void 0}),ib(r,e,e=>iy(e))}),iv(e,r),r}function iv(e,t){ts(t,(t,r)=>{e.springs[r]||(e.springs[r]=t,tQ(t,e))})}function iy(e,t){let r=new it;return r.key=e,t&&tQ(r,t),r}function ib(e,t,r){t.keys&&ta(t.keys,i=>{(e[i]||(e[i]=r(i)))._prepareNode(t)})}function iE(e,t){ta(t,t=>{ib(e.springs,t,t=>iy(t,e))})}var iT=({children:e,...t})=>{let r=(0,d.useContext)(i_),i=t.pause||!!r.pause,n=t.immediate||!!r.immediate;t=function(e,t){let[r]=(0,d.useState)(()=>({inputs:t,result:e()})),i=(0,d.useRef)(),n=i.current,a=n;return a?t&&a.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,a.inputs)||(a={inputs:t,result:e()}):a=r,(0,d.useEffect)(()=>{i.current=a,n==r&&(r.inputs=r.result=void 0)},[a]),a.result}(()=>({pause:i,immediate:n}),[i,n]);let{Provider:a}=i_;return d.createElement(a,{value:t},e)},i_=function(e,t){return Object.assign(e,d.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}(iT,{});iT.Provider=i_.Provider,iT.Consumer=i_.Consumer;var iw=()=>{let e=[],t=function(t){rr(`${t7}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);let i=[];return ta(e,(e,n)=>{if(ti.und(t))i.push(e.start());else{let a=r(t,e,n);a&&i.push(e.start(a))}}),i};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){let r=e.indexOf(t);~r&&e.splice(r,1)},t.pause=function(){return ta(e,e=>e.pause(...arguments)),this},t.resume=function(){return ta(e,e=>e.resume(...arguments)),this},t.set=function(t){ta(e,(e,r)=>{let i=ti.fun(t)?t(r,e):t;i&&e.set(i)})},t.start=function(t){let r=[];return ta(e,(e,i)=>{if(ti.und(t))r.push(e.start());else{let n=this._getProps(t,e,i);n&&r.push(e.start(n))}}),r},t.stop=function(){return ta(e,e=>e.stop(...arguments)),this},t.update=function(t){return ta(e,(e,r)=>e.update(this._getProps(t,e,r))),this};let r=function(e,t,r){return ti.fun(e)?e(r,t):e};return t._getProps=r,t},ix=class extends r3{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=tG(...t);let r=this._get();rg(this,rS(r).create(r))}advance(e){let t=this._get();tn(t,this.get())||(rm(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&iA(this._active)&&iR(this)}_get(){let e=ti.arr(this.source)?this.source.map(tV):to(tV(this.source));return this.calc(...e)}_start(){this.idle&&!iA(this._active)&&(this.idle=!1,ta(rv(this),e=>{e.done=!1}),te.skipAnimation?(eV.batchedUpdates(()=>this.advance()),iR(this)):tb.start(this))}_attach(){let e=1;ta(to(this.source),t=>{tK(t)&&tQ(t,this),r2(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){ta(to(this.source),e=>{tK(e)&&tJ(e,this)}),this._active.clear(),iR(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=to(this.source).reduce((e,t)=>Math.max(e,(r2(t)?t.priority:0)+1),0))}};function iS(e){return!1!==e.idle}function iA(e){return!e.size||Array.from(e).every(iS)}function iR(e){e.idle||(e.idle=!0,ta(rv(e),e=>{e.done=!0}),tz(e,{type:"idle",parent:e}))}te.assign({createStringInterpolator:t9,to:(e,t)=>new ix(e,t)}),tb.advance;var iL=r(3625),ik=/^--/,iD={},iI={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iC=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),iP=["Webkit","Ms","Moz","O"];iI=Object.keys(iI).reduce((e,t)=>(iP.forEach(r=>e[iC(r,t)]=e[t]),e),iI);var iO=/^(matrix|translate|scale|rotate|skew)/,iN=/^(translate)/,iM=/^(rotate|skew)/,iF=(e,t)=>ti.num(e)&&0!==e?e+t:e,iU=(e,t)=>ti.arr(e)?e.every(e=>iU(e,t)):ti.num(e)?e===t:parseFloat(e)===t,iB=class extends r_{constructor({x:e,y:t,z:r,...i}){let n=[],a=[];(e||t||r)&&(n.push([e||0,t||0,r||0]),a.push(e=>[`translate3d(${e.map(e=>iF(e,"px")).join(",")})`,iU(e,0)])),ts(i,(e,t)=>{if("transform"===t)n.push([e||""]),a.push(e=>[e,""===e]);else if(iO.test(t)){if(delete i[t],ti.und(e))return;let r=iN.test(t)?"px":iM.test(t)?"deg":"";n.push(to(e)),a.push("rotate3d"===t?([e,t,i,n])=>[`rotate3d(${e},${t},${i},${iF(n,r)})`,iU(n,0)]:e=>[`${t}(${e.map(e=>iF(e,r)).join(",")})`,iU(e,t.startsWith("scale")?1:0)])}}),n.length&&(i.transform=new ij(n,a)),super(i)}},ij=class extends tY{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return ta(this.inputs,(r,i)=>{let n=tV(r[0]),[a,s]=this.transforms[i](ti.arr(n)?n:r.map(tV));e+=" "+a,t=t&&s}),t?"none":e}observerAdded(e){1==e&&ta(this.inputs,e=>ta(e,e=>tK(e)&&tQ(e,this)))}observerRemoved(e){0==e&&ta(this.inputs,e=>ta(e,e=>tK(e)&&tJ(e,this)))}eventObserved(e){"change"==e.type&&(this._value=null),tz(this,e)}};te.assign({batchedUpdates:iL.unstable_batchedUpdates,createStringInterpolator:t9,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var i$=((e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=e=>new r_(e),getComponentProps:i=e=>e}={})=>{let n={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:i},a=e=>{let t=rk(e)||"Anonymous";return(e=ti.str(e)?a[e]||(a[e]=rA(e,n)):e[rL]||(e[rL]=rA(e,n))).displayName=`Animated(${t})`,e};return ts(e,(t,r)=>{ti.arr(e)&&(r=rk(t)),a[r]=a(t)}),{animated:a}})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;let r="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{style:i,children:n,scrollTop:a,scrollLeft:s,viewBox:o,...l}=t,d=Object.values(l),u=Object.keys(l).map(t=>r||e.hasAttribute(t)?t:iD[t]||(iD[t]=t.replace(/([A-Z])/g,e=>"-"+e.toLowerCase())));for(let t in void 0!==n&&(e.textContent=n),i)if(i.hasOwnProperty(t)){var c;let r=null==(c=i[t])||"boolean"==typeof c||""===c?"":"number"!=typeof c||0===c||ik.test(t)||iI.hasOwnProperty(t)&&iI[t]?(""+c).trim():c+"px";ik.test(t)?e.style.setProperty(t,r):e.style[t]=r}u.forEach((t,r)=>{e.setAttribute(t,d[r])}),void 0!==a&&(e.scrollTop=a),void 0!==s&&(e.scrollLeft=s),void 0!==o&&e.setAttribute("viewBox",o)},createAnimatedStyle:e=>new iB(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}).animated;let iG=({children:e})=>{let[t,r]=(0,d.useState)(!1),i=(0,d.useRef)(null),n=function(e,t){let r=ti.fun(e),[[i],n]=function(e,t,r){let i=ti.fun(t)&&t;i&&!r&&(r=[]);let n=(0,d.useMemo)(()=>i||3==arguments.length?iw():void 0,[]),a=(0,d.useRef)(0),s=rd(),o=(0,d.useMemo)(()=>({ctrls:[],queue:[],flush(e,t){let r=ig(e,t);return!(a.current>0)||o.queue.length||Object.keys(r).some(t=>!e.springs[t])?new Promise(i=>{iv(e,r),o.queue.push(()=>{i(ip(e,t))}),s()}):ip(e,t)}}),[]),l=(0,d.useRef)([...o.ctrls]),u=[],c=rh(e)||0;function h(e,r){for(let n=e;n<r;n++){let e=l.current[n]||(l.current[n]=new ih(null,o.flush)),r=i?i(n,e):t[n];r&&(u[n]=function(e){let t=ia(e);return ti.und(t.default)&&(t.default=rN(t)),t}(r))}}(0,d.useMemo)(()=>{ta(l.current.slice(e,c),e=>{e.ref?.delete(e),n?.delete(e),e.stop(!0)}),l.current.length=e,h(c,e)},[e]),(0,d.useMemo)(()=>{h(0,Math.min(c,e))},r);let f=l.current.map((e,t)=>ig(e,u[t])),p=(0,d.useContext)(iT),m=rh(p),g=p!==m&&function(e){for(let t in e)return!0;return!1}(p);ro(()=>{a.current++,o.ctrls=l.current;let{queue:e}=o;e.length&&(o.queue=[],ta(e,e=>e())),ta(l.current,(e,t)=>{var r;n?.add(e),g&&e.start({default:p});let i=u[t];i&&((r=i.ref)&&e.ref!==r&&(e.ref?.delete(e),r.add(e),e.ref=r),e.ref?e.queue.push(i):e.start(i))})}),ru(()=>()=>{ta(o.ctrls,e=>e.stop(!0))});let v=f.map(e=>({...e}));return n?[v,n]:v}(1,r?e:[e],r?t||[]:t);return r||2==arguments.length?[i,n]:i}({opacity:t?1:0,transform:t?"translateY(0px)":"translateY(50px)",config:r$.molasses});return(0,d.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>r(e.isIntersecting))});return i.current&&e.observe(i.current),()=>{i.current&&e.unobserve(i.current)}},[]),l.jsx(i$.div,{ref:i,style:n,children:e})};function iq(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}var iH=["color"],iK=(0,d.forwardRef)(function(e,t){var r=e.color,i=iq(e,iH);return(0,d.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,d.createElement)("path",{d:"M6.85355 3.14645C7.04882 3.34171 7.04882 3.65829 6.85355 3.85355L3.70711 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H3.70711L6.85355 11.1464C7.04882 11.3417 7.04882 11.6583 6.85355 11.8536C6.65829 12.0488 6.34171 12.0488 6.14645 11.8536L2.14645 7.85355C1.95118 7.65829 1.95118 7.34171 2.14645 7.14645L6.14645 3.14645C6.34171 2.95118 6.65829 2.95118 6.85355 3.14645Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),iV=["color"],iW=(0,d.forwardRef)(function(e,t){var r=e.color,i=iq(e,iV);return(0,d.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,d.createElement)("path",{d:"M8.14645 3.14645C8.34171 2.95118 8.65829 2.95118 8.85355 3.14645L12.8536 7.14645C13.0488 7.34171 13.0488 7.65829 12.8536 7.85355L8.85355 11.8536C8.65829 12.0488 8.34171 12.0488 8.14645 11.8536C7.95118 11.6583 7.95118 11.3417 8.14645 11.1464L11.2929 8H2.5C2.22386 8 2 7.77614 2 7.5C2 7.22386 2.22386 7 2.5 7H11.2929L8.14645 3.85355C7.95118 3.65829 7.95118 3.34171 8.14645 3.14645Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),iz=["color"],iY=(0,d.forwardRef)(function(e,t){var r=e.color,i=iq(e,iz);return(0,d.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,d.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),iX=["color"],iQ=(0,d.forwardRef)(function(e,t){var r=e.color,i=iq(e,iX);return(0,d.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,d.createElement)("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),iJ=["color"],iZ=(0,d.forwardRef)(function(e,t){var r=e.color,i=iq(e,iJ);return(0,d.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,d.createElement)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),i0=["color"],i1=(0,d.forwardRef)(function(e,t){var r=e.color,i=iq(e,i0);return(0,d.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,d.createElement)("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:void 0===r?"currentColor":r}))});function i2(e){return"[object Object]"===Object.prototype.toString.call(e)||Array.isArray(e)}function i4(e,t){let r=Object.keys(e),i=Object.keys(t);return r.length===i.length&&JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&r.every(r=>{let i=e[r],n=t[r];return"function"==typeof i?`${i}`==`${n}`:i2(i)&&i2(n)?i4(i,n):i===n})}function i3(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function i5(e){return"number"==typeof e}function i8(e){return"string"==typeof e}function i6(e){return"boolean"==typeof e}function i9(e){return"[object Object]"===Object.prototype.toString.call(e)}function i7(e){return Math.abs(e)}function ne(e){return Math.sign(e)}function nt(e){return na(e).map(Number)}function nr(e){return e[ni(e)]}function ni(e){return Math.max(0,e.length-1)}function nn(e,t=0){return Array.from(Array(e),(e,r)=>t+r)}function na(e){return Object.keys(e)}function ns(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function no(){let e=[],t={add:function(r,i,n,a={passive:!0}){let s;return"addEventListener"in r?(r.addEventListener(i,n,a),s=()=>r.removeEventListener(i,n,a)):(r.addListener(n),s=()=>r.removeListener(n)),e.push(s),t},clear:function(){e=e.filter(e=>e())}};return t}function nl(e=0,t=0){let r=i7(e-t);function i(r){return r<e||r>t}return{length:r,max:t,min:e,constrain:function(r){return i(r)?r<e?e:t:r},reachedAny:i,reachedMax:function(e){return e>t},reachedMin:function(t){return t<e},removeOffset:function(e){return r?e-r*Math.ceil((e-t)/r):e}}}function nd(e){let t=e;function r(e){return i5(e)?e:e.get()}return{get:function(){return t},set:function(e){t=r(e)},add:function(e){t+=r(e)},subtract:function(e){t-=r(e)}}}function nu(e,t){let r="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},i=t.style,n=!1;return{clear:function(){n||(i.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){n||(i.transform=r(e.direction(t)))},toggleActive:function(e){n=!e}}}let nc={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function nh(e,t,r){let i,n,a,s,o;let l=e.ownerDocument,d=l.defaultView,u=function(e){function t(e,t){return function e(t,r){return[t,r].reduce((t,r)=>(na(r).forEach(i=>{let n=t[i],a=r[i],s=i9(n)&&i9(a);t[i]=s?e(n,a):a}),t),{})}(e,t||{})}return{mergeOptions:t,optionsAtMedia:function(r){let i=r.breakpoints||{},n=na(i).filter(t=>e.matchMedia(t).matches).map(e=>i[e]).reduce((e,r)=>t(e,r),{});return t(r,n)},optionsMediaQueries:function(t){return t.map(e=>na(e.breakpoints||{})).reduce((e,t)=>e.concat(t),[]).map(e.matchMedia)}}}(d),c=(o=[],{init:function(e,t){return(o=t.filter(({options:e})=>!1!==u.optionsAtMedia(e).active)).forEach(t=>t.init(e,u)),t.reduce((e,t)=>Object.assign(e,{[t.name]:t}),{})},destroy:function(){o=o.filter(e=>e.destroy())}}),h=no(),f=function(){let e,t={},r={init:function(t){e=t},emit:function(i){return(t[i]||[]).forEach(t=>t(e,i)),r},off:function(e,i){return t[e]=(t[e]||[]).filter(e=>e!==i),r},on:function(e,i){return t[e]=(t[e]||[]).concat([i]),r},clear:function(){t={}}};return r}(),{mergeOptions:p,optionsAtMedia:m,optionsMediaQueries:g}=u,{on:v,off:y,emit:b}=f,E=!1,T=p(nc,nh.globalOptions),w=p(T),x=[];function S(t,r){!E&&(w=m(T=p(T,t)),x=r||x,function(){let{container:t,slides:r}=w;a=(i8(t)?e.querySelector(t):t)||e.children[0];let i=i8(r)?a.querySelectorAll(r):r;s=[].slice.call(i||a.children)}(),i=function t(r){let i=function(e,t,r,i,n,a,s){let o,l;let{align:d,axis:u,direction:c,startIndex:h,loop:f,duration:p,dragFree:m,dragThreshold:g,inViewThreshold:v,slidesToScroll:y,skipSnaps:b,containScroll:E,watchResize:T,watchSlides:w,watchDrag:x,watchFocus:S}=a,A={measure:function(e){let{offsetTop:t,offsetLeft:r,offsetWidth:i,offsetHeight:n}=e;return{top:t,right:r+i,bottom:t+n,left:r,width:i,height:n}}},R=A.measure(t),L=r.map(A.measure),k=function(e,t){let r="rtl"===t,i="y"===e,n=!i&&r?-1:1;return{scroll:i?"y":"x",cross:i?"x":"y",startEdge:i?"top":r?"right":"left",endEdge:i?"bottom":r?"left":"right",measureSize:function(e){let{height:t,width:r}=e;return i?t:r},direction:function(e){return e*n}}}(u,c),D=k.measureSize(R),I={measure:function(e){return e/100*D}},C=function(e,t){let r={start:function(){return 0},center:function(e){return(t-e)/2},end:function(e){return t-e}};return{measure:function(i,n){return i8(e)?r[e](i):e(t,i,n)}}}(d,D),P=!f&&!!E,{slideSizes:O,slideSizesWithGaps:N,startGap:M,endGap:F}=function(e,t,r,i,n,a){let{measureSize:s,startEdge:o,endEdge:l}=e,d=r[0]&&n,u=function(){if(!d)return 0;let e=r[0];return i7(t[o]-e[o])}(),c=d?parseFloat(a.getComputedStyle(nr(i)).getPropertyValue(`margin-${l}`)):0,h=r.map(s),f=r.map((e,t,r)=>{let i=t===ni(r);return t?i?h[t]+c:r[t+1][o]-e[o]:h[t]+u}).map(i7);return{slideSizes:h,slideSizesWithGaps:f,startGap:u,endGap:c}}(k,R,L,r,f||!!E,n),U=function(e,t,r,i,n,a,s,o,l){let{startEdge:d,endEdge:u,direction:c}=e,h=i5(r);return{groupSlides:function(e){return h?nt(e).filter(e=>e%r==0).map(t=>e.slice(t,t+r)):e.length?nt(e).reduce((r,l,h)=>{let f=nr(r)||0,p=l===ni(e),m=n[d]-a[f][d],g=n[d]-a[l][u],v=i||0!==f?0:c(s),y=i7(g-(!i&&p?c(o):0)-(m+v));return h&&y>t+2&&r.push(l),p&&r.push(e.length),r},[]).map((t,r,i)=>{let n=Math.max(i[r-1]||0);return e.slice(n,t)}):[]}}}(k,D,y,f,R,L,M,F,0),{snaps:B,snapsAligned:j}=function(e,t,r,i,n){let{startEdge:a,endEdge:s}=e,{groupSlides:o}=n,l=o(i).map(e=>nr(e)[s]-e[0][a]).map(i7).map(t.measure),d=i.map(e=>r[a]-e[a]).map(e=>-i7(e)),u=o(d).map(e=>e[0]).map((e,t)=>e+l[t]);return{snaps:d,snapsAligned:u}}(k,C,R,L,U),$=-nr(B)+nr(N),{snapsContained:G,scrollContainLimit:q}=function(e,t,r,i,n){let a=nl(-t+e,0),s=r.map((e,t)=>{let{min:i,max:n}=a,s=a.constrain(e),o=t===ni(r);return t?o||1>i7(i-s)?i:1>i7(n-s)?n:s:n}).map(e=>parseFloat(e.toFixed(3))),o=function(){let e=s[0],t=nr(s);return nl(s.lastIndexOf(e),s.indexOf(t)+1)}();return{snapsContained:function(){if(t<=e+2)return[a.max];if("keepSnaps"===i)return s;let{min:r,max:n}=o;return s.slice(r,n)}(),scrollContainLimit:o}}(D,$,j,E,0),H=P?G:j,{limit:K}=function(e,t,r){let i=t[0];return{limit:nl(r?i-e:nr(t),i)}}($,H,f),V=function e(t,r,i){let{constrain:n}=nl(0,t),a=t+1,s=o(r);function o(e){return i?i7((a+e)%a):n(e)}function l(){return e(t,s,i)}let d={get:function(){return s},set:function(e){return s=o(e),d},add:function(e){return l().set(s+e)},clone:l};return d}(ni(H),h,f),W=V.clone(),z=nt(r),Y=({dragHandler:e,scrollBody:t,scrollBounds:r,options:{loop:i}},n)=>{i||r.constrain(e.pointerDown()),t.seek(n)},X=({scrollBody:e,translate:t,location:r,offsetLocation:i,scrollLooper:n,slideLooper:a,dragHandler:s,animation:o,eventHandler:l,scrollBounds:d,options:{loop:u}},c)=>{let h=e.settled(),f=!d.shouldConstrain(),p=u?h:h&&f;p&&!s.pointerDown()&&(o.stop(),l.emit("settle")),p||l.emit("scroll");let m=r.get()*c+ee.get()*(1-c);i.set(m),u&&(n.loop(e.direction()),a.loop()),t.to(i.get())},Q=function(e,t,r,i){let n=no(),a=1e3/60,s=null,o=0,l=0;function d(e){if(!l)return;s||(s=e);let n=e-s;for(s=e,o+=n;o>=a;)r(a),o-=a;i(o/a),l&&t.requestAnimationFrame(d)}function u(){t.cancelAnimationFrame(l),s=null,o=0,l=0}return{init:function(){n.add(e,"visibilitychange",()=>{e.hidden&&(s=null,o=0)})},destroy:function(){u(),n.clear()},start:function(){l||(l=t.requestAnimationFrame(d))},stop:u,update:()=>r(a),render:i}}(i,n,e=>Y(ec,e),e=>X(ec,e)),J=H[V.get()],Z=nd(J),ee=nd(J),et=nd(J),er=nd(J),ei=function(e,t,r,i,n,a){let s=0,o=0,l=n,d=.68,u=e.get(),c=0;function h(e){return l=e,p}function f(e){return d=e,p}let p={direction:function(){return o},duration:function(){return l},velocity:function(){return s},seek:function(t){let n=t/1e3,a=l*n,h=i.get()-e.get(),f=0;return l?(r.set(e),s+=h/a,s*=d,u+=s,e.add(s*n),f=u-c):(s=0,r.set(i),e.set(i),f=h),o=ne(f),c=u,p},settled:function(){return .001>i7(i.get()-t.get())},useBaseFriction:function(){return f(.68)},useBaseDuration:function(){return h(n)},useFriction:f,useDuration:h};return p}(Z,et,ee,er,p,0),en=function(e,t,r,i,n){let{reachedAny:a,removeOffset:s,constrain:o}=i;function l(e){return e.concat().sort((e,t)=>i7(e)-i7(t))[0]}function d(t,i){let n=[t,t+r,t-r];if(!e)return t;if(!i)return l(n);let a=n.filter(e=>ne(e)===i);return a.length?l(a):nr(n)-r}return{byDistance:function(r,i){let l=n.get()+r,{index:u,distance:c}=function(r){let i=e?s(r):o(r),{index:n}=t.map((e,t)=>({diff:d(e-i,0),index:t})).sort((e,t)=>i7(e.diff)-i7(t.diff))[0];return{index:n,distance:i}}(l),h=!e&&a(l);if(!i||h)return{index:u,distance:r};let f=r+d(t[u]-c,0);return{index:u,distance:f}},byIndex:function(e,r){let i=d(t[e]-n.get(),r);return{index:e,distance:i}},shortcut:d}}(f,H,$,K,er),ea=function(e,t,r,i,n,a,s){function o(n){let o=n.distance,l=n.index!==t.get();a.add(o),o&&(i.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(r.set(t.get()),t.set(n.index),s.emit("select"))}return{distance:function(e,t){o(n.byDistance(e,t))},index:function(e,r){let i=t.clone().set(e);o(n.byIndex(i.get(),r))}}}(Q,V,W,ei,en,er,s),es=function(e){let{max:t,length:r}=e;return{get:function(e){return r?-((e-t)/r):0}}}(K),eo=no(),el=function(e,t,r,i){let n;let a={},s=null,o=null,l=!1;return{init:function(){n=new IntersectionObserver(e=>{l||(e.forEach(e=>{a[t.indexOf(e.target)]=e}),s=null,o=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:i}),t.forEach(e=>n.observe(e))},destroy:function(){n&&n.disconnect(),l=!0},get:function(e=!0){if(e&&s)return s;if(!e&&o)return o;let t=na(a).reduce((t,r)=>{let i=parseInt(r),{isIntersecting:n}=a[i];return(e&&n||!e&&!n)&&t.push(i),t},[]);return e&&(s=t),e||(o=t),t}}}(t,r,s,v),{slideRegistry:ed}=function(e,t,r,i,n,a){let{groupSlides:s}=n,{min:o,max:l}=i;return{slideRegistry:function(){let i=s(a);return 1===r.length?[a]:e&&"keepSnaps"!==t?i.slice(o,l).map((e,t,r)=>{let i=t===ni(r);return t?i?nn(ni(a)-nr(r)[0]+1,nr(r)[0]):e:nn(nr(r[0])+1)}):i}()}}(P,E,H,q,U,z),eu=function(e,t,r,i,n,a,s,o){let l={passive:!0,capture:!0},d=0;function u(e){"Tab"===e.code&&(d=new Date().getTime())}return{init:function(c){o&&(a.add(document,"keydown",u,!1),t.forEach((t,u)=>{a.add(t,"focus",t=>{(i6(o)||o(c,t))&&function(t){if(new Date().getTime()-d>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;let a=r.findIndex(e=>e.includes(t));i5(a)&&(n.useDuration(0),i.index(a,0),s.emit("slideFocus"))}(u)},l)}))}}}(e,r,ed,ea,ei,eo,s,S),ec={ownerDocument:i,ownerWindow:n,eventHandler:s,containerRect:R,slideRects:L,animation:Q,axis:k,dragHandler:function(e,t,r,i,n,a,s,o,l,d,u,c,h,f,p,m,g,v,y){let{cross:b,direction:E}=e,T=["INPUT","SELECT","TEXTAREA"],w={passive:!1},x=no(),S=no(),A=nl(50,225).constrain(f.measure(20)),R={mouse:300,touch:400},L={mouse:500,touch:600},k=p?43:25,D=!1,I=0,C=0,P=!1,O=!1,N=!1,M=!1;function F(e){if(!ns(e,i)&&e.touches.length>=2)return U(e);let t=a.readPoint(e),r=a.readPoint(e,b),s=i7(t-I),l=i7(r-C);if(!O&&!M&&(!e.cancelable||!(O=s>l)))return U(e);let u=a.pointerMove(e);s>m&&(N=!0),d.useFriction(.3).useDuration(.75),o.start(),n.add(E(u)),e.preventDefault()}function U(e){let t=u.byDistance(0,!1).index!==c.get(),r=a.pointerUp(e)*(p?L:R)[M?"mouse":"touch"],i=function(e,t){let r=c.add(-1*ne(e)),i=u.byDistance(e,!p).distance;return p||i7(e)<A?i:g&&t?.5*i:u.byIndex(r.get(),0).distance}(E(r),t),n=function(e,t){var r,i;if(0===e||0===t||i7(e)<=i7(t))return 0;let n=(r=i7(e),i=i7(t),i7(r-i));return i7(n/e)}(r,i);O=!1,P=!1,S.clear(),d.useDuration(k-10*n).useFriction(.68+n/50),l.distance(i,!p),M=!1,h.emit("pointerUp")}function B(e){N&&(e.stopPropagation(),e.preventDefault(),N=!1)}return{init:function(e){y&&x.add(t,"dragstart",e=>e.preventDefault(),w).add(t,"touchmove",()=>void 0,w).add(t,"touchend",()=>void 0).add(t,"touchstart",o).add(t,"mousedown",o).add(t,"touchcancel",U).add(t,"contextmenu",U).add(t,"click",B,!0);function o(o){(i6(y)||y(e,o))&&function(e){let o=ns(e,i);M=o,N=p&&o&&!e.buttons&&D,D=i7(n.get()-s.get())>=2,o&&0!==e.button||function(e){let t=e.nodeName||"";return T.includes(t)}(e.target)||(P=!0,a.pointerDown(e),d.useFriction(0).useDuration(0),n.set(s),function(){let e=M?r:t;S.add(e,"touchmove",F,w).add(e,"touchend",U).add(e,"mousemove",F,w).add(e,"mouseup",U)}(),I=a.readPoint(e),C=a.readPoint(e,b),h.emit("pointerDown"))}(o)}},destroy:function(){x.clear(),S.clear()},pointerDown:function(){return P}}}(k,e,i,n,er,function(e,t){let r,i;function n(e){return e.timeStamp}function a(r,i){let n=i||e.scroll,a=`client${"x"===n?"X":"Y"}`;return(ns(r,t)?r:r.touches[0])[a]}return{pointerDown:function(e){return r=e,i=e,a(e)},pointerMove:function(e){let t=a(e)-a(i),s=n(e)-n(r)>170;return i=e,s&&(r=e),t},pointerUp:function(e){if(!r||!i)return 0;let t=a(i)-a(r),s=n(e)-n(r),o=n(e)-n(i)>170,l=t/s;return s&&!o&&i7(l)>.1?l:0},readPoint:a}}(k,n),Z,Q,ea,ei,en,V,s,I,m,g,b,0,x),eventStore:eo,percentOfView:I,index:V,indexPrevious:W,limit:K,location:Z,offsetLocation:et,previousLocation:ee,options:a,resizeHandler:function(e,t,r,i,n,a,s){let o,l;let d=[e].concat(i),u=[],c=!1;function h(e){return n.measureSize(s.measure(e))}return{init:function(n){a&&(l=h(e),u=i.map(h),o=new ResizeObserver(r=>{(i6(a)||a(n,r))&&function(r){for(let a of r){if(c)return;let r=a.target===e,s=i.indexOf(a.target),o=r?l:u[s];if(i7(h(r?e:i[s])-o)>=.5){n.reInit(),t.emit("resize");break}}}(r)}),r.requestAnimationFrame(()=>{d.forEach(e=>o.observe(e))}))},destroy:function(){c=!0,o&&o.disconnect()}}}(t,s,n,r,k,T,A),scrollBody:ei,scrollBounds:function(e,t,r,i,n){let a=n.measure(10),s=n.measure(50),o=nl(.1,.99),l=!1;function d(){return!!(!l&&e.reachedAny(r.get())&&e.reachedAny(t.get()))}return{shouldConstrain:d,constrain:function(n){if(!d())return;let l=e.reachedMin(t.get())?"min":"max",u=i7(e[l]-t.get()),c=r.get()-t.get(),h=o.constrain(u/s);r.subtract(c*h),!n&&i7(c)<a&&(r.set(e.constrain(r.get())),i.useDuration(25).useBaseFriction())},toggleActive:function(e){l=!e}}}(K,et,er,ei,I),scrollLooper:function(e,t,r,i){let{reachedMin:n,reachedMax:a}=nl(t.min+.1,t.max+.1);return{loop:function(t){if(!(1===t?a(r.get()):-1===t&&n(r.get())))return;let s=-1*t*e;i.forEach(e=>e.add(s))}}}($,K,et,[Z,et,ee,er]),scrollProgress:es,scrollSnapList:H.map(es.get),scrollSnaps:H,scrollTarget:en,scrollTo:ea,slideLooper:function(e,t,r,i,n,a,s,o,l){let d=nt(n),u=f(h(nt(n).reverse(),s[0]),r,!1).concat(f(h(d,t-s[0]-1),-r,!0));function c(e,t){return e.reduce((e,t)=>e-n[t],t)}function h(e,t){return e.reduce((e,r)=>c(e,t)>0?e.concat([r]):e,[])}function f(n,s,d){let u=a.map((e,r)=>({start:e-i[r]+.5+s,end:e+t-.5+s}));return n.map(t=>{let i=d?0:-r,n=d?r:0,a=u[t][d?"end":"start"];return{index:t,loopPoint:a,slideLocation:nd(-1),translate:nu(e,l[t]),target:()=>o.get()>a?i:n}})}return{canLoop:function(){return u.every(({index:e})=>.1>=c(d.filter(t=>t!==e),t))},clear:function(){u.forEach(e=>e.translate.clear())},loop:function(){u.forEach(e=>{let{target:t,translate:r,slideLocation:i}=e,n=t();n!==i.get()&&(r.to(n),i.set(n))})},loopPoints:u}}(k,D,$,O,N,B,H,et,r),slideFocus:eu,slidesHandler:(l=!1,{init:function(e){w&&(o=new MutationObserver(t=>{!l&&(i6(w)||w(e,t))&&function(t){for(let r of t)if("childList"===r.type){e.reInit(),s.emit("slidesChanged");break}}(t)})).observe(t,{childList:!0})},destroy:function(){o&&o.disconnect(),l=!0}}),slidesInView:el,slideIndexes:z,slideRegistry:ed,slidesToScroll:U,target:er,translate:nu(k,t)};return ec}(e,a,s,l,d,r,f);return r.loop&&!i.slideLooper.canLoop()?t(Object.assign({},r,{loop:!1})):i}(w),g([T,...x.map(({options:e})=>e)]).forEach(e=>h.add(e,"change",A)),w.active&&(i.translate.to(i.location.get()),i.animation.init(),i.slidesInView.init(),i.slideFocus.init(D),i.eventHandler.init(D),i.resizeHandler.init(D),i.slidesHandler.init(D),i.options.loop&&i.slideLooper.loop(),a.offsetParent&&s.length&&i.dragHandler.init(D),n=c.init(D,x)))}function A(e,t){let r=k();R(),S(p({startIndex:r},e),t),f.emit("reInit")}function R(){i.dragHandler.destroy(),i.eventStore.clear(),i.translate.clear(),i.slideLooper.clear(),i.resizeHandler.destroy(),i.slidesHandler.destroy(),i.slidesInView.destroy(),i.animation.destroy(),c.destroy(),h.clear()}function L(e,t,r){w.active&&!E&&(i.scrollBody.useBaseFriction().useDuration(!0===t?0:w.duration),i.scrollTo.index(e,r||0))}function k(){return i.index.get()}let D={canScrollNext:function(){return i.index.add(1).get()!==k()},canScrollPrev:function(){return i.index.add(-1).get()!==k()},containerNode:function(){return a},internalEngine:function(){return i},destroy:function(){E||(E=!0,h.clear(),R(),f.emit("destroy"),f.clear())},off:y,on:v,emit:b,plugins:function(){return n},previousScrollSnap:function(){return i.indexPrevious.get()},reInit:A,rootNode:function(){return e},scrollNext:function(e){L(i.index.add(1).get(),e,-1)},scrollPrev:function(e){L(i.index.add(-1).get(),e,1)},scrollProgress:function(){return i.scrollProgress.get(i.location.get())},scrollSnapList:function(){return i.scrollSnapList},scrollTo:L,selectedScrollSnap:k,slideNodes:function(){return s},slidesInView:function(){return i.slidesInView.get()},slidesNotInView:function(){return i.slidesInView.get(!1)}};return S(t,r),setTimeout(()=>f.emit("init"),0),D}function nf(e={},t=[]){let r=(0,d.useRef)(e),i=(0,d.useRef)(t),[n,a]=(0,d.useState)(),[s,o]=(0,d.useState)(),l=(0,d.useCallback)(()=>{n&&n.reInit(r.current,i.current)},[n]);return(0,d.useEffect)(()=>{i4(r.current,e)||(r.current=e,l())},[e,l]),(0,d.useEffect)(()=>{!function(e,t){if(e.length!==t.length)return!1;let r=i3(e),i=i3(t);return r.every((e,t)=>i4(e,i[t]))}(i.current,t)&&(i.current=t,l())},[t,l]),(0,d.useEffect)(()=>{if("undefined"!=typeof window&&window.document&&window.document.createElement&&s){nh.globalOptions=nf.globalOptions;let e=nh(s,r.current,i.current);return a(e),()=>e.destroy()}a(void 0)},[s,a]),[o,n]}nh.globalOptions=void 0,nf.globalOptions=void 0;let np=d.createContext(null);function nm(){let e=d.useContext(np);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let ng=d.forwardRef(({orientation:e="horizontal",opts:t,setApi:r,plugins:i,className:n,children:a,...s},o)=>{let[u,c]=nf({...t,axis:"horizontal"===e?"x":"y"},i),[h,f]=d.useState(!1),[p,m]=d.useState(!1),g=d.useCallback(e=>{e&&(f(e.canScrollPrev()),m(e.canScrollNext()))},[]),v=d.useCallback(()=>{c?.scrollPrev()},[c]),y=d.useCallback(()=>{c?.scrollNext()},[c]),b=d.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),v()):"ArrowRight"===e.key&&(e.preventDefault(),y())},[v,y]);return d.useEffect(()=>{c&&r&&r(c)},[c,r]),d.useEffect(()=>{if(c)return g(c),c.on("reInit",g),c.on("select",g),()=>{c?.off("select",g)}},[c,g]),l.jsx(np.Provider,{value:{carouselRef:u,api:c,opts:t,orientation:e||(t?.axis==="y"?"vertical":"horizontal"),scrollPrev:v,scrollNext:y,canScrollPrev:h,canScrollNext:p},children:l.jsx("div",{ref:o,onKeyDownCapture:b,className:ef("relative",n),role:"region","aria-roledescription":"carousel",...s,children:a})})});ng.displayName="Carousel";let nv=d.forwardRef(({className:e,...t},r)=>{let{carouselRef:i,orientation:n}=nm();return l.jsx("div",{ref:i,className:"overflow-hidden",children:l.jsx("div",{ref:r,className:ef("flex","horizontal"===n?"-ml-4":"-mt-4 flex-col",e),...t})})});nv.displayName="CarouselContent";let ny=d.forwardRef(({className:e,...t},r)=>{let{orientation:i}=nm();return l.jsx("div",{ref:r,role:"group","aria-roledescription":"slide",className:ef("min-w-0 shrink-0 grow-0 basis-full","horizontal"===i?"pl-4":"pt-4",e),...t})});ny.displayName="CarouselItem";let nb=d.forwardRef(({className:e,variant:t="outline",size:r="icon",...i},n)=>{let{orientation:a,scrollPrev:s,canScrollPrev:o}=nm();return(0,l.jsxs)(em,{ref:n,variant:t,size:r,className:ef("absolute  h-8 w-8 rounded-full","horizontal"===a?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!o,onClick:s,...i,children:[l.jsx(iK,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Previous slide"})]})});nb.displayName="CarouselPrevious";let nE=d.forwardRef(({className:e,variant:t="outline",size:r="icon",...i},n)=>{let{orientation:a,scrollNext:s,canScrollNext:o}=nm();return(0,l.jsxs)(em,{ref:n,variant:t,size:r,className:ef("absolute h-8 w-8 rounded-full","horizontal"===a?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!o,onClick:s,...i,children:[l.jsx(iW,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Next slide"})]})});function nT(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e?.(i),!1===r||!i.defaultPrevented)return t?.(i)}}function n_(e,t=[]){let r=[],i=()=>{let t=r.map(e=>d.createContext(e));return function(r){let i=r?.[e]||t;return d.useMemo(()=>({[`__scope${e}`]:{...r,[e]:i}}),[r,i])}};return i.scopeName=e,[function(t,i){let n=d.createContext(i),a=r.length;function s(t){let{scope:r,children:i,...s}=t,o=r?.[e][a]||n,u=d.useMemo(()=>s,Object.values(s));return(0,l.jsx)(o.Provider,{value:u,children:i})}return r=[...r,i],s.displayName=t+"Provider",[s,function(r,s){let o=s?.[e][a]||n,l=d.useContext(o);if(l)return l;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=r.reduce((t,{useScope:r,scopeName:i})=>{let n=r(e)[`__scope${i}`];return{...t,...n}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}(i,...t)]}function nw(e){let t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...e)=>t.current?.(...e),[])}function nx({prop:e,defaultProp:t,onChange:r=()=>{}}){let[i,n]=function({defaultProp:e,onChange:t}){let r=d.useState(e),[i]=r,n=d.useRef(i),a=nw(t);return d.useEffect(()=>{n.current!==i&&(a(i),n.current=i)},[i,n,a]),r}({defaultProp:t,onChange:r}),a=void 0!==e,s=a?e:i,o=nw(r);return[s,d.useCallback(t=>{if(a){let r="function"==typeof t?t(e):t;r!==e&&o(r)}else n(t)},[a,e,n,o])]}nE.displayName="CarouselNext";var nS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=d.forwardRef((e,r)=>{let{asChild:i,...n}=e,a=i?f:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(a,{...n,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function nA(e,t){e&&iL.flushSync(()=>e.dispatchEvent(t))}function nR(e){let t=e+"CollectionProvider",[r,i]=n_(t),[n,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=e=>{let{scope:t,children:r}=e,i=d.useRef(null),a=d.useRef(new Map).current;return(0,l.jsx)(n,{scope:t,itemMap:a,collectionRef:i,children:r})};s.displayName=t;let o=e+"CollectionSlot",u=d.forwardRef((e,t)=>{let{scope:r,children:i}=e,n=h(t,a(o,r).collectionRef);return(0,l.jsx)(f,{ref:n,children:i})});u.displayName=o;let c=e+"CollectionItemSlot",p="data-radix-collection-item",m=d.forwardRef((e,t)=>{let{scope:r,children:i,...n}=e,s=d.useRef(null),o=h(t,s),u=a(c,r);return d.useEffect(()=>(u.itemMap.set(s,{ref:s,...n}),()=>void u.itemMap.delete(s))),(0,l.jsx)(f,{[p]:"",ref:o,children:i})});return m.displayName=c,[{Provider:s,Slot:u,ItemSlot:m},function(t){let r=a(e+"CollectionConsumer",t);return d.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${p}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},i]}var nL=d.createContext(void 0);function nk(e){let t=d.useContext(nL);return e||t||"ltr"}var nD="dismissableLayer.update",nI=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nC=d.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...u}=e,c=d.useContext(nI),[f,p]=d.useState(null),m=f?.ownerDocument??globalThis?.document,[,g]=d.useState({}),v=h(t,e=>p(e)),y=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=y.indexOf(b),T=f?y.indexOf(f):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,x=T>=E,S=function(e,t=globalThis?.document){let r=nw(e),i=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{let e=e=>{if(e.target&&!i.current){let i=function(){nO("dismissableLayer.pointerDownOutside",r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=i,t.addEventListener("click",n.current,{once:!0})):i()}else t.removeEventListener("click",n.current);i.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}(e=>{let t=e.target,r=[...c.branches].some(e=>e.contains(t));!x||r||(n?.(e),s?.(e),e.defaultPrevented||o?.())},m),A=function(e,t=globalThis?.document){let r=nw(e),i=d.useRef(!1);return d.useEffect(()=>{let e=e=>{e.target&&!i.current&&nO("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}(e=>{let t=e.target;[...c.branches].some(e=>e.contains(t))||(a?.(e),s?.(e),e.defaultPrevented||o?.())},m);return function(e,t=globalThis?.document){let r=nw(e);d.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{T!==c.layers.size-1||(i?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},m),d.useEffect(()=>{if(f)return r&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(ci=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),nP(),()=>{r&&1===c.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=ci)}},[f,m,r,c]),d.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),nP())},[f,c]),d.useEffect(()=>{let e=()=>g({});return document.addEventListener(nD,e),()=>document.removeEventListener(nD,e)},[]),(0,l.jsx)(nS.div,{...u,ref:v,style:{pointerEvents:w?x?"auto":"none":void 0,...e.style},onFocusCapture:nT(e.onFocusCapture,A.onFocusCapture),onBlurCapture:nT(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:nT(e.onPointerDownCapture,S.onPointerDownCapture)})});function nP(){let e=new CustomEvent(nD);document.dispatchEvent(e)}function nO(e,t,r,{discrete:i}){let n=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),i?nA(n,a):n.dispatchEvent(a)}nC.displayName="DismissableLayer",d.forwardRef((e,t)=>{let r=d.useContext(nI),i=d.useRef(null),n=h(t,i);return d.useEffect(()=>{let e=i.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,l.jsx)(nS.div,{...e,ref:n})}).displayName="DismissableLayerBranch";var nN=0;function nM(){d.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??nF()),document.body.insertAdjacentElement("beforeend",e[1]??nF()),nN++,()=>{1===nN&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),nN--}},[])}function nF(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var nU="focusScope.autoFocusOnMount",nB="focusScope.autoFocusOnUnmount",nj={bubbles:!1,cancelable:!0},n$=d.forwardRef((e,t)=>{let{loop:r=!1,trapped:i=!1,onMountAutoFocus:n,onUnmountAutoFocus:a,...s}=e,[o,u]=d.useState(null),c=nw(n),f=nw(a),p=d.useRef(null),m=h(t,e=>u(e)),g=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(i){let e=function(e){if(g.paused||!o)return;let t=e.target;o.contains(t)?p.current=t:nH(p.current,{select:!0})},t=function(e){if(g.paused||!o)return;let t=e.relatedTarget;null===t||o.contains(t)||nH(p.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&nH(o)});return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[i,o,g.paused]),d.useEffect(()=>{if(o){nK.add(g);let e=document.activeElement;if(!o.contains(e)){let t=new CustomEvent(nU,nj);o.addEventListener(nU,c),o.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let i of e)if(nH(i,{select:t}),document.activeElement!==r)return}(nG(o).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&nH(o))}return()=>{o.removeEventListener(nU,c),setTimeout(()=>{let t=new CustomEvent(nB,nj);o.addEventListener(nB,f),o.dispatchEvent(t),t.defaultPrevented||nH(e??document.body,{select:!0}),o.removeEventListener(nB,f),nK.remove(g)},0)}}},[o,c,f,g]);let v=d.useCallback(e=>{if(!r&&!i||g.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){let t=e.currentTarget,[i,a]=function(e){let t=nG(e);return[nq(t,e),nq(t.reverse(),e)]}(t);i&&a?e.shiftKey||n!==a?e.shiftKey&&n===i&&(e.preventDefault(),r&&nH(a,{select:!0})):(e.preventDefault(),r&&nH(i,{select:!0})):n===t&&e.preventDefault()}},[r,i,g.paused]);return(0,l.jsx)(nS.div,{tabIndex:-1,...s,ref:m,onKeyDown:v})});function nG(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function nq(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function nH(e,{select:t=!1}={}){if(e&&e.focus){var r;let i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}n$.displayName="FocusScope";var nK=function(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),(e=nV(e,t)).unshift(t)},remove(t){e=nV(e,t),e[0]?.resume()}}}();function nV(e,t){let r=[...e],i=r.indexOf(t);return -1!==i&&r.splice(i,1),r}var nW=globalThis?.document?d.useLayoutEffect:()=>{},nz=u["useId".toString()]||(()=>void 0),nY=0;function nX(e){let[t,r]=d.useState(nz());return nW(()=>{e||r(e=>e??String(nY++))},[e]),e||(t?`radix-${t}`:"")}let nQ=["top","right","bottom","left"],nJ=Math.min,nZ=Math.max,n0=Math.round,n1=Math.floor,n2=e=>({x:e,y:e}),n4={left:"right",right:"left",bottom:"top",top:"bottom"},n3={start:"end",end:"start"};function n5(e,t){return"function"==typeof e?e(t):e}function n8(e){return e.split("-")[0]}function n6(e){return e.split("-")[1]}function n9(e){return"x"===e?"y":"x"}function n7(e){return"y"===e?"height":"width"}function ae(e){return["top","bottom"].includes(n8(e))?"y":"x"}function at(e){return e.replace(/start|end/g,e=>n3[e])}function ar(e){return e.replace(/left|right|bottom|top/g,e=>n4[e])}function ai(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function an(e){let{x:t,y:r,width:i,height:n}=e;return{width:i,height:n,top:r,left:t,right:t+i,bottom:r+n,x:t,y:r}}function aa(e,t,r){let i,{reference:n,floating:a}=e,s=ae(t),o=n9(ae(t)),l=n7(o),d=n8(t),u="y"===s,c=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,f=n[l]/2-a[l]/2;switch(d){case"top":i={x:c,y:n.y-a.height};break;case"bottom":i={x:c,y:n.y+n.height};break;case"right":i={x:n.x+n.width,y:h};break;case"left":i={x:n.x-a.width,y:h};break;default:i={x:n.x,y:n.y}}switch(n6(t)){case"start":i[o]-=f*(r&&u?-1:1);break;case"end":i[o]+=f*(r&&u?-1:1)}return i}let as=async(e,t,r)=>{let{placement:i="bottom",strategy:n="absolute",middleware:a=[],platform:s}=r,o=a.filter(Boolean),l=await (null==s.isRTL?void 0:s.isRTL(t)),d=await s.getElementRects({reference:e,floating:t,strategy:n}),{x:u,y:c}=aa(d,i,l),h=i,f={},p=0;for(let r=0;r<o.length;r++){let{name:a,fn:m}=o[r],{x:g,y:v,data:y,reset:b}=await m({x:u,y:c,initialPlacement:i,placement:h,strategy:n,middlewareData:f,rects:d,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,c=null!=v?v:c,f={...f,[a]:{...f[a],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(d=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:n}):b.rects),{x:u,y:c}=aa(d,h,l)),r=-1)}return{x:u,y:c,placement:h,strategy:n,middlewareData:f}};async function ao(e,t){var r;void 0===t&&(t={});let{x:i,y:n,platform:a,rects:s,elements:o,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:c="floating",altBoundary:h=!1,padding:f=0}=n5(t,e),p=ai(f),m=o[h?"floating"===c?"reference":"floating":c],g=an(await a.getClippingRect({element:null==(r=await (null==a.isElement?void 0:a.isElement(m)))||r?m:m.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:l})),v="floating"===c?{x:i,y:n,width:s.floating.width,height:s.floating.height}:s.reference,y=await (null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),b=await (null==a.isElement?void 0:a.isElement(y))&&await (null==a.getScale?void 0:a.getScale(y))||{x:1,y:1},E=an(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-E.top+p.top)/b.y,bottom:(E.bottom-g.bottom+p.bottom)/b.y,left:(g.left-E.left+p.left)/b.x,right:(E.right-g.right+p.right)/b.x}}function al(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ad(e){return nQ.some(t=>e[t]>=0)}async function au(e,t){let{placement:r,platform:i,elements:n}=e,a=await (null==i.isRTL?void 0:i.isRTL(n.floating)),s=n8(r),o=n6(r),l="y"===ae(r),d=["left","top"].includes(s)?-1:1,u=a&&l?-1:1,c=n5(t,e),{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof c?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:c.mainAxis||0,crossAxis:c.crossAxis||0,alignmentAxis:c.alignmentAxis};return o&&"number"==typeof p&&(f="end"===o?-1*p:p),l?{x:f*u,y:h*d}:{x:h*d,y:f*u}}function ac(){return"undefined"!=typeof window}function ah(e){return am(e)?(e.nodeName||"").toLowerCase():"#document"}function af(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ap(e){var t;return null==(t=(am(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function am(e){return!!ac()&&(e instanceof Node||e instanceof af(e).Node)}function ag(e){return!!ac()&&(e instanceof Element||e instanceof af(e).Element)}function av(e){return!!ac()&&(e instanceof HTMLElement||e instanceof af(e).HTMLElement)}function ay(e){return!!ac()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof af(e).ShadowRoot)}function ab(e){let{overflow:t,overflowX:r,overflowY:i,display:n}=ax(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!["inline","contents"].includes(n)}function aE(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e){return!1}})}function aT(e){let t=a_(),r=ag(e)?ax(e):e;return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function a_(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function aw(e){return["html","body","#document"].includes(ah(e))}function ax(e){return af(e).getComputedStyle(e)}function aS(e){return ag(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function aA(e){if("html"===ah(e))return e;let t=e.assignedSlot||e.parentNode||ay(e)&&e.host||ap(e);return ay(t)?t.host:t}function aR(e,t,r){var i;void 0===t&&(t=[]),void 0===r&&(r=!0);let n=function e(t){let r=aA(t);return aw(r)?t.ownerDocument?t.ownerDocument.body:t.body:av(r)&&ab(r)?r:e(r)}(e),a=n===(null==(i=e.ownerDocument)?void 0:i.body),s=af(n);if(a){let e=aL(s);return t.concat(s,s.visualViewport||[],ab(n)?n:[],e&&r?aR(e):[])}return t.concat(n,aR(n,[],r))}function aL(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ak(e){let t=ax(e),r=parseFloat(t.width)||0,i=parseFloat(t.height)||0,n=av(e),a=n?e.offsetWidth:r,s=n?e.offsetHeight:i,o=n0(r)!==a||n0(i)!==s;return o&&(r=a,i=s),{width:r,height:i,$:o}}function aD(e){return ag(e)?e:e.contextElement}function aI(e){let t=aD(e);if(!av(t))return n2(1);let r=t.getBoundingClientRect(),{width:i,height:n,$:a}=ak(t),s=(a?n0(r.width):r.width)/i,o=(a?n0(r.height):r.height)/n;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}let aC=n2(0);function aP(e){let t=af(e);return a_()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:aC}function aO(e,t,r,i){var n;void 0===t&&(t=!1),void 0===r&&(r=!1);let a=e.getBoundingClientRect(),s=aD(e),o=n2(1);t&&(i?ag(i)&&(o=aI(i)):o=aI(e));let l=(void 0===(n=r)&&(n=!1),i&&(!n||i===af(s))&&n)?aP(s):n2(0),d=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,c=a.width/o.x,h=a.height/o.y;if(s){let e=af(s),t=i&&ag(i)?af(i):i,r=e,n=aL(r);for(;n&&i&&t!==r;){let e=aI(n),t=n.getBoundingClientRect(),i=ax(n),a=t.left+(n.clientLeft+parseFloat(i.paddingLeft))*e.x,s=t.top+(n.clientTop+parseFloat(i.paddingTop))*e.y;d*=e.x,u*=e.y,c*=e.x,h*=e.y,d+=a,u+=s,n=aL(r=af(n))}}return an({width:c,height:h,x:d,y:u})}function aN(e,t){let r=aS(e).scrollLeft;return t?t.left+r:aO(ap(e)).left+r}function aM(e,t,r){let i;if("viewport"===t)i=function(e,t){let r=af(e),i=ap(e),n=r.visualViewport,a=i.clientWidth,s=i.clientHeight,o=0,l=0;if(n){a=n.width,s=n.height;let e=a_();(!e||e&&"fixed"===t)&&(o=n.offsetLeft,l=n.offsetTop)}return{width:a,height:s,x:o,y:l}}(e,r);else if("document"===t)i=function(e){let t=ap(e),r=aS(e),i=e.ownerDocument.body,n=nZ(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),a=nZ(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight),s=-r.scrollLeft+aN(e),o=-r.scrollTop;return"rtl"===ax(i).direction&&(s+=nZ(t.clientWidth,i.clientWidth)-n),{width:n,height:a,x:s,y:o}}(ap(e));else if(ag(t))i=function(e,t){let r=aO(e,!0,"fixed"===t),i=r.top+e.clientTop,n=r.left+e.clientLeft,a=av(e)?aI(e):n2(1),s=e.clientWidth*a.x;return{width:s,height:e.clientHeight*a.y,x:n*a.x,y:i*a.y}}(t,r);else{let r=aP(e);i={...t,x:t.x-r.x,y:t.y-r.y}}return an(i)}function aF(e){return"static"===ax(e).position}function aU(e,t){if(!av(e)||"fixed"===ax(e).position)return null;if(t)return t(e);let r=e.offsetParent;return ap(e)===r&&(r=r.ownerDocument.body),r}function aB(e,t){let r=af(e);if(aE(e))return r;if(!av(e)){let t=aA(e);for(;t&&!aw(t);){if(ag(t)&&!aF(t))return t;t=aA(t)}return r}let i=aU(e,t);for(;i&&["table","td","th"].includes(ah(i))&&aF(i);)i=aU(i,t);return i&&aw(i)&&aF(i)&&!aT(i)?r:i||function(e){let t=aA(e);for(;av(t)&&!aw(t);){if(aT(t))return t;if(aE(t))break;t=aA(t)}return null}(e)||r}let aj=async function(e){let t=this.getOffsetParent||aB,r=this.getDimensions,i=await r(e.floating);return{reference:function(e,t,r){let i=av(t),n=ap(t),a="fixed"===r,s=aO(e,!0,a,t),o={scrollLeft:0,scrollTop:0},l=n2(0);if(i||!i&&!a){if(("body"!==ah(t)||ab(n))&&(o=aS(t)),i){let e=aO(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&(l.x=aN(n))}let d=0,u=0;if(n&&!i&&!a){let e=n.getBoundingClientRect();u=e.top+o.scrollTop,d=e.left+o.scrollLeft-aN(n,e)}return{x:s.left+o.scrollLeft-l.x-d,y:s.top+o.scrollTop-l.y-u,width:s.width,height:s.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},a$={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:i,strategy:n}=e,a="fixed"===n,s=ap(i),o=!!t&&aE(t.floating);if(i===s||o&&a)return r;let l={scrollLeft:0,scrollTop:0},d=n2(1),u=n2(0),c=av(i);if((c||!c&&!a)&&(("body"!==ah(i)||ab(s))&&(l=aS(i)),av(i))){let e=aO(i);d=aI(i),u.x=e.x+i.clientLeft,u.y=e.y+i.clientTop}return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-l.scrollLeft*d.x+u.x,y:r.y*d.y-l.scrollTop*d.y+u.y}},getDocumentElement:ap,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:i,strategy:n}=e,a=[..."clippingAncestors"===r?aE(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let i=aR(e,[],!1).filter(e=>ag(e)&&"body"!==ah(e)),n=null,a="fixed"===ax(e).position,s=a?aA(e):e;for(;ag(s)&&!aw(s);){let t=ax(s),r=aT(s);r||"fixed"!==t.position||(n=null),(a?!r&&!n:!r&&"static"===t.position&&!!n&&["absolute","fixed"].includes(n.position)||ab(s)&&!r&&function e(t,r){let i=aA(t);return!(i===r||!ag(i)||aw(i))&&("fixed"===ax(i).position||e(i,r))}(e,s))?i=i.filter(e=>e!==s):n=t,s=aA(s)}return t.set(e,i),i}(t,this._c):[].concat(r),i],s=a[0],o=a.reduce((e,r)=>{let i=aM(t,r,n);return e.top=nZ(i.top,e.top),e.right=nJ(i.right,e.right),e.bottom=nJ(i.bottom,e.bottom),e.left=nZ(i.left,e.left),e},aM(t,s,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:aB,getElementRects:aj,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=ak(e);return{width:t,height:r}},getScale:aI,isElement:ag,isRTL:function(e){return"rtl"===ax(e).direction}},aG=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:i,placement:n,rects:a,platform:s,elements:o,middlewareData:l}=t,{element:d,padding:u=0}=n5(e,t)||{};if(null==d)return{};let c=ai(u),h={x:r,y:i},f=n9(ae(n)),p=n7(f),m=await s.getDimensions(d),g="y"===f,v=g?"clientHeight":"clientWidth",y=a.reference[p]+a.reference[f]-h[f]-a.floating[p],b=h[f]-a.reference[f],E=await (null==s.getOffsetParent?void 0:s.getOffsetParent(d)),T=E?E[v]:0;T&&await (null==s.isElement?void 0:s.isElement(E))||(T=o.floating[v]||a.floating[p]);let w=T/2-m[p]/2-1,x=nJ(c[g?"top":"left"],w),S=nJ(c[g?"bottom":"right"],w),A=T-m[p]-S,R=T/2-m[p]/2+(y/2-b/2),L=nZ(x,nJ(R,A)),k=!l.arrow&&null!=n6(n)&&R!==L&&a.reference[p]/2-(R<x?x:S)-m[p]/2<0,D=k?R<x?R-x:R-A:0;return{[f]:h[f]+D,data:{[f]:L,centerOffset:R-L-D,...k&&{alignmentOffset:D}},reset:k}}}),aq=(e,t,r)=>{let i=new Map,n={platform:a$,...r},a={...n.platform,_c:i};return as(e,t,{...n,platform:a})};var aH="undefined"!=typeof document?d.useLayoutEffect:d.useEffect;function aK(e,t){let r,i,n;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(i=r;0!=i--;)if(!aK(e[i],t[i]))return!1;return!0}if((r=(n=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(i=r;0!=i--;)if(!({}).hasOwnProperty.call(t,n[i]))return!1;for(i=r;0!=i--;){let r=n[i];if(("_owner"!==r||!e.$$typeof)&&!aK(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function aV(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function aW(e,t){let r=aV(e);return Math.round(t*r)/r}function az(e){let t=d.useRef(e);return aH(()=>{t.current=e}),t}let aY=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:i}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?aG({element:r.current,padding:i}).fn(t):{}:r?aG({element:r,padding:i}).fn(t):{}}}),aX=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,i;let{x:n,y:a,placement:s,middlewareData:o}=t,l=await au(t,e);return s===(null==(r=o.offset)?void 0:r.placement)&&null!=(i=o.arrow)&&i.alignmentOffset?{}:{x:n+l.x,y:a+l.y,data:{...l,placement:s}}}}}(e),options:[e,t]}),aQ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:i,placement:n}=t,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=n5(e,t),d={x:r,y:i},u=await ao(t,l),c=ae(n8(n)),h=n9(c),f=d[h],p=d[c];if(a){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",r=f+u[e],i=f-u[t];f=nZ(r,nJ(f,i))}if(s){let e="y"===c?"top":"left",t="y"===c?"bottom":"right",r=p+u[e],i=p-u[t];p=nZ(r,nJ(p,i))}let m=o.fn({...t,[h]:f,[c]:p});return{...m,data:{x:m.x-r,y:m.y-i,enabled:{[h]:a,[c]:s}}}}}}(e),options:[e,t]}),aJ=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:i,placement:n,rects:a,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:d=!0}=n5(e,t),u={x:r,y:i},c=ae(n),h=n9(c),f=u[h],p=u[c],m=n5(o,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){let e="y"===h?"height":"width",t=a.reference[h]-a.floating[e]+g.mainAxis,r=a.reference[h]+a.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(d){var v,y;let e="y"===h?"width":"height",t=["top","left"].includes(n8(n)),r=a.reference[c]-a.floating[e]+(t&&(null==(v=s.offset)?void 0:v[c])||0)+(t?0:g.crossAxis),i=a.reference[c]+a.reference[e]+(t?0:(null==(y=s.offset)?void 0:y[c])||0)-(t?g.crossAxis:0);p<r?p=r:p>i&&(p=i)}return{[h]:f,[c]:p}}}}(e),options:[e,t]}),aZ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,i,n,a,s;let{placement:o,middlewareData:l,rects:d,initialPlacement:u,platform:c,elements:h}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...b}=n5(e,t);if(null!=(r=l.arrow)&&r.alignmentOffset)return{};let E=n8(o),T=ae(u),w=n8(u)===u,x=await (null==c.isRTL?void 0:c.isRTL(h.floating)),S=m||(w||!y?[ar(u)]:function(e){let t=ar(e);return[at(e),t,at(t)]}(u)),A="none"!==v;!m&&A&&S.push(...function(e,t,r,i){let n=n6(e),a=function(e,t,r){let i=["left","right"],n=["right","left"];switch(e){case"top":case"bottom":if(r)return t?n:i;return t?i:n;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(n8(e),"start"===r,i);return n&&(a=a.map(e=>e+"-"+n),t&&(a=a.concat(a.map(at)))),a}(u,y,v,x));let R=[u,...S],L=await ao(t,b),k=[],D=(null==(i=l.flip)?void 0:i.overflows)||[];if(f&&k.push(L[E]),p){let e=function(e,t,r){void 0===r&&(r=!1);let i=n6(e),n=n9(ae(e)),a=n7(n),s="x"===n?i===(r?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=ar(s)),[s,ar(s)]}(o,d,x);k.push(L[e[0]],L[e[1]])}if(D=[...D,{placement:o,overflows:k}],!k.every(e=>e<=0)){let e=((null==(n=l.flip)?void 0:n.index)||0)+1,t=R[e];if(t)return{data:{index:e,overflows:D},reset:{placement:t}};let r=null==(a=D.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:a.placement;if(!r)switch(g){case"bestFit":{let e=null==(s=D.filter(e=>{if(A){let t=ae(e.placement);return t===T||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:s[0];e&&(r=e);break}case"initialPlacement":r=u}if(o!==r)return{reset:{placement:r}}}return{}}}}(e),options:[e,t]}),a0=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,i;let n,a;let{placement:s,rects:o,platform:l,elements:d}=t,{apply:u=()=>{},...c}=n5(e,t),h=await ao(t,c),f=n8(s),p=n6(s),m="y"===ae(s),{width:g,height:v}=o.floating;"top"===f||"bottom"===f?(n=f,a=p===(await (null==l.isRTL?void 0:l.isRTL(d.floating))?"start":"end")?"left":"right"):(a=f,n="end"===p?"top":"bottom");let y=v-h.top-h.bottom,b=g-h.left-h.right,E=nJ(v-h[n],y),T=nJ(g-h[a],b),w=!t.middlewareData.shift,x=E,S=T;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(S=b),null!=(i=t.middlewareData.shift)&&i.enabled.y&&(x=y),w&&!p){let e=nZ(h.left,0),t=nZ(h.right,0),r=nZ(h.top,0),i=nZ(h.bottom,0);m?S=g-2*(0!==e||0!==t?e+t:nZ(h.left,h.right)):x=v-2*(0!==r||0!==i?r+i:nZ(h.top,h.bottom))}await u({...t,availableWidth:S,availableHeight:x});let A=await l.getDimensions(d.floating);return g!==A.width||v!==A.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),a1=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:i="referenceHidden",...n}=n5(e,t);switch(i){case"referenceHidden":{let e=al(await ao(t,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:ad(e)}}}case"escaped":{let e=al(await ao(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:ad(e)}}}default:return{}}}}}(e),options:[e,t]}),a2=(e,t)=>({...aY(e),options:[e,t]});var a4=d.forwardRef((e,t)=>{let{children:r,width:i=10,height:n=5,...a}=e;return(0,l.jsx)(nS.svg,{...a,ref:t,width:i,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,l.jsx)("polygon",{points:"0,0 30,0 15,10"})})});a4.displayName="Arrow";var a3="Popper",[a5,a8]=n_(a3),[a6,a9]=a5(a3),a7=e=>{let{__scopePopper:t,children:r}=e,[i,n]=d.useState(null);return(0,l.jsx)(a6,{scope:t,anchor:i,onAnchorChange:n,children:r})};a7.displayName=a3;var se="PopperAnchor",st=d.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:i,...n}=e,a=a9(se,r),s=d.useRef(null),o=h(t,s);return d.useEffect(()=>{a.onAnchorChange(i?.current||s.current)}),i?null:(0,l.jsx)(nS.div,{...n,ref:o})});st.displayName=se;var sr="PopperContent",[si,sn]=a5(sr),sa=d.forwardRef((e,t)=>{let{__scopePopper:r,side:i="bottom",sideOffset:n=0,align:a="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...y}=e,b=a9(sr,r),[E,T]=d.useState(null),w=h(t,e=>T(e)),[x,S]=d.useState(null),A=function(e){let[t,r]=d.useState(void 0);return nW(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let i,n;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,n=t.blockSize}else i=e.offsetWidth,n=e.offsetHeight;r({width:i,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(x),R=A?.width??0,L=A?.height??0,k="number"==typeof f?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(c)?c:[c],I=D.length>0,C={padding:k,boundary:D.filter(sd),altBoundary:I},{refs:P,floatingStyles:O,placement:N,isPositioned:M,middlewareData:F}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:n,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[c,h]=d.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=d.useState(i);aK(f,i)||p(i);let[m,g]=d.useState(null),[v,y]=d.useState(null),b=d.useCallback(e=>{e!==x.current&&(x.current=e,g(e))},[]),E=d.useCallback(e=>{e!==S.current&&(S.current=e,y(e))},[]),T=a||m,w=s||v,x=d.useRef(null),S=d.useRef(null),A=d.useRef(c),R=null!=l,L=az(l),k=az(n),D=az(u),I=d.useCallback(()=>{if(!x.current||!S.current)return;let e={placement:t,strategy:r,middleware:f};k.current&&(e.platform=k.current),aq(x.current,S.current,e).then(e=>{let t={...e,isPositioned:!1!==D.current};C.current&&!aK(A.current,t)&&(A.current=t,iL.flushSync(()=>{h(t)}))})},[f,t,r,k,D]);aH(()=>{!1===u&&A.current.isPositioned&&(A.current.isPositioned=!1,h(e=>({...e,isPositioned:!1})))},[u]);let C=d.useRef(!1);aH(()=>(C.current=!0,()=>{C.current=!1}),[]),aH(()=>{if(T&&(x.current=T),w&&(S.current=w),T&&w){if(L.current)return L.current(T,w,I);I()}},[T,w,I,L,R]);let P=d.useMemo(()=>({reference:x,floating:S,setReference:b,setFloating:E}),[b,E]),O=d.useMemo(()=>({reference:T,floating:w}),[T,w]),N=d.useMemo(()=>{let e={position:r,left:0,top:0};if(!O.floating)return e;let t=aW(O.floating,c.x),i=aW(O.floating,c.y);return o?{...e,transform:"translate("+t+"px, "+i+"px)",...aV(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:i}},[r,o,O.floating,c.x,c.y]);return d.useMemo(()=>({...c,update:I,refs:P,elements:O,floatingStyles:N}),[c,I,P,O,N])}({strategy:"fixed",placement:i+("center"!==a?"-"+a:""),whileElementsMounted:(...e)=>(function(e,t,r,i){let n;void 0===i&&(i={});let{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:d=!1}=i,u=aD(e),c=a||s?[...u?aR(u):[],...aR(t)]:[];c.forEach(e=>{a&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});let h=u&&l?function(e,t){let r,i=null,n=ap(e);function a(){var e;clearTimeout(r),null==(e=i)||e.disconnect(),i=null}return function s(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();let{left:d,top:u,width:c,height:h}=e.getBoundingClientRect();if(o||t(),!c||!h)return;let f=n1(u),p=n1(n.clientWidth-(d+c)),m={rootMargin:-f+"px "+-p+"px "+-n1(n.clientHeight-(u+h))+"px "+-n1(d)+"px",threshold:nZ(0,nJ(1,l))||1},g=!0;function v(e){let t=e[0].intersectionRatio;if(t!==l){if(!g)return s();t?s(!1,t):r=setTimeout(()=>{s(!1,1e-7)},1e3)}g=!1}try{i=new IntersectionObserver(v,{...m,root:n.ownerDocument})}catch(e){i=new IntersectionObserver(v,m)}i.observe(e)}(!0),a}(u,r):null,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[i]=e;i&&i.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),u&&!d&&p.observe(u),p.observe(t));let m=d?aO(e):null;return d&&function t(){let i=aO(e);m&&(i.x!==m.x||i.y!==m.y||i.width!==m.width||i.height!==m.height)&&r(),m=i,n=requestAnimationFrame(t)}(),r(),()=>{var e;c.forEach(e=>{a&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,d&&cancelAnimationFrame(n)}})(...e,{animationFrame:"always"===g}),elements:{reference:b.anchor},middleware:[aX({mainAxis:n+L,alignmentAxis:s}),u&&aQ({mainAxis:!0,crossAxis:!1,limiter:"partial"===p?aJ():void 0,...C}),u&&aZ({...C}),a0({...C,apply:({elements:e,rects:t,availableWidth:r,availableHeight:i})=>{let{width:n,height:a}=t.reference,s=e.floating.style;s.setProperty("--radix-popper-available-width",`${r}px`),s.setProperty("--radix-popper-available-height",`${i}px`),s.setProperty("--radix-popper-anchor-width",`${n}px`),s.setProperty("--radix-popper-anchor-height",`${a}px`)}}),x&&a2({element:x,padding:o}),su({arrowWidth:R,arrowHeight:L}),m&&a1({strategy:"referenceHidden",...C})]}),[U,B]=sc(N),j=nw(v);nW(()=>{M&&j?.()},[M,j]);let $=F.arrow?.x,G=F.arrow?.y,q=F.arrow?.centerOffset!==0,[H,K]=d.useState();return nW(()=>{E&&K(window.getComputedStyle(E).zIndex)},[E]),(0,l.jsx)("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:M?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,l.jsx)(si,{scope:r,placedSide:U,onArrowChange:S,arrowX:$,arrowY:G,shouldHideArrow:q,children:(0,l.jsx)(nS.div,{"data-side":U,"data-align":B,...y,ref:w,style:{...y.style,animation:M?void 0:"none"}})})})});sa.displayName=sr;var ss="PopperArrow",so={top:"bottom",right:"left",bottom:"top",left:"right"},sl=d.forwardRef(function(e,t){let{__scopePopper:r,...i}=e,n=sn(ss,r),a=so[n.placedSide];return(0,l.jsx)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:(0,l.jsx)(a4,{...i,ref:t,style:{...i.style,display:"block"}})})});function sd(e){return null!==e}sl.displayName=ss;var su=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:i,middlewareData:n}=t,a=n.arrow?.centerOffset!==0,s=a?0:e.arrowWidth,o=a?0:e.arrowHeight,[l,d]=sc(r),u={start:"0%",center:"50%",end:"100%"}[d],c=(n.arrow?.x??0)+s/2,h=(n.arrow?.y??0)+o/2,f="",p="";return"bottom"===l?(f=a?u:`${c}px`,p=`${-o}px`):"top"===l?(f=a?u:`${c}px`,p=`${i.floating.height+o}px`):"right"===l?(f=`${-o}px`,p=a?u:`${h}px`):"left"===l&&(f=`${i.floating.width+o}px`,p=a?u:`${h}px`),{data:{x:f,y:p}}}});function sc(e){let[t,r="center"]=e.split("-");return[t,r]}var sh=d.forwardRef((e,t)=>{let{container:r,...i}=e,[n,a]=d.useState(!1);nW(()=>a(!0),[]);let s=r||n&&globalThis?.document?.body;return s?iL.createPortal((0,l.jsx)(nS.div,{...i,ref:t}),s):null});sh.displayName="Portal";var sf=e=>{let{present:t,children:r}=e,i=function(e){var t,r;let[i,n]=d.useState(),a=d.useRef({}),s=d.useRef(e),o=d.useRef("none"),[l,u]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},d.useReducer((e,t)=>r[e][t]??e,t));return d.useEffect(()=>{let e=sp(a.current);o.current="mounted"===l?e:"none"},[l]),nW(()=>{let t=a.current,r=s.current;if(r!==e){let i=o.current,n=sp(t);e?u("MOUNT"):"none"===n||t?.display==="none"?u("UNMOUNT"):r&&i!==n?u("ANIMATION_OUT"):u("UNMOUNT"),s.current=e}},[e,u]),nW(()=>{if(i){let e=e=>{let t=sp(a.current).includes(e.animationName);e.target===i&&t&&iL.flushSync(()=>u("ANIMATION_END"))},t=e=>{e.target===i&&(o.current=sp(a.current))};return i.addEventListener("animationstart",t),i.addEventListener("animationcancel",e),i.addEventListener("animationend",e),()=>{i.removeEventListener("animationstart",t),i.removeEventListener("animationcancel",e),i.removeEventListener("animationend",e)}}u("ANIMATION_END")},[i,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(e=>{e&&(a.current=getComputedStyle(e)),n(e)},[])}}(t),n="function"==typeof r?r({present:i.isPresent}):d.Children.only(r),a=h(i.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(n));return"function"==typeof r||i.isPresent?d.cloneElement(n,{ref:a}):null};function sp(e){return e?.animationName||"none"}sf.displayName="Presence";var sm="rovingFocusGroup.onEntryFocus",sg={bubbles:!1,cancelable:!0},sv="RovingFocusGroup",[sy,sb,sE]=nR(sv),[sT,s_]=n_(sv,[sE]),[sw,sx]=sT(sv),sS=d.forwardRef((e,t)=>(0,l.jsx)(sy.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,l.jsx)(sy.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,l.jsx)(sA,{...e,ref:t})})}));sS.displayName=sv;var sA=d.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:i,loop:n=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...p}=e,m=d.useRef(null),g=h(t,m),v=nk(a),[y=null,b]=nx({prop:s,defaultProp:o,onChange:u}),[E,T]=d.useState(!1),w=nw(c),x=sb(r),S=d.useRef(!1),[A,R]=d.useState(0);return d.useEffect(()=>{let e=m.current;if(e)return e.addEventListener(sm,w),()=>e.removeEventListener(sm,w)},[w]),(0,l.jsx)(sw,{scope:r,orientation:i,dir:v,loop:n,currentTabStopId:y,onItemFocus:d.useCallback(e=>b(e),[b]),onItemShiftTab:d.useCallback(()=>T(!0),[]),onFocusableItemAdd:d.useCallback(()=>R(e=>e+1),[]),onFocusableItemRemove:d.useCallback(()=>R(e=>e-1),[]),children:(0,l.jsx)(nS.div,{tabIndex:E||0===A?-1:0,"data-orientation":i,...p,ref:g,style:{outline:"none",...e.style},onMouseDown:nT(e.onMouseDown,()=>{S.current=!0}),onFocus:nT(e.onFocus,e=>{let t=!S.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(sm,sg);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=x().filter(e=>e.focusable);sD([e.find(e=>e.active),e.find(e=>e.id===y),...e].filter(Boolean).map(e=>e.ref.current),f)}}S.current=!1}),onBlur:nT(e.onBlur,()=>T(!1))})})}),sR="RovingFocusGroupItem",sL=d.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:i=!0,active:n=!1,tabStopId:a,...s}=e,o=nX(),u=a||o,c=sx(sR,r),h=c.currentTabStopId===u,f=sb(r),{onFocusableItemAdd:p,onFocusableItemRemove:m}=c;return d.useEffect(()=>{if(i)return p(),()=>m()},[i,p,m]),(0,l.jsx)(sy.ItemSlot,{scope:r,id:u,focusable:i,active:n,children:(0,l.jsx)(nS.span,{tabIndex:h?0:-1,"data-orientation":c.orientation,...s,ref:t,onMouseDown:nT(e.onMouseDown,e=>{i?c.onItemFocus(u):e.preventDefault()}),onFocus:nT(e.onFocus,()=>c.onItemFocus(u)),onKeyDown:nT(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){c.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var i;let n=(i=e.key,"rtl"!==r?i:"ArrowLeft"===i?"ArrowRight":"ArrowRight"===i?"ArrowLeft":i);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return sk[n]}(e,c.orientation,c.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=f().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let i=r.indexOf(e.currentTarget);r=c.loop?function(e,t){return e.map((r,i)=>e[(t+i)%e.length])}(r,i+1):r.slice(i+1)}setTimeout(()=>sD(r))}})})})});sL.displayName=sR;var sk={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sD(e,t=!1){let r=document.activeElement;for(let i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}var sI=new WeakMap,sC=new WeakMap,sP={},sO=0,sN=function(e){return e&&(e.host||sN(e.parentNode))},sM=function(e,t,r,i){var n=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=sN(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});sP[r]||(sP[r]=new WeakMap);var a=sP[r],s=[],o=new Set,l=new Set(n),d=function(e){!e||o.has(e)||(o.add(e),d(e.parentNode))};n.forEach(d);var u=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(i),n=null!==t&&"false"!==t,l=(sI.get(e)||0)+1,d=(a.get(e)||0)+1;sI.set(e,l),a.set(e,d),s.push(e),1===l&&n&&sC.set(e,!0),1===d&&e.setAttribute(r,"true"),n||e.setAttribute(i,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return u(t),o.clear(),sO++,function(){s.forEach(function(e){var t=sI.get(e)-1,n=a.get(e)-1;sI.set(e,t),a.set(e,n),t||(sC.has(e)||e.removeAttribute(i),sC.delete(e)),n||e.removeAttribute(r)}),--sO||(sI=new WeakMap,sI=new WeakMap,sC=new WeakMap,sP={})}},sF=function(e,t,r){void 0===r&&(r="data-aria-hidden");var i,n=Array.from(Array.isArray(e)?e:[e]),a=t||(i=e,"undefined"==typeof document?null:(Array.isArray(i)?i[0]:i).ownerDocument.body);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),sM(n,a,r,"aria-hidden")):function(){return null}},sU=function(){return(sU=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function sB(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var sj="right-scroll-bar-position",s$="width-before-scroll-bar";function sG(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var sq="undefined"!=typeof window?d.useLayoutEffect:d.useEffect,sH=new WeakMap;function sK(e){return e}var sV=function(e){void 0===e&&(e={});var t,r,i,n=(void 0===t&&(t=sK),r=[],i=!1,{read:function(){if(i)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:null},useMedium:function(e){var n=t(e,i);return r.push(n),function(){r=r.filter(function(e){return e!==n})}},assignSyncMedium:function(e){for(i=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){i=!0;var t=[];if(r.length){var n=r;r=[],n.forEach(e),t=r}var a=function(){var r=t;t=[],r.forEach(e)},s=function(){return Promise.resolve().then(a)};s(),r={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),r}}}});return n.options=sU({async:!0,ssr:!1},e),n}(),sW=function(){},sz=d.forwardRef(function(e,t){var r,i,n,a,s=d.useRef(null),o=d.useState({onScrollCapture:sW,onWheelCapture:sW,onTouchMoveCapture:sW}),l=o[0],u=o[1],c=e.forwardProps,h=e.children,f=e.className,p=e.removeScrollBar,m=e.enabled,g=e.shards,v=e.sideCar,y=e.noIsolation,b=e.inert,E=e.allowPinchZoom,T=e.as,w=e.gapMode,x=sB(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=(r=[s,t],i=function(e){return r.forEach(function(t){return sG(t,e)})},(n=(0,d.useState)(function(){return{value:null,callback:i,facade:{get current(){return n.value},set current(value){var e=n.value;e!==value&&(n.value=value,n.callback(value,e))}}}})[0]).callback=i,a=n.facade,sq(function(){var e=sH.get(a);if(e){var t=new Set(e),i=new Set(r),n=a.current;t.forEach(function(e){i.has(e)||sG(e,null)}),i.forEach(function(e){t.has(e)||sG(e,n)})}sH.set(a,r)},[r]),a),A=sU(sU({},x),l);return d.createElement(d.Fragment,null,m&&d.createElement(v,{sideCar:sV,removeScrollBar:p,shards:g,noIsolation:y,inert:b,setCallbacks:u,allowPinchZoom:!!E,lockRef:s,gapMode:w}),c?d.cloneElement(d.Children.only(h),sU(sU({},A),{ref:S})):d.createElement(void 0===T?"div":T,sU({},A,{className:f,ref:S}),h))});sz.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},sz.classNames={fullWidth:s$,zeroRight:sj};var sY=function(e){var t=e.sideCar,r=sB(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw Error("Sidecar medium not found");return d.createElement(i,sU({},r))};sY.isSideCarExport=!0;var sX=function(){var e=0,t=null;return{add:function(i){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=cn||r.nc;return t&&e.setAttribute("nonce",t),e}())){var n,a;(n=t).styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),a=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sQ=function(){var e=sX();return function(t,r){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},sJ=function(){var e=sQ();return function(t){return e(t.styles,t.dynamic),null}},sZ={left:0,top:0,right:0,gap:0},s0=function(e){return parseInt(e||"",10)||0},s1=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],i=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[s0(r),s0(i),s0(n)]},s2=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return sZ;var t=s1(e),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},s4=sJ(),s3="data-scroll-locked",s5=function(e,t,r,i){var n=e.left,a=e.top,s=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(i,";\n   padding-right: ").concat(o,"px ").concat(i,";\n  }\n  body[").concat(s3,"] {\n    overflow: hidden ").concat(i,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(i,";"),"margin"===r&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(i,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(sj," {\n    right: ").concat(o,"px ").concat(i,";\n  }\n  \n  .").concat(s$," {\n    margin-right: ").concat(o,"px ").concat(i,";\n  }\n  \n  .").concat(sj," .").concat(sj," {\n    right: 0 ").concat(i,";\n  }\n  \n  .").concat(s$," .").concat(s$," {\n    margin-right: 0 ").concat(i,";\n  }\n  \n  body[").concat(s3,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},s8=function(){var e=parseInt(document.body.getAttribute(s3)||"0",10);return isFinite(e)?e:0},s6=function(){d.useEffect(function(){return document.body.setAttribute(s3,(s8()+1).toString()),function(){var e=s8()-1;e<=0?document.body.removeAttribute(s3):document.body.setAttribute(s3,e.toString())}},[])},s9=function(e){var t=e.noRelative,r=e.noImportant,i=e.gapMode,n=void 0===i?"margin":i;s6();var a=d.useMemo(function(){return s2(n)},[n]);return d.createElement(s4,{styles:s5(a,!t,n,r?"":"!important")})},s7=!1;if("undefined"!=typeof window)try{var oe=Object.defineProperty({},"passive",{get:function(){return s7=!0,!0}});window.addEventListener("test",oe,oe),window.removeEventListener("test",oe,oe)}catch(e){s7=!1}var ot=!!s7&&{passive:!1},or=function(e,t){var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===r[t])},oi=function(e,t){var r=t.ownerDocument,i=t;do{if("undefined"!=typeof ShadowRoot&&i instanceof ShadowRoot&&(i=i.host),on(e,i)){var n=oa(e,i);if(n[1]>n[2])return!0}i=i.parentNode}while(i&&i!==r.body);return!1},on=function(e,t){return"v"===e?or(t,"overflowY"):or(t,"overflowX")},oa=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},os=function(e,t,r,i,n){var a,s=(a=window.getComputedStyle(t).direction,"h"===e&&"rtl"===a?-1:1),o=s*i,l=r.target,d=t.contains(l),u=!1,c=o>0,h=0,f=0;do{var p=oa(e,l),m=p[0],g=p[1]-p[2]-s*m;(m||g)&&on(e,l)&&(h+=g,f+=m),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return c&&(n&&1>Math.abs(h)||!n&&o>h)?u=!0:!c&&(n&&1>Math.abs(f)||!n&&-o>f)&&(u=!0),u},oo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ol=function(e){return[e.deltaX,e.deltaY]},od=function(e){return e&&"current"in e?e.current:e},ou=0,oc=[];let oh=(u9=function(e){var t=d.useRef([]),r=d.useRef([0,0]),i=d.useRef(),n=d.useState(ou++)[0],a=d.useState(sJ)[0],s=d.useRef(e);d.useEffect(function(){s.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var t=(function(e,t,r){if(r||2==arguments.length)for(var i,n=0,a=t.length;n<a;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(od),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var o=d.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var n,a=oo(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-a[0],d="deltaY"in e?e.deltaY:o[1]-a[1],u=e.target,c=Math.abs(l)>Math.abs(d)?"h":"v";if("touches"in e&&"h"===c&&"range"===u.type)return!1;var h=oi(c,u);if(!h)return!0;if(h?n=c:(n="v"===c?"h":"v",h=oi(c,u)),!h)return!1;if(!i.current&&"changedTouches"in e&&(l||d)&&(i.current=n),!n)return!0;var f=i.current||n;return os(f,t,e,"h"===f?l:d,!0)},[]),l=d.useCallback(function(e){if(oc.length&&oc[oc.length-1]===a){var r="deltaY"in e?ol(e):oo(e),i=t.current.filter(function(t){var i;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(i=t.delta)[0]===r[0]&&i[1]===r[1]})[0];if(i&&i.should){e.cancelable&&e.preventDefault();return}if(!i){var n=(s.current.shards||[]).map(od).filter(Boolean).filter(function(t){return t.contains(e.target)});(n.length>0?o(e,n[0]):!s.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),u=d.useCallback(function(e,r,i,n){var a={name:e,delta:r,target:i,should:n,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(i)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),c=d.useCallback(function(e){r.current=oo(e),i.current=void 0},[]),h=d.useCallback(function(t){u(t.type,ol(t),t.target,o(t,e.lockRef.current))},[]),f=d.useCallback(function(t){u(t.type,oo(t),t.target,o(t,e.lockRef.current))},[]);d.useEffect(function(){return oc.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,ot),document.addEventListener("touchmove",l,ot),document.addEventListener("touchstart",c,ot),function(){oc=oc.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,ot),document.removeEventListener("touchmove",l,ot),document.removeEventListener("touchstart",c,ot)}},[]);var p=e.removeScrollBar,m=e.inert;return d.createElement(d.Fragment,null,m?d.createElement(a,{styles:"\n  .block-interactivity-".concat(n," {pointer-events: none;}\n  .allow-interactivity-").concat(n," {pointer-events: all;}\n")}):null,p?d.createElement(s9,{gapMode:e.gapMode}):null)},sV.useMedium(u9),sY);var of=d.forwardRef(function(e,t){return d.createElement(sz,sU({},e,{ref:t,sideCar:oh}))});of.classNames=sz.classNames;var op=["Enter"," "],om=["ArrowUp","PageDown","End"],og=["ArrowDown","PageUp","Home",...om],ov={ltr:[...op,"ArrowRight"],rtl:[...op,"ArrowLeft"]},oy={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ob="Menu",[oE,oT,o_]=nR(ob),[ow,ox]=n_(ob,[o_,a8,s_]),oS=a8(),oA=s_(),[oR,oL]=ow(ob),[ok,oD]=ow(ob),oI=e=>{let{__scopeMenu:t,open:r=!1,children:i,dir:n,onOpenChange:a,modal:s=!0}=e,o=oS(t),[u,c]=d.useState(null),h=d.useRef(!1),f=nw(a),p=nk(n);return d.useEffect(()=>{let e=()=>{h.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>h.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,l.jsx)(a7,{...o,children:(0,l.jsx)(oR,{scope:t,open:r,onOpenChange:f,content:u,onContentChange:c,children:(0,l.jsx)(ok,{scope:t,onClose:d.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:p,modal:s,children:i})})})};oI.displayName=ob;var oC=d.forwardRef((e,t)=>{let{__scopeMenu:r,...i}=e,n=oS(r);return(0,l.jsx)(st,{...n,...i,ref:t})});oC.displayName="MenuAnchor";var oP="MenuPortal",[oO,oN]=ow(oP,{forceMount:void 0}),oM=e=>{let{__scopeMenu:t,forceMount:r,children:i,container:n}=e,a=oL(oP,t);return(0,l.jsx)(oO,{scope:t,forceMount:r,children:(0,l.jsx)(sf,{present:r||a.open,children:(0,l.jsx)(sh,{asChild:!0,container:n,children:i})})})};oM.displayName=oP;var oF="MenuContent",[oU,oB]=ow(oF),oj=d.forwardRef((e,t)=>{let r=oN(oF,e.__scopeMenu),{forceMount:i=r.forceMount,...n}=e,a=oL(oF,e.__scopeMenu),s=oD(oF,e.__scopeMenu);return(0,l.jsx)(oE.Provider,{scope:e.__scopeMenu,children:(0,l.jsx)(sf,{present:i||a.open,children:(0,l.jsx)(oE.Slot,{scope:e.__scopeMenu,children:s.modal?(0,l.jsx)(o$,{...n,ref:t}):(0,l.jsx)(oG,{...n,ref:t})})})})}),o$=d.forwardRef((e,t)=>{let r=oL(oF,e.__scopeMenu),i=d.useRef(null),n=h(t,i);return d.useEffect(()=>{let e=i.current;if(e)return sF(e)},[]),(0,l.jsx)(oq,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:nT(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),oG=d.forwardRef((e,t)=>{let r=oL(oF,e.__scopeMenu);return(0,l.jsx)(oq,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),oq=d.forwardRef((e,t)=>{let{__scopeMenu:r,loop:i=!1,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:g,onDismiss:v,disableOutsideScroll:y,...b}=e,E=oL(oF,r),T=oD(oF,r),w=oS(r),x=oA(r),S=oT(r),[A,R]=d.useState(null),L=d.useRef(null),k=h(t,L,E.onContentChange),D=d.useRef(0),I=d.useRef(""),C=d.useRef(0),P=d.useRef(null),O=d.useRef("right"),N=d.useRef(0),M=y?of:d.Fragment,F=y?{as:f,allowPinchZoom:!0}:void 0,U=e=>{let t=I.current+e,r=S().filter(e=>!e.disabled),i=document.activeElement,n=r.find(e=>e.ref.current===i)?.textValue,a=function(e,t,r){var i;let n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=(i=Math.max(r?e.indexOf(r):-1,0),e.map((t,r)=>e[(i+r)%e.length]));1===n.length&&(a=a.filter(e=>e!==r));let s=a.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return s!==r?s:void 0}(r.map(e=>e.textValue),t,n),s=r.find(e=>e.textValue===a)?.ref.current;(function e(t){I.current=t,window.clearTimeout(D.current),""!==t&&(D.current=window.setTimeout(()=>e(""),1e3))})(t),s&&setTimeout(()=>s.focus())};d.useEffect(()=>()=>window.clearTimeout(D.current),[]),nM();let B=d.useCallback(e=>O.current===P.current?.side&&function(e,t){return!!t&&function(e,t){let{x:r,y:i}=e,n=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let s=t[e].x,o=t[e].y,l=t[a].x,d=t[a].y;o>i!=d>i&&r<(l-s)*(i-o)/(d-o)+s&&(n=!n)}return n}({x:e.clientX,y:e.clientY},t)}(e,P.current?.area),[]);return(0,l.jsx)(oU,{scope:r,searchRef:I,onItemEnter:d.useCallback(e=>{B(e)&&e.preventDefault()},[B]),onItemLeave:d.useCallback(e=>{B(e)||(L.current?.focus(),R(null))},[B]),onTriggerLeave:d.useCallback(e=>{B(e)&&e.preventDefault()},[B]),pointerGraceTimerRef:C,onPointerGraceIntentChange:d.useCallback(e=>{P.current=e},[]),children:(0,l.jsx)(M,{...F,children:(0,l.jsx)(n$,{asChild:!0,trapped:n,onMountAutoFocus:nT(a,e=>{e.preventDefault(),L.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:(0,l.jsx)(nC,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:g,onDismiss:v,children:(0,l.jsx)(sS,{asChild:!0,...x,dir:T.dir,orientation:"vertical",loop:i,currentTabStopId:A,onCurrentTabStopIdChange:R,onEntryFocus:nT(u,e=>{T.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,l.jsx)(sa,{role:"menu","aria-orientation":"vertical","data-state":la(E.open),"data-radix-menu-content":"",dir:T.dir,...w,...b,ref:k,style:{outline:"none",...b.style},onKeyDown:nT(b.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,i=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&i&&U(e.key));let n=L.current;if(e.target!==n||!og.includes(e.key))return;e.preventDefault();let a=S().filter(e=>!e.disabled).map(e=>e.ref.current);om.includes(e.key)&&a.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(a)}),onBlur:nT(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(D.current),I.current="")}),onPointerMove:nT(e.onPointerMove,ll(e=>{let t=e.target,r=N.current!==e.clientX;if(e.currentTarget.contains(t)&&r){let t=e.clientX>N.current?"right":"left";O.current=t,N.current=e.clientX}}))})})})})})})});oj.displayName=oF;var oH=d.forwardRef((e,t)=>{let{__scopeMenu:r,...i}=e;return(0,l.jsx)(nS.div,{role:"group",...i,ref:t})});oH.displayName="MenuGroup";var oK=d.forwardRef((e,t)=>{let{__scopeMenu:r,...i}=e;return(0,l.jsx)(nS.div,{...i,ref:t})});oK.displayName="MenuLabel";var oV="MenuItem",oW="menu.itemSelect",oz=d.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:i,...n}=e,a=d.useRef(null),s=oD(oV,e.__scopeMenu),o=oB(oV,e.__scopeMenu),u=h(t,a),c=d.useRef(!1);return(0,l.jsx)(oY,{...n,ref:u,disabled:r,onClick:nT(e.onClick,()=>{let e=a.current;if(!r&&e){let t=new CustomEvent(oW,{bubbles:!0,cancelable:!0});e.addEventListener(oW,e=>i?.(e),{once:!0}),nA(e,t),t.defaultPrevented?c.current=!1:s.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),c.current=!0},onPointerUp:nT(e.onPointerUp,e=>{c.current||e.currentTarget?.click()}),onKeyDown:nT(e.onKeyDown,e=>{let t=""!==o.searchRef.current;!r&&(!t||" "!==e.key)&&op.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});oz.displayName=oV;var oY=d.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:i=!1,textValue:n,...a}=e,s=oB(oV,r),o=oA(r),u=d.useRef(null),c=h(t,u),[f,p]=d.useState(!1),[m,g]=d.useState("");return d.useEffect(()=>{let e=u.current;e&&g((e.textContent??"").trim())},[a.children]),(0,l.jsx)(oE.ItemSlot,{scope:r,disabled:i,textValue:n??m,children:(0,l.jsx)(sL,{asChild:!0,...o,focusable:!i,children:(0,l.jsx)(nS.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...a,ref:c,onPointerMove:nT(e.onPointerMove,ll(e=>{i?s.onItemLeave(e):(s.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:nT(e.onPointerLeave,ll(e=>s.onItemLeave(e))),onFocus:nT(e.onFocus,()=>p(!0)),onBlur:nT(e.onBlur,()=>p(!1))})})})}),oX=d.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:i,...n}=e;return(0,l.jsx)(o3,{scope:e.__scopeMenu,checked:r,children:(0,l.jsx)(oz,{role:"menuitemcheckbox","aria-checked":ls(r)?"mixed":r,...n,ref:t,"data-state":lo(r),onSelect:nT(n.onSelect,()=>i?.(!!ls(r)||!r),{checkForDefaultPrevented:!1})})})});oX.displayName="MenuCheckboxItem";var oQ="MenuRadioGroup",[oJ,oZ]=ow(oQ,{value:void 0,onValueChange:()=>{}}),o0=d.forwardRef((e,t)=>{let{value:r,onValueChange:i,...n}=e,a=nw(i);return(0,l.jsx)(oJ,{scope:e.__scopeMenu,value:r,onValueChange:a,children:(0,l.jsx)(oH,{...n,ref:t})})});o0.displayName=oQ;var o1="MenuRadioItem",o2=d.forwardRef((e,t)=>{let{value:r,...i}=e,n=oZ(o1,e.__scopeMenu),a=r===n.value;return(0,l.jsx)(o3,{scope:e.__scopeMenu,checked:a,children:(0,l.jsx)(oz,{role:"menuitemradio","aria-checked":a,...i,ref:t,"data-state":lo(a),onSelect:nT(i.onSelect,()=>n.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});o2.displayName=o1;var o4="MenuItemIndicator",[o3,o5]=ow(o4,{checked:!1}),o8=d.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:i,...n}=e,a=o5(o4,r);return(0,l.jsx)(sf,{present:i||ls(a.checked)||!0===a.checked,children:(0,l.jsx)(nS.span,{...n,ref:t,"data-state":lo(a.checked)})})});o8.displayName=o4;var o6=d.forwardRef((e,t)=>{let{__scopeMenu:r,...i}=e;return(0,l.jsx)(nS.div,{role:"separator","aria-orientation":"horizontal",...i,ref:t})});o6.displayName="MenuSeparator";var o9=d.forwardRef((e,t)=>{let{__scopeMenu:r,...i}=e,n=oS(r);return(0,l.jsx)(sl,{...n,...i,ref:t})});o9.displayName="MenuArrow";var[o7,le]=ow("MenuSub"),lt="MenuSubTrigger",lr=d.forwardRef((e,t)=>{let r=oL(lt,e.__scopeMenu),i=oD(lt,e.__scopeMenu),n=le(lt,e.__scopeMenu),a=oB(lt,e.__scopeMenu),s=d.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:u}=a,h={__scopeMenu:e.__scopeMenu},f=d.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return d.useEffect(()=>f,[f]),d.useEffect(()=>{let e=o.current;return()=>{window.clearTimeout(e),u(null)}},[o,u]),(0,l.jsx)(oC,{asChild:!0,...h,children:(0,l.jsx)(oY,{id:n.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":n.contentId,"data-state":la(r.open),...e,ref:c(t,n.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:nT(e.onPointerMove,ll(t=>{a.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||s.current||(a.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:nT(e.onPointerLeave,ll(e=>{f();let t=r.content?.getBoundingClientRect();if(t){let i=r.content?.dataset.side,n="right"===i,s=t[n?"left":"right"],l=t[n?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+(n?-5:5),y:e.clientY},{x:s,y:t.top},{x:l,y:t.top},{x:l,y:t.bottom},{x:s,y:t.bottom}],side:i}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:nT(e.onKeyDown,t=>{let n=""!==a.searchRef.current;!e.disabled&&(!n||" "!==t.key)&&ov[i.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});lr.displayName=lt;var li="MenuSubContent",ln=d.forwardRef((e,t)=>{let r=oN(oF,e.__scopeMenu),{forceMount:i=r.forceMount,...n}=e,a=oL(oF,e.__scopeMenu),s=oD(oF,e.__scopeMenu),o=le(li,e.__scopeMenu),u=d.useRef(null),c=h(t,u);return(0,l.jsx)(oE.Provider,{scope:e.__scopeMenu,children:(0,l.jsx)(sf,{present:i||a.open,children:(0,l.jsx)(oE.Slot,{scope:e.__scopeMenu,children:(0,l.jsx)(oq,{id:o.contentId,"aria-labelledby":o.triggerId,...n,ref:c,align:"start",side:"rtl"===s.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{s.isUsingKeyboardRef.current&&u.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:nT(e.onFocusOutside,e=>{e.target!==o.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:nT(e.onEscapeKeyDown,e=>{s.onClose(),e.preventDefault()}),onKeyDown:nT(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=oy[s.dir].includes(e.key);t&&r&&(a.onOpenChange(!1),o.trigger?.focus(),e.preventDefault())})})})})})});function la(e){return e?"open":"closed"}function ls(e){return"indeterminate"===e}function lo(e){return ls(e)?"indeterminate":e?"checked":"unchecked"}function ll(e){return t=>"mouse"===t.pointerType?e(t):void 0}ln.displayName=li;var ld="DropdownMenu",[lu,lc]=n_(ld,[ox]),lh=ox(),[lf,lp]=lu(ld),lm=e=>{let{__scopeDropdownMenu:t,children:r,dir:i,open:n,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,u=lh(t),c=d.useRef(null),[h=!1,f]=nx({prop:n,defaultProp:a,onChange:s});return(0,l.jsx)(lf,{scope:t,triggerId:nX(),triggerRef:c,contentId:nX(),open:h,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(e=>!e),[f]),modal:o,children:(0,l.jsx)(oI,{...u,open:h,onOpenChange:f,dir:i,modal:o,children:r})})};lm.displayName=ld;var lg="DropdownMenuTrigger",lv=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:i=!1,...n}=e,a=lp(lg,r),s=lh(r);return(0,l.jsx)(oC,{asChild:!0,...s,children:(0,l.jsx)(nS.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...n,ref:c(t,a.triggerRef),onPointerDown:nT(e.onPointerDown,e=>{i||0!==e.button||!1!==e.ctrlKey||(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:nT(e.onKeyDown,e=>{!i&&(["Enter"," "].includes(e.key)&&a.onOpenToggle(),"ArrowDown"===e.key&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});lv.displayName=lg;var ly=e=>{let{__scopeDropdownMenu:t,...r}=e,i=lh(t);return(0,l.jsx)(oM,{...i,...r})};ly.displayName="DropdownMenuPortal";var lb="DropdownMenuContent",lE=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lp(lb,r),a=lh(r),s=d.useRef(!1);return(0,l.jsx)(oj,{id:n.contentId,"aria-labelledby":n.triggerId,...a,...i,ref:t,onCloseAutoFocus:nT(e.onCloseAutoFocus,e=>{s.current||n.triggerRef.current?.focus(),s.current=!1,e.preventDefault()}),onInteractOutside:nT(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,i=2===t.button||r;(!n.modal||i)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lE.displayName=lb,d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(oH,{...n,...i,ref:t})}).displayName="DropdownMenuGroup";var lT=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(oK,{...n,...i,ref:t})});lT.displayName="DropdownMenuLabel";var l_=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(oz,{...n,...i,ref:t})});l_.displayName="DropdownMenuItem";var lw=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(oX,{...n,...i,ref:t})});lw.displayName="DropdownMenuCheckboxItem",d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(o0,{...n,...i,ref:t})}).displayName="DropdownMenuRadioGroup";var lx=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(o2,{...n,...i,ref:t})});lx.displayName="DropdownMenuRadioItem";var lS=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(o8,{...n,...i,ref:t})});lS.displayName="DropdownMenuItemIndicator";var lA=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(o6,{...n,...i,ref:t})});lA.displayName="DropdownMenuSeparator",d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(o9,{...n,...i,ref:t})}).displayName="DropdownMenuArrow";var lR=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(lr,{...n,...i,ref:t})});lR.displayName="DropdownMenuSubTrigger";var lL=d.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,n=lh(r);return(0,l.jsx)(ln,{...n,...i,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lL.displayName="DropdownMenuSubContent",d.forwardRef(({className:e,inset:t,children:r,...i},n)=>(0,l.jsxs)(lR,{ref:n,className:ef("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...i,children:[r,l.jsx(iQ,{className:"ml-auto h-4 w-4"})]})).displayName=lR.displayName,d.forwardRef(({className:e,...t},r)=>l.jsx(lL,{ref:r,className:ef("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=lL.displayName;let lk=d.forwardRef(({className:e,sideOffset:t=4,...r},i)=>l.jsx(ly,{children:l.jsx(lE,{ref:i,sideOffset:t,className:ef("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));lk.displayName=lE.displayName;let lD=d.forwardRef(({className:e,inset:t,...r},i)=>l.jsx(l_,{ref:i,className:ef("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));lD.displayName=l_.displayName,d.forwardRef(({className:e,children:t,checked:r,...i},n)=>(0,l.jsxs)(lw,{ref:n,className:ef("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...i,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(lS,{children:l.jsx(iY,{className:"h-4 w-4"})})}),t]})).displayName=lw.displayName,d.forwardRef(({className:e,children:t,...r},i)=>(0,l.jsxs)(lx,{ref:i,className:ef("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(lS,{children:l.jsx(i1,{className:"h-4 w-4 fill-current"})})}),t]})).displayName=lx.displayName,d.forwardRef(({className:e,inset:t,...r},i)=>l.jsx(lT,{ref:i,className:ef("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r})).displayName=lT.displayName,d.forwardRef(({className:e,...t},r)=>l.jsx(lA,{ref:r,className:ef("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=lA.displayName;let lI=eE("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),lC=eE("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),lP=({t:e,setLang:t})=>(0,l.jsxs)("header",{className:"px-4 lg:px-6 h-16 flex items-center bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 fixed w-full z-50 border-b border-[#0d6c70]/10",children:[l.jsx(eq(),{className:"flex items-center justify-center",href:"https://eleva.care",children:l.jsx(e$(),{src:"/img/eleva-care-logo.svg",alt:"Eleva Care",width:1863,height:316,className:"w-auto h-8",loading:"eager"})}),(0,l.jsxs)("nav",{className:"ml-auto flex gap-4 sm:gap-6 items-center",children:[l.jsx(eq(),{className:"text-sm font-medium text-[#576d69] hover:text-[#0d6c70] transition-colors",href:"#services",children:e.nav.services}),l.jsx(eq(),{className:"text-sm font-medium text-[#576d69] hover:text-[#0d6c70] transition-colors",href:"#approach",children:e.nav.approach}),l.jsx(eq(),{className:"text-sm font-medium text-[#576d69] hover:text-[#0d6c70] transition-colors",href:"#mission",children:e.nav.mission}),l.jsx(eq(),{className:"text-sm font-medium text-[#576d69] hover:text-[#0d6c70] transition-colors",href:"#team",children:e.nav.team}),(0,l.jsxs)(lm,{children:[l.jsx(lv,{asChild:!0,children:(0,l.jsxs)(em,{variant:"ghost",size:"sm",className:"text-[#576d69] hover:text-[#0d6c70]",children:[l.jsx(lI,{className:"h-5 w-5 mr-2"}),e.language,l.jsx(lC,{className:"h-4 w-4 ml-2"})]})}),(0,l.jsxs)(lk,{align:"end",children:[l.jsx(lD,{onClick:()=>t("en"),children:"English"}),l.jsx(lD,{onClick:()=>t("pt"),children:"Portugu\xeas"}),l.jsx(lD,{onClick:()=>t("es"),children:"Espa\xf1ol"})]})]})]})]});var lO="Dialog",[lN,lM]=n_(lO),[lF,lU]=lN(lO),lB=e=>{let{__scopeDialog:t,children:r,open:i,defaultOpen:n,onOpenChange:a,modal:s=!0}=e,o=d.useRef(null),u=d.useRef(null),[c=!1,h]=nx({prop:i,defaultProp:n,onChange:a});return(0,l.jsx)(lF,{scope:t,triggerRef:o,contentRef:u,contentId:nX(),titleId:nX(),descriptionId:nX(),open:c,onOpenChange:h,onOpenToggle:d.useCallback(()=>h(e=>!e),[h]),modal:s,children:r})};lB.displayName=lO;var lj="DialogTrigger",l$=d.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,n=lU(lj,r),a=h(t,n.triggerRef);return(0,l.jsx)(nS.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":l8(n.open),...i,ref:a,onClick:nT(e.onClick,n.onOpenToggle)})});l$.displayName=lj;var lG="DialogPortal",[lq,lH]=lN(lG,{forceMount:void 0}),lK=e=>{let{__scopeDialog:t,forceMount:r,children:i,container:n}=e,a=lU(lG,t);return(0,l.jsx)(lq,{scope:t,forceMount:r,children:d.Children.map(i,e=>(0,l.jsx)(sf,{present:r||a.open,children:(0,l.jsx)(sh,{asChild:!0,container:n,children:e})}))})};lK.displayName=lG;var lV="DialogOverlay",lW=d.forwardRef((e,t)=>{let r=lH(lV,e.__scopeDialog),{forceMount:i=r.forceMount,...n}=e,a=lU(lV,e.__scopeDialog);return a.modal?(0,l.jsx)(sf,{present:i||a.open,children:(0,l.jsx)(lz,{...n,ref:t})}):null});lW.displayName=lV;var lz=d.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,n=lU(lV,r);return(0,l.jsx)(of,{as:f,allowPinchZoom:!0,shards:[n.contentRef],children:(0,l.jsx)(nS.div,{"data-state":l8(n.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),lY="DialogContent",lX=d.forwardRef((e,t)=>{let r=lH(lY,e.__scopeDialog),{forceMount:i=r.forceMount,...n}=e,a=lU(lY,e.__scopeDialog);return(0,l.jsx)(sf,{present:i||a.open,children:a.modal?(0,l.jsx)(lQ,{...n,ref:t}):(0,l.jsx)(lJ,{...n,ref:t})})});lX.displayName=lY;var lQ=d.forwardRef((e,t)=>{let r=lU(lY,e.__scopeDialog),i=d.useRef(null),n=h(t,r.contentRef,i);return d.useEffect(()=>{let e=i.current;if(e)return sF(e)},[]),(0,l.jsx)(lZ,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nT(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:nT(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:nT(e.onFocusOutside,e=>e.preventDefault())})}),lJ=d.forwardRef((e,t)=>{let r=lU(lY,e.__scopeDialog),i=d.useRef(!1),n=d.useRef(!1);return(0,l.jsx)(lZ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(i.current||r.triggerRef.current?.focus(),t.preventDefault()),i.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(i.current=!0,"pointerdown"!==t.detail.originalEvent.type||(n.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),lZ=d.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:n,onCloseAutoFocus:a,...s}=e,o=lU(lY,r),u=d.useRef(null),c=h(t,u);return nM(),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n$,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:n,onUnmountAutoFocus:a,children:(0,l.jsx)(nC,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":l8(o.open),...s,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(de,{titleId:o.titleId}),(0,l.jsx)(dt,{contentRef:u,descriptionId:o.descriptionId})]})]})}),l0="DialogTitle",l1=d.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,n=lU(l0,r);return(0,l.jsx)(nS.h2,{id:n.titleId,...i,ref:t})});l1.displayName=l0;var l2="DialogDescription",l4=d.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,n=lU(l2,r);return(0,l.jsx)(nS.p,{id:n.descriptionId,...i,ref:t})});l4.displayName=l2;var l3="DialogClose",l5=d.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,n=lU(l3,r);return(0,l.jsx)(nS.button,{type:"button",...i,ref:t,onClick:nT(e.onClick,()=>n.onOpenChange(!1))})});function l8(e){return e?"open":"closed"}l5.displayName=l3;var l6="DialogTitleWarning",[l9,l7]=function(e,t){let r=d.createContext(t);function i(e){let{children:t,...i}=e,n=d.useMemo(()=>i,Object.values(i));return(0,l.jsx)(r.Provider,{value:n,children:t})}return i.displayName=e+"Provider",[i,function(i){let n=d.useContext(r);if(n)return n;if(void 0!==t)return t;throw Error(`\`${i}\` must be used within \`${e}\``)}]}(l6,{contentName:lY,titleName:l0,docsSlug:"dialog"}),de=({titleId:e})=>{let t=l7(l6),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&!document.getElementById(e)&&console.error(r)},[r,e]),null},dt=({contentRef:e,descriptionId:t})=>{let r=l7("DialogDescriptionWarning"),i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return d.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&!document.getElementById(t)&&console.warn(i)},[i,e,t]),null};let dr=d.forwardRef(({className:e,...t},r)=>l.jsx(lW,{ref:r,className:ef("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));dr.displayName=lW.displayName;let di=d.forwardRef(({className:e,children:t,...r},i)=>(0,l.jsxs)(lK,{children:[l.jsx(dr,{}),(0,l.jsxs)(lX,{ref:i,className:ef("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,l.jsxs)(l5,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(iZ,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));di.displayName=lX.displayName,d.forwardRef(({className:e,...t},r)=>l.jsx(l1,{ref:r,className:ef("text-lg font-semibold leading-none tracking-tight",e),...t})).displayName=l1.displayName,d.forwardRef(({className:e,...t},r)=>l.jsx(l4,{ref:r,className:ef("text-sm text-muted-foreground",e),...t})).displayName=l4.displayName;var dn=r(8842),da=Object.create,ds=Object.defineProperty,dl=Object.getOwnPropertyDescriptor,dd=Object.getOwnPropertyNames,du=Object.getPrototypeOf,dc=Object.prototype.hasOwnProperty,dh=function(e,t){return function(){return e&&(t=e(e=0)),t}},df=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},dp=function(e,t,r,i){if(t&&"object"==typeof t||"function"==typeof t)for(var n,a=dd(t),s=0,o=a.length;s<o;s++)n=a[s],dc.call(e,n)||n===r||ds(e,n,{get:(function(e){return t[e]}).bind(null,n),enumerable:!(i=dl(t,n))||i.enumerable});return e},dm=function(e,t,r){return r=null!=e?da(du(e)):{},dp(!t&&e&&e.__esModule?r:ds(r,"default",{value:e,enumerable:!0}),e)},dg=df(function(e,t){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self?r=self:r={},t.exports=r});function dv(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):dv(e,t)}var dy=dh(function(){dy()});function db(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var dE=dh(function(){}),dT=df(function(e,t){var r=Array.prototype.slice;t.exports=function(e,t){for(("length"in e)||(e=[e]),e=r.call(e);e.length;){var i=e.shift(),n=t(i);if(n)return n;i.childNodes&&i.childNodes.length&&(e=r.call(i.childNodes).concat(e))}}}),d_=df(function(e,t){function r(e,t){if(!dv(this,r))return new r(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}dy(),t.exports=r,r.prototype.nodeType=8,r.prototype.nodeName="#comment",r.prototype.toString=function(){return"[object Comment]"}}),dw=df(function(e,t){function r(e,t){if(!dv(this,r))return new r(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}dy(),t.exports=r,r.prototype.type="DOMTextNode",r.prototype.nodeType=3,r.prototype.nodeName="#text",r.prototype.toString=function(){return this.data},r.prototype.replaceData=function(e,t,r){var i=this.data,n=i.substring(0,e),a=i.substring(e+t,i.length);this.data=n+r+a,this.length=this.data.length}}),dx=df(function(e,t){t.exports=function(e){var t=this,r=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var i=t.listeners[r];if(i)return i.forEach(function(r){e.currentTarget=t,"function"==typeof r?r(e):r.handleEvent(e)});t.parentNode&&t.parentNode.dispatchEvent(e)}}),dS=df(function(e,t){t.exports=function(e,t){this.listeners||(this.listeners={}),this.listeners[e]||(this.listeners[e]=[]),-1===this.listeners[e].indexOf(t)&&this.listeners[e].push(t)}}),dA=df(function(e,t){t.exports=function(e,t){if(this.listeners&&this.listeners[e]){var r=this.listeners[e],i=r.indexOf(t);-1!==i&&r.splice(i,1)}}}),dR=df(function(e,t){dE(),t.exports=function e(t){switch(t.nodeType){case 3:return n(t.data);case 8:return"<!--"+t.data+"-->";default:var a,s;return a=[],s=t.tagName,"http://www.w3.org/1999/xhtml"===t.namespaceURI&&(s=s.toLowerCase()),a.push("<"+s+function(e){var t=[];for(var r in e)(function(e,t){var r=db(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===r||"boolean"===r||"number"===r)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t})(e,r)&&t.push({name:r,value:e[r]});for(var n in e._attributes)for(var a in e._attributes[n]){var s=e._attributes[n][a],o=(s.prefix?s.prefix+":":"")+a;t.push({name:o,value:s.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?i(t):""}(t)+function(e){var t=e.dataset,r=[];for(var n in t)r.push({name:"data-"+n,value:t[n]});return r.length?i(r):""}(t)),r.indexOf(s)>-1?a.push(" />"):(a.push(">"),t.childNodes.length?a.push.apply(a,t.childNodes.map(e)):t.textContent||t.innerText?a.push(n(t.textContent||t.innerText)):t.innerHTML&&a.push(t.innerHTML),a.push("</"+s+">")),a.join("")}};var r=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function i(e){var t=[];return e.forEach(function(e){var r=e.name,i=e.value;"style"===r&&(i=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach(function(r){var i=e[r];r=r.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),t+=r+":"+i+";"}),t}(i)),t.push(r+'="'+n(i).replace(/"/g,"&quot;")+'"')}),t.length?" "+t.join(" "):""}function n(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}),dL=df(function(e,t){dy();var r=dT(),i=dx(),n=dS(),a=dA(),s=dR(),o="http://www.w3.org/1999/xhtml";function l(e,t,r){if(!dv(this,l))return new l(e);var i=void 0===r?o:r||null;this.tagName=i===o?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=i,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=l,l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},l.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var r=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[r]=e,e.parentNode=this,t},l.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},l.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var r=null==t?-1:this.childNodes.indexOf(t);return r>-1?this.childNodes.splice(r,0,e):this.childNodes.push(e),e.parentNode=this,e},l.prototype.setAttributeNS=function(e,t,r){var i=null,n=t,a=t.indexOf(":");(a>-1&&(i=t.substr(0,a),n=t.substr(a+1)),"INPUT"===this.tagName&&"type"===t)?this.type=r:(this._attributes[e]||(this._attributes[e]={}))[n]={value:r,prefix:i}},l.prototype.getAttributeNS=function(e,t){var r=this._attributes[e],i=r&&r[t]&&r[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof i?null:i},l.prototype.removeAttributeNS=function(e,t){var r=this._attributes[e];r&&delete r[t]},l.prototype.hasAttributeNS=function(e,t){var r=this._attributes[e];return!!r&&t in r},l.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},l.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},l.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},l.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},l.prototype.removeEventListener=a,l.prototype.addEventListener=n,l.prototype.dispatchEvent=i,l.prototype.focus=function(){},l.prototype.toString=function(){return s(this)},l.prototype.getElementsByClassName=function(e){var t=e.split(" "),i=[];return r(this,function(e){if(1===e.nodeType){var r=(e.className||"").split(" ");t.every(function(e){return -1!==r.indexOf(e)})&&i.push(e)}}),i},l.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return r(this.childNodes,function(r){1===r.nodeType&&("*"===e||r.tagName.toLowerCase()===e)&&t.push(r)}),t},l.prototype.contains=function(e){return r(this,function(t){return e===t})||!1}}),dk=df(function(e,t){dy();var r=dL();function i(e){if(!dv(this,i))return new i;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=i,i.prototype.type="DocumentFragment",i.prototype.nodeType=11,i.prototype.nodeName="#document-fragment",i.prototype.appendChild=r.prototype.appendChild,i.prototype.replaceChild=r.prototype.replaceChild,i.prototype.removeChild=r.prototype.removeChild,i.prototype.toString=function(){return this.childNodes.map(function(e){return String(e)}).join("")}}),dD=df(function(e,t){function r(e){}t.exports=r,r.prototype.initEvent=function(e,t,r){this.type=e,this.bubbles=t,this.cancelable=r},r.prototype.preventDefault=function(){}}),dI=df(function(e,t){dy();var r=dT(),i=d_(),n=dw(),a=dL(),s=dk(),o=dD(),l=dx(),d=dS(),u=dA();function c(){if(!dv(this,c))return new c;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=c;var h=c.prototype;h.createTextNode=function(e){return new n(e,this)},h.createElementNS=function(e,t){return new a(t,this,null===e?null:String(e))},h.createElement=function(e){return new a(e,this)},h.createDocumentFragment=function(){return new s(this)},h.createEvent=function(e){return new o(e)},h.createComment=function(e){return new i(e,this)},h.getElementById=function(e){return e=String(e),r(this.childNodes,function(t){if(String(t.id)===e)return t})||null},h.getElementsByClassName=a.prototype.getElementsByClassName,h.getElementsByTagName=a.prototype.getElementsByTagName,h.contains=a.prototype.contains,h.removeEventListener=u,h.addEventListener=d,h.dispatchEvent=l}),dC=df(function(e,t){var r=dI();t.exports=new r}),dP=df(function(e,t){var r,i="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},n=dC();"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=n),t.exports=r});function dO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function dN(e,t){if(e){if("string"==typeof e)return dO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dO(e,t)}}function dM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(i=r.next()).done)&&(a.push(i.value),!(t&&a.length===t));s=!0);}catch(e){o=!0,n=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}return a}}(e,t)||dN(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dF=dm(dg()),dU=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},dB=function(){return("000000"+(2176782336*Math.random()<<0).toString(36)).slice(-6)},dj=function(e){var t;if(e&&void 0!==e.nodeName)return e.muxId||(e.muxId=dB()),e.muxId;try{t=document.querySelector(e)}catch(e){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},d$=function(e){e&&void 0!==e.nodeName?e=dj(t=e):t=document.querySelector(e);var t,r=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,r]};function dG(e){return function(e){if(Array.isArray(e))return dO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dN(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dq={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},dH=function(e){var t,r,i,n,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=e?[console,e]:[console],l=(t=console.trace).bind.apply(t,dG(o)),d=(r=console.info).bind.apply(r,dG(o)),u=(i=console.debug).bind.apply(i,dG(o)),c=(n=console.warn).bind.apply(n,dG(o)),h=(a=console.error).bind.apply(a,dG(o)),f=s;return{trace:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!(f>dq.TRACE))return l.apply(void 0,dG(t))},debug:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!(f>dq.DEBUG))return u.apply(void 0,dG(t))},info:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!(f>dq.INFO))return d.apply(void 0,dG(t))},warn:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!(f>dq.WARN))return c.apply(void 0,dG(t))},error:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!(f>dq.ERROR))return h.apply(void 0,dG(t))},get level(){return f},set level(_){_!==this.level&&(f=null!=_?_:s)}}}("[mux]"),dK=dm(dg());function dV(){return"1"===(dK.default.doNotTrack||dK.default.navigator&&dK.default.navigator.doNotTrack)}var dW=dm(dg()),dz={now:function(){var e=dW.default.performance,t=e&&e.timing,r=t&&t.navigationStart;return Math.round("number"==typeof r&&"function"==typeof e.now?r+e.now():Date.now())}};function dY(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dX(e,t){if(!dv(e,t))throw TypeError("Cannot call a class as a function")}function dQ(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dJ(e,t,r){return t&&dQ(e.prototype,t),r&&dQ(e,r),e}function dZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d0(e,t){return(d0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d1(e){return(d1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}dy(),dE();var d2=function(e){return d4(e)[0]},d4=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,r=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return r&&(t=(r.match(/[^\.]+\.[^\.]+$/)||[])[0]),[r,t]},d3=dm(dg()),d5={exists:function(){var e=d3.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=d3.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=d3.default.performance,t=e&&e.timing;return t&&t.navigationStart}};function d8(e,t,r){r=void 0===r?1:r,e[t]=e[t]||0,e[t]+=r}function d6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){dZ(e,t,r[t])})}return e}function d9(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var d7=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],ue=["x-cdn","content-type"].concat(d7);function ut(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach(function(e){if(e){var r=e.split(": "),i=r.shift();i&&(ue.indexOf(i.toLowerCase())>=0||0===i.toLowerCase().indexOf("x-litix-"))&&(t[i]=r.join(": "))}}),t}function ur(e){if(e){var t=d7.find(function(t){return void 0!==e[t]});return t?e[t]:void 0}}var ui=function(e){var t={};for(var r in e){var i=e[r];-1!==i["DATA-ID"].search("io.litix.data.")&&(t[i["DATA-ID"].replace("io.litix.data.","")]=i.VALUE)}return t},un=function(e){if(!e)return{};var t=d5.navigationStart(),r=e.loading,i=r?r.start:e.trequest,n=r?r.first:e.tfirst,a=r?r.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+i),responseStart:Math.round(t+n),responseEnd:Math.round(t+a)}},ua=function(e){if(!(!e||"function"!=typeof e.getAllResponseHeaders))return ut(e.getAllResponseHeaders())},us=function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=arguments.length>4?arguments[4]:void 0,n=e.log,a=e.utils.secondsToMs,s=function(e){var t,r=parseInt(i.version);return 1===r&&null!==e.programDateTime&&(t=e.programDateTime),0===r&&null!==e.pdt&&(t=e.pdt),t};if(!d5.exists()){n.warn("performance timing not supported. Not tracking HLS.js.");return}var o=function(r,i){return e.emit(t,r,i)},l=function(e,t){var r=t.levels,i=t.audioTracks,n=t.url,a=t.stats,s=t.networkDetails,l=t.sessionData,d={},u={};r.forEach(function(e,t){d[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),i.forEach(function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var c=un(a),h=c.bytesLoaded,f=c.requestStart,p=c.responseStart,m=c.responseEnd;o("requestcompleted",d9(d6({},ui(l)),{request_event_type:e,request_bytes_loaded:h,request_start:f,request_response_start:p,request_response_end:m,request_type:"manifest",request_hostname:d2(n),request_response_headers:ua(s),request_rendition_lists:{media:d,audio:u,video:{}}}))};r.on(i.Events.MANIFEST_LOADED,l);var d=function(e,t){var r=t.details,i=t.level,n=t.networkDetails,l=un(t.stats),d=l.bytesLoaded,u=l.requestStart,c=l.responseStart,h=l.responseEnd,f=r.fragments[r.fragments.length-1],p=s(f)+a(f.duration);o("requestcompleted",{request_event_type:e,request_bytes_loaded:d,request_start:u,request_response_start:c,request_response_end:h,request_current_level:i,request_type:"manifest",request_hostname:d2(r.url),request_response_headers:ua(n),video_holdback:r.holdBack&&a(r.holdBack),video_part_holdback:r.partHoldBack&&a(r.partHoldBack),video_part_target_duration:r.partTarget&&a(r.partTarget),video_target_duration:r.targetduration&&a(r.targetduration),video_source_is_live:r.live,player_manifest_newest_program_time:isNaN(p)?void 0:p})};r.on(i.Events.LEVEL_LOADED,d);var u=function(e,t){var r=t.details,i=t.networkDetails,n=un(t.stats);o("requestcompleted",{request_event_type:e,request_bytes_loaded:n.bytesLoaded,request_start:n.requestStart,request_response_start:n.responseStart,request_response_end:n.responseEnd,request_type:"manifest",request_hostname:d2(r.url),request_response_headers:ua(i)})};r.on(i.Events.AUDIO_TRACK_LOADED,u);var c=function(e,t){var i=t.stats,n=t.networkDetails,a=t.frag,s=un(i=i||a.stats),l=s.bytesLoaded,d=s.requestStart,u=s.responseStart,c=s.responseEnd,h=n?ua(n):void 0,f={request_event_type:e,request_bytes_loaded:l,request_start:d,request_response_start:u,request_response_end:c,request_hostname:n?d2(n.responseURL):void 0,request_id:h?ur(h):void 0,request_response_headers:h,request_media_duration:a.duration,request_url:null==n?void 0:n.responseURL};"main"===a.type?(f.request_type="media",f.request_current_level=a.level,f.request_video_width=(r.levels[a.level]||{}).width,f.request_video_height=(r.levels[a.level]||{}).height,f.request_labeled_bitrate=(r.levels[a.level]||{}).bitrate):f.request_type=a.type,o("requestcompleted",f)};r.on(i.Events.FRAG_LOADED,c);var h=function(e,t){var r=t.frag,i=r.start;o("fragmentchange",{currentFragmentPDT:s(r),currentFragmentStart:a(i)})};r.on(i.Events.FRAG_CHANGED,h);var f=function(e,t){var r,n=t.type,a=t.details,s=t.response,l=t.fatal,d=t.frag,u=t.networkDetails,c=(null==d?void 0:d.url)||t.url||"",h=u?ua(u):void 0;(a===i.ErrorDetails.MANIFEST_LOAD_ERROR||a===i.ErrorDetails.MANIFEST_LOAD_TIMEOUT||a===i.ErrorDetails.FRAG_LOAD_ERROR||a===i.ErrorDetails.FRAG_LOAD_TIMEOUT||a===i.ErrorDetails.LEVEL_LOAD_ERROR||a===i.ErrorDetails.LEVEL_LOAD_TIMEOUT||a===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||a===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||a===i.ErrorDetails.SUBTITLE_LOAD_ERROR||a===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||a===i.ErrorDetails.KEY_LOAD_ERROR||a===i.ErrorDetails.KEY_LOAD_TIMEOUT)&&o("requestfailed",{request_error:a,request_url:c,request_hostname:d2(c),request_id:h?ur(h):void 0,request_type:a===i.ErrorDetails.FRAG_LOAD_ERROR||a===i.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":a===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||a===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":a===i.ErrorDetails.SUBTITLE_LOAD_ERROR||a===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":a===i.ErrorDetails.KEY_LOAD_ERROR||a===i.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==s?void 0:s.code,request_error_text:null==s?void 0:s.text}),l&&o("error",{player_error_code:n,player_error_message:a,player_error_context:"".concat(c?"url: ".concat(c,"\n"):"")+"".concat(s&&(s.code||s.text)?"response: ".concat(s.code,", ").concat(s.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(r=t.err)||void 0===r?void 0:r.message,"\n"):"")})};r.on(i.Events.ERROR,f);var p=function(e,t){var r=t.frag,i=r&&r._url||"";o("requestcanceled",{request_event_type:e,request_url:i,request_type:"media",request_hostname:d2(i)})};r.on(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p);var m=function(e,t){var i=t.level,a=r.levels[i];if(a&&a.attrs&&a.attrs.BANDWIDTH){var s,l=a.attrs.BANDWIDTH,d=parseFloat(a.attrs["FRAME-RATE"]);isNaN(d)||(s=d),l?o("renditionchange",{video_source_fps:s,video_source_bitrate:l,video_source_width:a.width,video_source_height:a.height,video_source_rendition_name:a.name,video_source_codec:null==a?void 0:a.videoCodec}):n.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(i.Events.LEVEL_SWITCHED,m),r._stopMuxMonitor=function(){r.off(i.Events.MANIFEST_LOADED,l),r.off(i.Events.LEVEL_LOADED,d),r.off(i.Events.AUDIO_TRACK_LOADED,u),r.off(i.Events.FRAG_LOADED,c),r.off(i.Events.FRAG_CHANGED,h),r.off(i.Events.ERROR,f),r.off(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p),r.off(i.Events.LEVEL_SWITCHED,m),r.off(i.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(i.Events.DESTROYING,r._stopMuxMonitor)},uo=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()},ul=function(e,t){if(!e||!e.requestEndDate)return{};var r,i=d2(e.url),n=e.url,a=e.bytesLoaded,s=new Date(e.requestStartDate).getTime(),o=new Date(e.firstByteDate).getTime(),l=new Date(e.requestEndDate).getTime(),d=isNaN(e.duration)?0:e.duration,u="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);u.length>0&&(r=ut(u[u.length-1]._responseHeaders||""));var c=r?ur(r):void 0;return{requestStart:s,requestResponseStart:o,requestResponseEnd:l,requestBytesLoaded:a,requestResponseHeaders:r,requestMediaDuration:d,requestHostname:i,requestUrl:n,requestId:c}},ud=function(e,t){var r=t.getQualityFor(e),i=t.getCurrentTrackFor(e).bitrateList;return i?{currentLevel:r,renditionWidth:i[r].width||null,renditionHeight:i[r].height||null,renditionBitrate:i[r].bandwidth}:{}},uu=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]},uc=function(e){try{var t,r;return null===(r=e.getVersion)||void 0===r||null===(t=r.call(e))||void 0===t?void 0:t.split(".").map(function(e){return parseInt(e)})[0]}catch(e){return!1}},uh=function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=e.log;if(!r||!r.on){i.warn("Invalid dash.js player reference. Monitoring blocked.");return}var n=uc(r),a=function(r,i){return e.emit(t,r,i)},s=function(e){var t=e.type,r=(e.data||{}).url;a("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:d2(r),request_url:r})};r.on("manifestLoaded",s);var o={},l=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},d=function(e){var t=e.type,i=e.chunk,n=e.request,s=(i||{}).mediaInfo||{},l=s.type,d=s.bitrateList,u={};(d=d||[]).forEach(function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}}),"video"===l?o.video=u:"audio"===l?o.audio=u:o.media=u;var c=ul(n,r),h=c.requestStart,f=c.requestResponseStart,p=c.requestResponseEnd,m=c.requestResponseHeaders,g=c.requestMediaDuration,v=c.requestHostname,y=c.requestUrl;a("requestcompleted",{request_event_type:t,request_start:h,request_response_start:f,request_response_end:p,request_bytes_loaded:-1,request_type:l+"_init",request_response_headers:m,request_hostname:v,request_id:c.requestId,request_url:y,request_media_duration:g,request_rendition_lists:o})};n>=4?r.on("initFragmentLoaded",d):r.on("initFragmentLoaded",function(e){var t=e.type,r=e.fragmentModel,i=e.chunk;d({type:t,request:l(r),chunk:i})});var u=function(e){var t=e.type,i=e.chunk,n=e.request,s=i||{},o=s.mediaInfo,l=s.start,d=(o||{}).type,u=ul(n,r),c=u.requestStart,h=u.requestResponseStart,f=u.requestResponseEnd,p=u.requestBytesLoaded,m=u.requestResponseHeaders,g=u.requestMediaDuration,v=u.requestHostname,y=u.requestUrl,b=u.requestId,E=ud(d,r),T=E.currentLevel,w=E.renditionWidth,x=E.renditionHeight;a("requestcompleted",{request_event_type:t,request_start:c,request_response_start:h,request_response_end:f,request_bytes_loaded:p,request_type:d,request_response_headers:m,request_hostname:v,request_id:b,request_url:y,request_media_start_time:l,request_media_duration:g,request_current_level:T,request_labeled_bitrate:E.renditionBitrate,request_video_width:w,request_video_height:x})};n>=4?r.on("mediaFragmentLoaded",u):r.on("mediaFragmentLoaded",function(e){var t=e.type,r=e.fragmentModel,i=e.chunk;u({type:t,request:l(r),chunk:i})});var c={video:void 0,audio:void 0,totalBitrate:void 0},h=function(){if(c.video&&"number"==typeof c.video.bitrate){if(!(c.video.width&&c.video.height)){i.warn("have bitrate info for video but missing width/height");return}var e=c.video.bitrate;if(c.audio&&"number"==typeof c.audio.bitrate&&(e+=c.audio.bitrate),e!==c.totalBitrate)return c.totalBitrate=e,{video_source_bitrate:e,video_source_height:c.video.height,video_source_width:c.video.width,video_source_codec:uu(c.video.codec)}}},f=function(e,t,n){if("number"!=typeof e.newQuality){i.warn("missing evt.newQuality in qualityChangeRendered event",e);return}var s=e.mediaType;if("audio"===s||"video"===s){var o=r.getBitrateInfoListFor(s).find(function(t){return t.qualityIndex===e.newQuality});if(!(o&&"number"==typeof o.bitrate)){i.warn("missing bitrate info for ".concat(s));return}c[s]=d9(d6({},o),{codec:r.getCurrentTrackFor(s).codec});var l=h();l&&a("renditionchange",l)}};r.on("qualityChangeRendered",f);var p=function(e){var t=e.request,r=e.mediaType;a("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:r,request_hostname:d2(t.url)})};r.on("fragmentLoadingAbandoned",p);var m=function(e){var t,r,i=e.error,n=(null==i||null===(t=i.data)||void 0===t?void 0:t.request)||{},s=(null==i||null===(r=i.data)||void 0===r?void 0:r.response)||{};(null==i?void 0:i.code)===27&&a("requestfailed",{request_error:n.type+"_"+n.action,request_url:n.url,request_hostname:d2(n.url),request_type:n.mediaType,request_error_code:s.status,request_error_text:s.statusText});var o="".concat(null!=n&&n.url?"url: ".concat(n.url,"\n"):"")+"".concat(null!=s&&s.status||null!=s&&s.statusText?"response: ".concat(null==s?void 0:s.status,", ").concat(null==s?void 0:s.statusText,"\n"):"");a("error",{player_error_code:null==i?void 0:i.code,player_error_message:null==i?void 0:i.message,player_error_context:o})};r.on("error",m),r._stopMuxMonitor=function(){r.off("manifestLoaded",s),r.off("initFragmentLoaded",d),r.off("mediaFragmentLoaded",u),r.off("qualityChangeRendered",f),r.off("error",m),r.off("fragmentLoadingAbandoned",p),delete r._stopMuxMonitor}},uf=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()},up=0,um=function(){function e(){dX(this,e),dZ(this,"_listeners",void 0)}return dJ(e,[{key:"on",value:function(e,t,r){return t._eventEmitterGuid=t._eventEmitterGuid||++up,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],r&&(t=t.bind(r)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var r=this._listeners&&this._listeners[e];r&&r.forEach(function(e,i){e._eventEmitterGuid===t._eventEmitterGuid&&r.splice(i,1)})}},{key:"one",value:function(e,t,r){var i=this;t._eventEmitterGuid=t._eventEmitterGuid||++up;var n=function(){i.off(e,n),t.apply(r||this,arguments)};n._eventEmitterGuid=t._eventEmitterGuid,this.on(e,n)}},{key:"emit",value:function(e,t){var r=this;if(this._listeners){t=t||{};var i=this._listeners["before*"]||[],n=this._listeners[e]||[],a=this._listeners["after"+e]||[],s=function(t,i){(t=t.slice()).forEach(function(t){t.call(r,{type:e},i)})};s(i,t),s(n,t),s(a,t)}}}]),e}(),ug=dm(dg()),uv=function(){function e(t){var r=this;dX(this,e),dZ(this,"_playbackHeartbeatInterval",void 0),dZ(this,"_playheadShouldBeProgressing",void 0),dZ(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",function(){r._playheadShouldBeProgressing=!0}),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",function(){t.data.player_is_paused?r._stopPlaybackHeartbeatInterval():r._startPlaybackHeartbeatInterval()}),t.on("timeupdate",function(){null!==r._playbackHeartbeatInterval&&t.emit("playbackheartbeat")}),t.on("devicesleep",function(e,i){null!==r._playbackHeartbeatInterval&&(ug.default.clearInterval(r._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),r._playbackHeartbeatInterval=null)})}return dJ(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=ug.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(ug.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),uy=function e(t){var r=this;dX(this,e),dZ(this,"viewErrored",void 0),t.on("viewinit",function(){r.viewErrored=!1}),t.on("error",function(e,i){try{var n=t.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});n&&(t.data.player_error_code=n.player_error_code||i.player_error_code,t.data.player_error_message=n.player_error_message||i.player_error_message,t.data.player_error_context=n.player_error_context||i.player_error_context,t.data.player_error_severity=n.player_error_severity||i.player_error_severity,t.data.player_error_business_exception=n.player_error_business_exception||i.player_error_business_exception,r.viewErrored=!0)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),r.viewErrored=!0}}),t.on("aftererror",function(){var e,r,i,n,a;null===(e=t.data)||void 0===e||delete e.player_error_code,null===(r=t.data)||void 0===r||delete r.player_error_message,null===(i=t.data)||void 0===i||delete i.player_error_context,null===(n=t.data)||void 0===n||delete n.player_error_severity,null===(a=t.data)||void 0===a||delete a.player_error_business_exception})},ub=function(){function e(t){dX(this,e),dZ(this,"_watchTimeTrackerLastCheckedTime",void 0),dZ(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return dJ(e,[{key:"_updateWatchTime",value:function(e,t){var r=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=r),d8(this.pm.data,"view_watch_time",r-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=r}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),uE=function(){function e(t){var r=this;dX(this,e),dZ(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),dZ(this,"_lastTime",void 0),dZ(this,"_isAdPlaying",void 0),dZ(this,"_callbackUpdatePlaybackTime",void 0),dZ(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=dz.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var i=this._startPlaybackTimeTracking.bind(this);t.on("playing",i),t.on("adplaying",i),t.on("seeked",i);var n=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",n),t.on("seeking",n),t.on("adplaying",function(){r._isAdPlaying=!0}),t.on("adended",function(){r._isAdPlaying=!1}),t.on("adpause",function(){r._isAdPlaying=!1}),t.on("adbreakstart",function(){r._isAdPlaying=!1}),t.on("adbreakend",function(){r._isAdPlaying=!1}),t.on("adplay",function(){r._isAdPlaying=!1}),t.on("viewinit",function(){r._playbackTimeTrackerLastPlayheadPosition=-1,r._lastTime=dz.now(),r._isAdPlaying=!1,r._callbackUpdatePlaybackTime=null})}return dJ(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=dz.now(),r=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?r=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(r=t-this._lastTime),r>0&&r<=1e3&&d8(this.pm.data,"view_content_playback_time",r),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),uT=function(){function e(t){dX(this,e),dZ(this,"pm",void 0),this.pm=t;var r=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",r),t.on("playbackheartbeatend",r),t.on("timeupdate",r),t.on("destroy",function(){t.off("timeupdate",r)})}return dJ(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var r=this,i=function(){r.pm.currentFragmentPDT&&r.pm.currentFragmentStart&&(r.pm.data.player_program_time=r.pm.currentFragmentPDT+r.pm.data.player_playhead_time-r.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var n=this.pm.getPlayheadTime();void 0!==n&&(this.pm.data.player_playhead_time=n,i(),this._updateMaxPlayheadPosition())}}}]),e}(),u_=function e(t){if(dX(this,e),!t.disableRebufferTracking){var r,i=function(e,t){n(t),r=void 0},n=function(e){if(r){var i=e.viewer_time-r;d8(t.data,"view_rebuffer_duration",i),r=e.viewer_time,t.data.view_rebuffer_duration>3e5&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(3e5,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",function(e,t){return n(t)}),t.on("rebufferstart",function(e,n){r||(d8(t.data,"view_rebuffer_count",1),r=n.viewer_time,t.one("rebufferend",i))}),t.on("viewinit",function(){r=void 0,t.off("rebufferend",i)})}},uw=function(){function e(t){var r=this;dX(this,e),dZ(this,"_lastCheckedTime",void 0),dZ(this,"_lastPlayheadTime",void 0),dZ(this,"_lastPlayheadTimeUpdatedTime",void 0),dZ(this,"_rebuffering",void 0),dZ(this,"pm",void 0),this.pm=t,t.disableRebufferTracking||t.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",function(){r._cleanupRebufferTracker(null,{viewer_time:dz.now()})}))}return dJ(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,t);return}if(null===this._lastCheckedTime){this._prepareRebufferTrackerState(t.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,t,!0);return}var r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&r>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&i>0&&n-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+n-i}))}r?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),ux=function(){function e(t){var r=this;dX(this,e),dZ(this,"NAVIGATION_START",void 0),dZ(this,"pm",void 0),this.pm=t,t.on("viewinit",function(){var e=t.data,i=e.view_id;if(!e.view_program_changed){var n=function(e,n){var a=n.viewer_time;"playing"===e.type&&void 0===t.data.view_time_to_first_frame?r.calculateTimeToFirstFrame(a||dz.now(),i):"adplaying"===e.type&&(void 0===t.data.view_time_to_first_frame||r._inPrerollPosition())&&r.calculateTimeToFirstFrame(a||dz.now(),i)};t.one("playing",n),t.one("adplaying",n),t.one("viewend",function(){t.off("playing",n),t.off("adplaying",n)})}})}return dJ(e,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e}(),uS=function e(t){var r=this;dX(this,e),dZ(this,"_lastPlayerHeight",void 0),dZ(this,"_lastPlayerWidth",void 0),dZ(this,"_lastPlayheadPosition",void 0),dZ(this,"_lastSourceHeight",void 0),dZ(this,"_lastSourceWidth",void 0),t.on("viewinit",function(){r._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach(function(e){t.on(e,function(){if(r._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&r._lastPlayerWidth>=0&&r._lastSourceWidth>0&&r._lastPlayerHeight>=0&&r._lastSourceHeight>0){var e=t.data.player_playhead_time-r._lastPlayheadPosition;if(e<0){r._lastPlayheadPosition=-1;return}var i=Math.min(r._lastPlayerWidth/r._lastSourceWidth,r._lastPlayerHeight/r._lastSourceHeight),n=Math.max(0,i-1),a=Math.max(0,1-i);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,n),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,a),d8(t.data,"view_total_content_playback_time",e),d8(t.data,"view_total_upscaling",n*e),d8(t.data,"view_total_downscaling",a*e)}r._lastPlayheadPosition=-1})}),["playing","hb"].forEach(function(e){t.on(e,function(){r._lastPlayheadPosition=t.data.player_playhead_time,r._lastPlayerWidth=t.data.player_width,r._lastPlayerHeight=t.data.player_height,r._lastSourceWidth=t.data.video_source_width,r._lastSourceHeight=t.data.video_source_height})})},uA=function e(t){var r=this;dX(this,e),dZ(this,"isSeeking",void 0),this.isSeeking=!1;var i=-1,n=function(){var e=dz.now(),n=(t.data.viewer_time||e)-(i||e);d8(t.data,"view_seek_duration",n),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,n),r.isSeeking=!1,i=-1};t.on("seeking",function(e,a){if(Object.assign(t.data,a),r.isSeeking&&a.viewer_time-i<=2e3){i=a.viewer_time;return}r.isSeeking&&n(),r.isSeeking=!0,i=a.viewer_time,d8(t.data,"view_seek_count",1),t.send("seeking")}),t.on("seeked",function(){n()}),t.on("viewend",function(){r.isSeeking&&(n(),t.send("seeked")),r.isSeeking=!1,i=-1})},uR=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},uL=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],uk=function(){function e(t){var r=this;dX(this,e),dZ(this,"_adHasPlayed",void 0),dZ(this,"_adRequests",void 0),dZ(this,"_adResponses",void 0),dZ(this,"_currentAdRequestNumber",void 0),dZ(this,"_currentAdResponseNumber",void 0),dZ(this,"_prerollPlayTime",void 0),dZ(this,"_wouldBeNewAdPlay",void 0),dZ(this,"isAdBreak",void 0),dZ(this,"pm",void 0),this.pm=t,t.on("viewinit",function(){r.isAdBreak=!1,r._currentAdRequestNumber=0,r._currentAdResponseNumber=0,r._adRequests=[],r._adResponses=[],r._adHasPlayed=!1,r._wouldBeNewAdPlay=!0,r._prerollPlayTime=void 0}),uL.forEach(function(e){return t.on(e,r._updateAdData.bind(r))});var i=function(){r.isAdBreak=!1};t.on("adbreakstart",function(){r.isAdBreak=!0}),t.on("play",i),t.on("playing",i),t.on("viewend",i),t.on("adrequest",function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdRequestNumber++},i),uR(r._adRequests,i),d8(t.data,"view_ad_request_count"),r.inPrerollPosition()&&(t.data.view_preroll_requested=!0,r._adHasPlayed||d8(t.data,"view_preroll_request_count"))}),t.on("adresponse",function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdResponseNumber++},i),uR(r._adResponses,i);var n=r.findAdRequest(i.ad_request_id);n&&d8(t.data,"view_ad_request_time",Math.max(0,i.viewer_time-n.viewer_time))}),t.on("adplay",function(e,i){r._adHasPlayed=!0,r._wouldBeNewAdPlay&&(r._wouldBeNewAdPlay=!1,d8(t.data,"view_ad_played_count")),r.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,r._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,i.viewer_time-r._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,i.viewer_time-t.data.view_start)),r._prerollPlayTime=i.viewer_time)}),t.on("adplaying",function(e,i){r.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==r._prerollPlayTime&&(t.data.view_preroll_load_time=i.viewer_time-r._prerollPlayTime,t.data.view_startup_preroll_load_time=i.viewer_time-r._prerollPlayTime)}),t.on("adclicked",function(e,i){r._wouldBeNewAdPlay||d8(t.data,"view_ad_clicked_count")}),t.on("adskipped",function(e,i){r._wouldBeNewAdPlay||d8(t.data,"view_ad_skipped_count")}),t.on("adended",function(){r._wouldBeNewAdPlay=!0}),t.on("aderror",function(){r._wouldBeNewAdPlay=!0})}return dJ(e,[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var r=dM(d4(t.ad_tag_url),2),i=r[0],n=r[1];this.pm.data.view_preroll_ad_tag_domain=n,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var a=dM(d4(t.ad_asset_url),2),s=a[0],o=a[1];this.pm.data.view_preroll_ad_asset_domain=o,this.pm.data.view_preroll_ad_asset_hostname=s}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}]),e}(),uD=dm(dg()),uI=function e(t){dX(this,e);var r,i,n=function(){t.disableRebufferTracking||(d8(t.data,"view_waiting_rebuffer_count",1),r=dz.now(),i=uD.default.setInterval(function(){if(r){var e=dz.now();d8(t.data,"view_waiting_rebuffer_duration",e-r),r=e}},250))},a=function(){t.disableRebufferTracking||r&&(d8(t.data,"view_waiting_rebuffer_duration",dz.now()-r),r=!1,uD.default.clearInterval(i))},s=!1,o=function(){s=!0},l=function(){s=!1,a()};t.on("waiting",function(){s&&n()}),t.on("playing",function(){a(),o()}),t.on("pause",l),t.on("seeking",l)},uC=function e(t){var r=this;dX(this,e),dZ(this,"lastWallClockTime",void 0);var i=function(){r.lastWallClockTime=dz.now(),t.on("before*",n)},n=function(e){var i=dz.now(),n=r.lastWallClockTime;r.lastWallClockTime=i,i-n>3e4&&(t.emit("devicesleep",{viewer_time:n}),Object.assign(t.data,{viewer_time:n}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicewake"))};t.one("playbackheartbeat",i),t.on("playbackheartbeatend",function(){t.off("before*",n),t.one("playbackheartbeat",i)})},uP=dm(dg()),uO=function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t};return function t(r){function i(t,n,a){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*a.expires),a.expires=o}try{s=JSON.stringify(n),/^[\{\[]/.test(s)&&(n=s)}catch(e){}return n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",n,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}t||(s={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<l.length;u++){var c=l[u].split("="),h=c.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var f=c[0].replace(d,decodeURIComponent);if(h=r.read?r.read(h,f):r(h,f)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===f){s=h;break}t||(s[f]=h)}catch(e){}}return s}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,r){i(t,"",e(r,{expires:-1}))},i.withConverter=t,i}(function(){})}(),uN="muxData",uM=function(){var e;try{e=(uO.get(uN)||"").split("&").reduce(function(e,t){var r=dM(t.split("="),2),i=r[0],n=r[1],a=+n;return e[i]=n&&a==n?a:n,e},{})}catch(t){e={}}return e},uF=function(e){try{uO.set(uN,Object.entries(e).map(function(e){var t=dM(e,2),r=t[0],i=t[1];return"".concat(r,"=").concat(i)}).join("&"),{expires:365})}catch(e){}},uU=function(){var e=uM();return e.mux_viewer_id=e.mux_viewer_id||dU(),e.msn=e.msn||Math.random(),uF(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},uB=function(){var e=uM(),t=dz.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=dU(),e.sst=t),e.sex=t+15e5,uF(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}},uj=dm(dg()),u$=function(){var e;switch(uG()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},uG=function(){var e=uj.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};u$.getConnectionFromAPI=uG;var uq=uK({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),uH=uK({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function uK(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function uV(e){var t={},r={};return Object.keys(e).forEach(function(i){var n=!1;if(e.hasOwnProperty(i)&&void 0!==e[i]){var a=i.split("_"),s=a[0],o=uq[s];o||(dH.info("Data key word `"+a[0]+"` not expected in "+i),o=s+"_"),a.splice(1).forEach(function(e){"url"===e&&(n=!0),uH[e]?o+=uH[e]:Number(e)&&Math.floor(Number(e))===Number(e)?o+=e:(dH.info("Data key word `"+e+"` not expected in "+i),o+="_"+e+"_")}),n?r[o]=e[i]:t[o]=e[i]}}),Object.assign(t,r)}var uW=dm(dg()),uz={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},uY=["hb","requestcompleted","requestfailed","requestcanceled"],uX=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},uz,t)};uX.prototype.queueEvent=function(e,t){var r=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},uX.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&1===this._eventQueue.length){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()},uX.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),uW.default.clearTimeout(this._sendTimeout)},uX.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],uV({mux_view_message:"event queue truncated"}));var r=this._createPayload(t);uQ(this._beaconUrl,r,!0,function(){})},uX.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var r=this._createPayload(t),i=dz.now();uQ(this._beaconUrl,r,!1,function(r,n){n?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,dH.info("Error sending beacon: "+n)):e._failureCount=0,e._roundTripTime=dz.now()-i,e._postInFlight=!1})}},uX.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},uX.prototype._startBeaconSending=function(){var e=this;uW.default.clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=uW.default.setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},uX.prototype._createPayload=function(e){var t=this,r={transmission_timestamp:Math.round(dz.now())};this._roundTripTime&&(r.rtt_ms=Math.round(this._roundTripTime));var i,n,a,s=function(){a=(i=JSON.stringify({metadata:r,events:n||e})).length/1024},o=function(){return a<=t._options.maxPayloadKBSize};return s(),o()||(dH.info("Payload size is too big ("+a+" kb). Removing unnecessary events."),n=e.filter(function(e){return -1===uY.indexOf(e.e)}),s()),o()||(dH.info("Payload size still too big ("+a+" kb). Cropping fields.."),n.forEach(function(e){for(var t in e){var r=e[t];"string"==typeof r&&r.length>51200&&(e[t]=r.substring(0,51200))}}),s()),i};var uQ=function(e,t,r,i){if(r&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t)){i();return}if(uW.default.fetch){uW.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:t.length<=57344}).then(function(e){return i(null,e.ok?null:"Error")}).catch(function(e){return i(null,e)});return}if(uW.default.XMLHttpRequest){var n=new uW.default.XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)return i(null,200!==n.status?"error":void 0)},n.open("POST",e),n.setRequestHeader("Content-Type","text/plain"),n.send(t);return}i()},uJ=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],uZ=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],u0=["ad_id","ad_creative_id","ad_universal_id"],u1=["viewstart","error","ended","viewend"],u2=function(){function e(t,r){var i,n,a,s,o,l,d,u,c,h,f,p,m,g,v,y,b,E,T,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};dX(this,e),dZ(this,"mux",void 0),dZ(this,"envKey",void 0),dZ(this,"options",void 0),dZ(this,"eventQueue",void 0),dZ(this,"sampleRate",void 0),dZ(this,"disableCookies",void 0),dZ(this,"respectDoNotTrack",void 0),dZ(this,"previousBeaconData",void 0),dZ(this,"lastEventTime",void 0),dZ(this,"rateLimited",void 0),dZ(this,"pageLevelData",void 0),dZ(this,"viewerData",void 0),this.mux=t,this.envKey=r,this.options=w,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new uX((i=this.envKey,a=(n=this.options).beaconCollectionDomain,s=n.beaconDomain,a?"https://"+a:(i=i||"inferred").match(/^[a-z0-9]+$/)?"https://"+i+"."+(s||"litix.io"):"https://img.litix.io/a.gif")),this.sampleRate=null!==(b=this.options.sampleRate)&&void 0!==b?b:1,this.disableCookies=null!==(E=this.options.disableCookies)&&void 0!==E&&E,this.respectDoNotTrack=null!==(T=this.options.respectDoNotTrack)&&void 0!==T&&T,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(o=this.options.platform)||void 0===o?void 0:o.name,viewer_application_version:null===(l=this.options.platform)||void 0===l?void 0:l.version,viewer_application_engine:null===(d=this.options.platform)||void 0===d?void 0:d.layout,viewer_device_name:null===(u=this.options.platform)||void 0===u?void 0:u.product,viewer_device_category:"",viewer_device_manufacturer:null===(c=this.options.platform)||void 0===c?void 0:c.manufacturer,viewer_os_family:null===(f=this.options.platform)||void 0===f||null===(h=f.os)||void 0===h?void 0:h.family,viewer_os_architecture:null===(m=this.options.platform)||void 0===m||null===(p=m.os)||void 0===p?void 0:p.architecture,viewer_os_version:null===(v=this.options.platform)||void 0===v||null===(g=v.os)||void 0===g?void 0:g.version,viewer_connection_type:u$(),page_url:null===uP.default||void 0===uP.default||null===(y=uP.default.location)||void 0===y?void 0:y.href},this.viewerData=this.disableCookies?{}:uU()}return dJ(e,[{key:"send",value:function(e,t){if(!(!e||!(null!=t&&t.view_id))){if(this.respectDoNotTrack&&dV())return dH.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return dH.error("A data object was expected in send() but was not provided");var r=this.disableCookies?{}:uB(),i=d9(d6({},this.pageLevelData,t,r,this.viewerData),{event:e,env_key:this.envKey});i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var n,a=(null!==(n=i.mux_sample_number)&&void 0!==n?n:0)>=this.sampleRate,s=uV(this._deduplicateBeaconData(e,i));if(this.lastEventTime=this.mux.utils.now(),a)return dH.info("Not sending event due to sample rate restriction",e,i,s);if(this.envKey||dH.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,i,s),!this.rateLimited){if(dH.info("Sending event",e,i,s),this.rateLimited=!this.eventQueue.queueEvent(e,s),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):u1.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return i.event="eventrateexceeded",s=uV(i),this.eventQueue.queueEvent(i.event,s),dH.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var r=this,i={},n=t.view_id;if("-1"===n||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)i=d6({},t),n&&(this.previousBeaconData=i),n&&"viewend"===e&&(this.previousBeaconData=null);else{var a=0===e.indexOf("request");Object.entries(t).forEach(function(t){var n=dM(t,2),s=n[0],o=n[1];r.previousBeaconData&&(o!==r.previousBeaconData[s]||uJ.indexOf(s)>-1||r.objectHasChanged(a,s,o,r.previousBeaconData[s])||r.eventRequiresKey(e,s))&&(i[s]=o,r.previousBeaconData[s]=o)})}return i}},{key:"objectHasChanged",value:function(e,t,r,i){return!!e&&0===t.indexOf("request_")&&("request_response_headers"===t||"object"!=typeof r||"object"!=typeof i||Object.keys(r||{}).length!==Object.keys(i||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||u0.includes(t)&&uZ.includes(e))}}]),e}(),u4=function e(t){dX(this,e);var r=0,i=0,n=0,a=0,s=0,o=0,l=0;t.on("requestcompleted",function(e,o){var l,d,u=o.request_start,c=o.request_response_start,h=o.request_response_end,f=o.request_bytes_loaded;if(a++,c?(l=c-(null!=u?u:0),d=(null!=h?h:0)-c):d=(null!=h?h:0)-(null!=u?u:0),d>0&&f&&f>0){var p=f/d*8e3;s++,i+=f,n+=d,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,p),t.data.view_average_request_throughput=i/n*8e3,t.data.view_request_count=a,l>0&&(r+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=r/s)}}),t.on("requestfailed",function(e,r){a++,o++,t.data.view_request_count=a,t.data.view_request_failed_count=o}),t.on("requestcanceled",function(e,r){a++,l++,t.data.view_request_count=a,t.data.view_request_canceled_count=l})},u3=function e(t){var r=this;dX(this,e),dZ(this,"_lastEventTime",void 0),t.on("before*",function(e,i){var n=i.viewer_time,a=dz.now(),s=r._lastEventTime;if(r._lastEventTime=a,s&&a-s>36e5){var o=Object.keys(t.data).reduce(function(e,r){return 0===r.indexOf("video_")?Object.assign(e,dZ({},r,t.data[r])):e},{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view"),t.emit("viewinit",Object.assign({viewer_time:n},o)),t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:n}),"playing"!==e.type&&t.emit("playing",{viewer_time:n}))}})},u5=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],u8=new Set(["requestcompleted","requestfailed","requestcanceled"]),u6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d0(e,t)}(i,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=d1(i);return e=t?Reflect.construct(r,arguments,d1(this).constructor):r.apply(this,arguments),e&&("object"===db(e)||"function"==typeof e)?e:dY(this)});function i(e,t,n){dX(this,i),dZ(dY(a=r.call(this)),"DOM_CONTENT_LOADED_EVENT_END",void 0),dZ(dY(a),"NAVIGATION_START",void 0),dZ(dY(a),"_destroyed",void 0),dZ(dY(a),"_heartBeatTimeout",void 0),dZ(dY(a),"adTracker",void 0),dZ(dY(a),"dashjs",void 0),dZ(dY(a),"data",void 0),dZ(dY(a),"disablePlayheadRebufferTracking",void 0),dZ(dY(a),"disableRebufferTracking",void 0),dZ(dY(a),"errorTracker",void 0),dZ(dY(a),"errorTranslator",void 0),dZ(dY(a),"getAdData",void 0),dZ(dY(a),"getPlayheadTime",void 0),dZ(dY(a),"getStateData",void 0),dZ(dY(a),"hlsjs",void 0),dZ(dY(a),"id",void 0),dZ(dY(a),"longResumeTracker",void 0),dZ(dY(a),"minimumRebufferDuration",void 0),dZ(dY(a),"mux",void 0),dZ(dY(a),"oldEmit",void 0),dZ(dY(a),"playbackEventDispatcher",void 0),dZ(dY(a),"playbackHeartbeat",void 0),dZ(dY(a),"playbackHeartbeatTime",void 0),dZ(dY(a),"playheadTime",void 0),dZ(dY(a),"seekingTracker",void 0),dZ(dY(a),"sustainedRebufferThreshold",void 0),dZ(dY(a),"watchTimeTracker",void 0),dZ(dY(a),"currentFragmentPDT",void 0),dZ(dY(a),"currentFragmentStart",void 0),a.DOM_CONTENT_LOADED_EVENT_END=d5.domContentLoadedEventEnd(),a.NAVIGATION_START=d5.navigationStart(),a.mux=e,a.id=t,null!=n&&n.beaconDomain&&a.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(n=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},n)).data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),dH.level=n.debug?dq.DEBUG:dq.WARN,a.getPlayheadTime=n.getPlayheadTime,a.getStateData=n.getStateData||function(){return{}},a.getAdData=n.getAdData||function(){},a.minimumRebufferDuration=n.minimumRebufferDuration,a.sustainedRebufferThreshold=n.sustainedRebufferThreshold,a.playbackHeartbeatTime=n.playbackHeartbeatTime,a.disableRebufferTracking=n.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=n.disablePlayheadRebufferTracking,a.errorTranslator=n.errorTranslator,a.playbackEventDispatcher=new u2(e,n.data.env_key,n),a.data={player_instance_id:dU(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconCollectionDomain||n.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1,a.oldEmit=a.emit,a.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var a,s=(function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(dY(a));a.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)});var o=(function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}).bind(dY(a));if(a.on("videochange",function(e,t){o(t)}),a.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),o(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")}),a.on("fragmentchange",function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart}),a.on("destroy",a.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var l=function(){var e=void 0!==a.data.view_start;a.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",l,!1);var d=function(e){e.persisted||a.destroy()};window.addEventListener("pagehide",d,!1),a.on("destroy",function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("pagehide",d)})}return a.on("playerready",function(e,t){Object.assign(this.data,t)}),u5.forEach(function(e){a.on(e,function(t,r){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,r),this._sanitizeData()}),a.on("after"+e,function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)})}),a.on("viewend",function(e,t){Object.assign(a.data,t)}),a.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),a.longResumeTracker=new u3(dY(a)),a.errorTracker=new uy(dY(a)),new uC(dY(a)),a.seekingTracker=new uA(dY(a)),a.playheadTime=new uT(dY(a)),a.playbackHeartbeat=new uv(dY(a)),new uS(dY(a)),a.watchTimeTracker=new ub(dY(a)),new uE(dY(a)),a.adTracker=new uk(dY(a)),new uw(dY(a)),new u_(dY(a)),new ux(dY(a)),new uI(dY(a)),new u4(dY(a)),n.hlsjs&&a.addHLSJS(n),n.dashjs&&a.addDashJS(n),a.emit("viewinit",n.data),a}return dJ(i,[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach(function(e){t[e]=void 0}),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var r=dM(d4(t.video_source_url),2),i=r[0],n=r[1];t.video_source_domain=n,t.video_source_hostname=i}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,u8.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(t){var r=parseInt(e.data[t],10);e.data[t]=isNaN(r)?void 0:r}),["player_source_url","video_source_url"].forEach(function(t){if(e.data[t]){var r=e.data[t].toLowerCase();(0===r.indexOf("data:")||0===r.indexOf("blob:"))&&(e.data[t]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("video_")&&delete e.data[t]})}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=dU(),r=function(){t===e.data.view_id&&d8(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",r):r()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4)}},{key:"addHLSJS",value:function(e){if(!e.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=e.hlsjs,us(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(uo(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){if(!e.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=e.dashjs,uh(this.mux,this.id,e.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(uf(this.dashjs),this.dashjs=void 0)}}]),i}(um);dE();var u9,u7,ce,ct,cr,ci,cn,ca,cs=dm(dP()),co=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],cl={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},cd=dm(dg());cd.default&&cd.default.WeakMap&&(ca=new WeakMap);var cu={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},cc=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};cc.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},cc.prototype.processLine=function(e){var t=e.indexOf(":"),r=cy(e,t),i=r[0],n=2===r.length?cp(r[1]):void 0;if("#"!==i[0])this.currentUri.uri=i,this.manifest.segments.push(this.currentUri),!this.manifest.targetDuration||"duration"in this.currentUri||(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(i){case cu.TARGET_DURATION:if(!isFinite(n)||n<0)return;this.manifest.targetDuration=n,this.setHoldBack();break;case cu.PART_INF:ch(this.manifest,r),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case cu.SERVER_CONTROL:ch(this.manifest,r),this.setHoldBack();break;case cu.INF:0===n?this.currentUri.duration=.01:n>0&&(this.currentUri.duration=n);break;case cu.PROGRAM_DATE_TIME:var a=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=a;break;case cu.VERSION:ch(this.manifest,r);break;case cu.SESSION_DATA:var s=ui(cb(r[1]));Object.assign(this.manifest.sessionData,s)}},cc.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,r=e.targetDuration,i=e.partTargetDuration;if(t){var n="holdBack",a="partHoldBack",s=r&&3*r,o=i&&2*i;r&&!t.hasOwnProperty(n)&&(t[n]=s),s&&t[n]<s&&(t[n]=s),i&&!t.hasOwnProperty(a)&&(t[a]=3*i),i&&t[a]<o&&(t[a]=o)}};var ch=function(e,t){var r,i=cf(t[0].replace("#EXT-X-",""));cv(t[1])?(r={},r=Object.assign(cg(t[1]),r)):r=cp(t[1]),e[i]=r},cf=function(e){return e.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},cp=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},cm=function(e){var t={},r=e.split("=");return r.length>1&&(t[cf(r[0])]=cp(r[1])),t},cg=function(e){for(var t=e.split(","),r={},i=0;t.length>i;i++)r=Object.assign(cm(t[i]),r);return r},cv=function(e){return e.indexOf("=")>-1},cy=function(e,t){return -1===t?[e]:[e.substring(0,t),e.substring(t+1)]},cb=function(e){var t={};if(e){var r=e.search(",");return[e.slice(0,r),e.slice(r+1)].forEach(function(e,r){for(var i=e.replace(/['"]+/g,"").split("="),n=0;n<i.length;n++)"DATA-ID"===i[n]&&(t["DATA-ID"]=i[1-n]),"VALUE"===i[n]&&(t.VALUE=i[1-n])}),{data:t}}},cE={safeCall:function(e,t,r,i){var n=i;if(e&&"function"==typeof e[t])try{n=e[t].apply(e,r)}catch(e){dH.info("safeCall error",e)}return n},safeIncrement:d8,getComputedStyle:function(e,t){var r;return e&&t&&cd.default&&"function"==typeof cd.default.getComputedStyle?(ca&&ca.has(e)&&(r=ca.get(e)),r||(r=cd.default.getComputedStyle(e,null),ca&&ca.set(e,r)),r.getPropertyValue(t)):""},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:ut,cdnHeadersToRequestId:ur,extractHostnameAndDomain:d4,extractHostname:d2,manifestParser:cc,generateShortID:dB,generateUUID:dU,now:dz.now},cT={},c_=function(e){var t=arguments;"string"==typeof e?c_.hasOwnProperty(e)?dF.default.setTimeout(function(){t=Array.prototype.splice.call(t,1),c_[e].apply(null,t)},0):dH.warn("`"+e+"` is an unknown task"):"function"==typeof e?dF.default.setTimeout(function(){e(c_)},0):dH.warn("`"+e+"` is invalid.")},cw={loaded:dz.now(),NAME:"mux-embed",VERSION:"5.3.1",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,r){var i=dM(d$(t),3),n=i[0],a=i[1],s=i[2],o=e.log,l=e.utils.getComputedStyle,d=e.utils.secondsToMs;if(!n)return o.error("No element was found with the `"+a+"` query selector.");if("video"!==s&&"audio"!==s)return o.error("The element of `"+a+"` was not a media element.");n.mux&&(n.mux.destroy(),delete n.mux,o.warn("Already monitoring this video element, replacing existing event listeners")),(r=Object.assign({automaticErrorTracking:!0},r)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},r.data),r.getPlayheadTime=function(){return d(n.currentTime)},r.getStateData=function(){var e,t=this.hlsjs&&this.hlsjs.url,i=this.dashjs&&db("function"===this.dashjs.getSource)&&this.dashjs.getSource(),a={player_is_paused:n.paused,player_playhead_time:d(n.currentTime),player_width:parseInt(l(n,"width")),player_height:parseInt(l(n,"height")),player_autoplay_on:n.autoplay,player_preload_on:n.preload,player_language_code:n.lang,player_is_fullscreen:cs.default&&!!(cs.default.fullscreenElement||cs.default.webkitFullscreenElement||cs.default.mozFullScreenElement||cs.default.msFullscreenElement),video_poster_url:n.poster,video_source_url:t||i||n.currentSrc,video_source_duration:d(n.duration),video_source_height:n.videoHeight,video_source_width:n.videoWidth,view_dropped_frame_count:null==n||null===(e=n.getVideoPlaybackQuality)||void 0===e?void 0:e.call(n).droppedVideoFrames},s=r.getPlayheadTime();if(n.getStartDate&&s>0){var o=n.getStartDate();if(o&&"function"==typeof o.getTime&&o.getTime()){var u=o.getTime();if(a.player_program_time=u+s,n.seekable.length>0){var c=u+n.seekable.end(n.seekable.length-1);a.player_live_edge_program_time=c}}}return a},n.mux=n.mux||{},n.mux.deleted=!1,n.mux.emit=function(t,r){e.emit(a,t,r)};var u=function(){o.error("The monitor for this video element has already been destroyed.")};n.mux.destroy=function(){Object.keys(n.mux.listeners).forEach(function(e){n.removeEventListener(e,n.mux.listeners[e],!1)}),delete n.mux.listeners,n.mux.destroy=u,n.mux.swapElement=u,n.mux.emit=u,n.mux.addHLSJS=u,n.mux.addDashJS=u,n.mux.removeHLSJS=u,n.mux.removeDashJS=u,n.mux.deleted=!0,e.emit(a,"destroy")},n.mux.swapElement=function(t){var r=dM(d$(t),3),i=r[0],a=r[1],s=r[2];return i?"video"!==s&&"audio"!==s?e.log.error("The element of `"+a+"` was not a media element."):void(i.muxId=n.muxId,delete n.muxId,i.mux=i.mux||{},i.mux.listeners=Object.assign({},n.mux.listeners),delete n.mux.listeners,Object.keys(i.mux.listeners).forEach(function(e){n.removeEventListener(e,i.mux.listeners[e],!1),i.addEventListener(e,i.mux.listeners[e],!1)}),i.mux.swapElement=n.mux.swapElement,i.mux.destroy=n.mux.destroy,delete n.mux,n=i):e.log.error("No element was found with the `"+a+"` query selector.")},n.mux.addHLSJS=function(t){e.addHLSJS(a,t)},n.mux.addDashJS=function(t){e.addDashJS(a,t)},n.mux.removeHLSJS=function(){e.removeHLSJS(a)},n.mux.removeDashJS=function(){e.removeDashJS(a)},e.init(a,r),e.emit(a,"playerready"),n.paused||(e.emit(a,"play"),n.readyState>2&&e.emit(a,"playing")),n.mux.listeners={},co.forEach(function(t){("error"!==t||r.automaticErrorTracking)&&(n.mux.listeners[t]=function(){var r={};if("error"===t){if(!n.error||1===n.error.code)return;r.player_error_code=n.error.code,r.player_error_message=cl[n.error.code]||n.error.message}e.emit(a,t,r)},n.addEventListener(t,n.mux.listeners[t],!1))})}(c_,e,t)},destroyMonitor:function(e){var t=dM(d$(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():dH.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var r=dj(e);cT[r]?cT[r].addHLSJS(t):dH.error("A monitor for `"+r+"` has not been initialized.")},addDashJS:function(e,t){var r=dj(e);cT[r]?cT[r].addDashJS(t):dH.error("A monitor for `"+r+"` has not been initialized.")},removeHLSJS:function(e){var t=dj(e);cT[t]?cT[t].removeHLSJS():dH.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=dj(e);cT[t]?cT[t].removeDashJS():dH.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){dV()&&t&&t.respectDoNotTrack&&dH.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=dj(e);cT[r]=new u6(c_,r,t)},emit:function(e,t,r){var i=dj(e);cT[i]?(cT[i].emit(t,r),"destroy"===t&&delete cT[i]):dH.error("A monitor for `"+i+"` has not been initialized.")},checkDoNotTrack:dV,log:dH,utils:cE,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(c_,cw),void 0!==dF.default&&"function"==typeof dF.default.addEventListener&&dF.default.addEventListener("pagehide",function(e){e.persisted||(c_.WINDOW_UNLOADING=!0)},!1);var cx={exports:{}};!function(e,t){var r,i,n,a,s;r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=s.parseURL(e);if(!n)throw Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var a=s.parseURL(t);if(!a)throw Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var d={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(d.netLoc=o.netLoc,"/"!==a.path[0])){if(a.path){var u=o.path,c=u.substring(0,u.lastIndexOf("/")+1)+a.path;d.path=s.normalizePath(c)}else d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query))}return null===d.path&&(d.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s}(cx);var cS=cx.exports;function cA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function cR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cA(Object(r),!0).forEach(function(t){(function(e,t,r){var i;(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cL(){return(cL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let ck=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},cD=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=cI},cI=Number.MAX_SAFE_INTEGER||9007199254740991,cC=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),cP=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),cO=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({}),cN=function(){},cM={trace:cN,debug:cN,log:cN,warn:cN,info:cN,error:cN},cF=cM,cU=cF,cB=/^(\d+)x(\d+)$/,cj=/(.+?)=(".*?"|.*?)(?:,|$)/g;class c${constructor(e){"string"==typeof e&&(e=c$.parseAttrList(e)),cL(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>"X-"===e.substring(0,2))}decimalInteger(e){let t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(!this[e])return null;{let t=(this[e]||"0x").slice(2),r=new Uint8Array((t=(1&t.length?"0":"")+t).length/2);for(let e=0;e<t.length/2;e++)r[e]=parseInt(t.slice(2*e,2*e+2),16);return r}}hexadecimalIntegerAsNumber(e){let t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){let r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){let t=cB.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;let r={};for(cj.lastIndex=0;null!==(t=cj.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1)),r[t[1].trim()]=e}return r}}class cG{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){let r=t.attr;for(let t in r)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==r[t]){cU.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=cL(new c$({}),r,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){let e=new Date(this.attr["END-DATE"]);ck(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;let e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){let e=this.attr.decimalFloatingPoint("DURATION");if(ck(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&ck(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class cq{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var cH={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class cK{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[cH.AUDIO]:null,[cH.VIDEO]:null,[cH.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){let r;let i=e.split("@",2);r=1===i.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(i[1]),this._byteRange=[r,parseInt(i[0])+r]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=cS.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class cV extends cK{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new cq,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){let{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){let e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{let e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime||!ck(this.programDateTime))return null;let e=ck(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){let e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){let t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,r,i,n,a=!1){let{elementaryStreams:s}=this,o=s[e];if(!o){s[e]={startPTS:t,endPTS:r,startDTS:i,endDTS:n,partial:a};return}o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,n)}clearElementaryStreamInfo(){let{elementaryStreams:e}=this;e[cH.AUDIO]=null,e[cH.VIDEO]=null,e[cH.AUDIOVIDEO]=null}}class cW extends cK{constructor(e,t,r,i,n){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new cq,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;let a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,n),n&&(this.fragOffset=n.fragOffset+n.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){let{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class cz{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}let t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&ck(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){let e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function cY(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function cX(e){return Uint8Array.from(unescape(encodeURIComponent(e)),e=>e.charCodeAt(0))}let cQ="undefined"!=typeof self?self:void 0;var cJ={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},cZ={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function c0(e){switch(e){case cZ.FAIRPLAY:return cJ.FAIRPLAY;case cZ.PLAYREADY:return cJ.PLAYREADY;case cZ.WIDEVINE:return cJ.WIDEVINE;case cZ.CLEARKEY:return cJ.CLEARKEY}}var c1={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function c2(e){return e===c1.WIDEVINE?cJ.WIDEVINE:e===c1.PLAYREADY?cJ.PLAYREADY:e===c1.CENC||e===c1.CLEARKEY?cJ.CLEARKEY:void 0}function c4(e){switch(e){case cJ.FAIRPLAY:return cZ.FAIRPLAY;case cJ.PLAYREADY:return cZ.PLAYREADY;case cJ.WIDEVINE:return cZ.WIDEVINE;case cJ.CLEARKEY:return cZ.CLEARKEY}}function c3(e){let{drmSystems:t,widevineLicenseUrl:r}=e,i=t?[cJ.FAIRPLAY,cJ.WIDEVINE,cJ.PLAYREADY,cJ.CLEARKEY].filter(e=>!!t[e]):[];return!i[cJ.WIDEVINE]&&r&&i.push(cJ.WIDEVINE),i}let c5=function(e){return null!=cQ&&null!=(e=cQ.navigator)&&e.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function c8(e,t,r){return Uint8Array.prototype.slice?e.slice(t,r):new Uint8Array(Array.prototype.slice.call(e,t,r))}let c6=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,c9=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,c7=(e,t)=>{let r=t,i=0;for(;c6(e,t);)i+=10+he(e,t+6),c9(e,t+10)&&(i+=10),t+=i;if(i>0)return e.subarray(r,r+i)},he=(e,t)=>(127&e[t])<<21|(127&e[t+1])<<14|(127&e[t+2])<<7|127&e[t+3],ht=(e,t)=>c6(e,t)&&he(e,t+6)+10<=e.length-t,hr=e=>{let t=ha(e);for(let e=0;e<t.length;e++){let r=t[e];if(hi(r))return hu(r)}},hi=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,hn=e=>{let t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=he(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}},ha=e=>{let t=0,r=[];for(;c6(e,t);){let i=he(e,t+6),n=(t+=10)+i;for(;t+8<n;){let i=hn(e.subarray(t)),n=hs(i);n&&r.push(n),t+=i.size+10}c9(e,t)&&(t+=10)}return r},hs=e=>"PRIV"===e.type?ho(e):"W"===e.type[0]?hd(e):hl(e),ho=e=>{if(e.size<2)return;let t=hc(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}},hl=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1,r=hc(e.data.subarray(t),!0);t+=r.length+1;let i=hc(e.data.subarray(t));return{key:e.type,info:r,data:i}}let t=hc(e.data.subarray(1));return{key:e.type,data:t}},hd=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1,r=hc(e.data.subarray(t),!0);t+=r.length+1;let i=hc(e.data.subarray(t));return{key:e.type,info:r,data:i}}let t=hc(e.data);return{key:e.type,data:t}},hu=e=>{if(8===e.data.byteLength){let t=new Uint8Array(e.data),r=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},hc=(e,t=!1)=>{let r,n;let a=function(){if(!navigator.userAgent.includes("PlayStation 4"))return i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i}();if(a){let r=a.decode(e);if(t){let e=r.indexOf("\0");return -1!==e?r.substring(0,e):r}return r.replace(/\0/g,"")}let s=e.length,o="",l=0;for(;l<s&&(0!==(r=e[l++])||!t);)if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:o+=String.fromCharCode((31&r)<<6|63&e[l++]);break;case 14:o+=String.fromCharCode((15&r)<<12|(63&e[l++])<<6|(63&e[l++])<<0)}return o},hh={hexDump:function(e){let t="";for(let r=0;r<e.length;r++){let i=e[r].toString(16);i.length<2&&(i="0"+i),t+=i}return t}},hf=[].push,hp={video:1,audio:2,id3:3,text:4};function hm(e){return String.fromCharCode.apply(null,e)}function hg(e,t){let r=e[t]<<8|e[t+1];return r<0?65536+r:r}function hv(e,t){let r=hb(e,t);return r<0?4294967296+r:r}function hy(e,t){let r=hv(e,t);return r*=4294967296,r+=hv(e,t+4)}function hb(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function hE(e,t,r){e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function hT(e,t){let r=[];if(!t.length)return r;let i=e.byteLength;for(let n=0;n<i;){let a=hv(e,n),s=hm(e.subarray(n+4,n+8)),o=a>1?n+a:i;if(s===t[0]){if(1===t.length)r.push(e.subarray(n+8,o));else{let i=hT(e.subarray(n+8,o),t.slice(1));i.length&&hf.apply(r,i)}}n=o}return r}function h_(e){let t=[],r=hT(e,["moov","trak"]);for(let e=0;e<r.length;e++){let i=r[e],n=hT(i,["tkhd"])[0];if(n){let e=n[0],r=hv(n,0===e?12:20),a=hT(i,["mdia","mdhd"])[0];if(a){e=a[0];let n=hv(a,0===e?12:20),s=hT(i,["mdia","hdlr"])[0];if(s){let e=hm(s.subarray(8,12)),a={soun:cH.AUDIO,vide:cH.VIDEO}[e];if(a){let e=function(e){let t=e.subarray(8),r=t.subarray(86),i=hm(t.subarray(4,8)),n=i,a="enca"===i||"encv"===i;if(a){let e=hT(t,[i])[0].subarray("enca"===i?28:78);hT(e,["sinf"]).forEach(e=>{let t=hT(e,["schm"])[0];if(t){let r=hm(t.subarray(4,8));if("cbcs"===r||"cenc"===r){let t=hT(e,["frma"])[0];t&&(n=hm(t))}}})}switch(n){case"avc1":case"avc2":case"avc3":case"avc4":{let e=hT(r,["avcC"])[0];n+="."+hx(e[1])+hx(e[2])+hx(e[3]);break}case"mp4a":{let e=hT(t,[i])[0],r=hT(e.subarray(28),["esds"])[0];if(r&&r.length>12){let e=4;if(3!==r[e++])break;e=hw(r,e)+2;let t=r[e++];if(128&t&&(e+=2),64&t&&(e+=r[e++]),4!==r[e++])break;e=hw(r,e);let i=r[e++];if(64===i)n+="."+hx(i);else break;if(e+=12,5!==r[e++])break;e=hw(r,e);let a=r[e++],s=(248&a)>>3;31===s&&(s+=1+((7&a)<<3)+((224&r[e])>>5)),n+="."+s}break}case"hvc1":case"hev1":{let e=hT(r,["hvcC"])[0],t=e[1],i=["","A","B","C"][t>>6],a=hv(e,2),s=e[12],o=e.subarray(6,12);n+="."+i+(31&t)+"."+a.toString(16).toUpperCase()+"."+((32&t)>>5?"H":"L")+s;let l="";for(let e=o.length;e--;){let t=o[e];(t||l)&&(l="."+t.toString(16).toUpperCase()+l)}n+=l;break}case"dvh1":case"dvhe":{let e=hT(r,["dvcC"])[0],t=e[2]>>1&127,i=e[2]<<5&32|e[3]>>3&31;n+="."+hS(t)+"."+hS(i);break}case"vp09":{let e=hT(r,["vpcC"])[0],t=e[4],i=e[5],a=e[6]>>4&15;n+="."+hS(t)+"."+hS(i)+"."+hS(a);break}case"av01":{let e=hT(r,["av1C"])[0],t=e[1]>>>5,i=31&e[1],a=e[2]>>>7?"H":"M",s=(64&e[2])>>6,o=(32&e[2])>>5,l=(16&e[2])>>4,d=(8&e[2])>>3,u=(4&e[2])>>2,c=3&e[2];n+="."+t+"."+hS(i)+a+"."+hS(2===t&&s?o?12:10:s?10:8)+"."+l+"."+d+u+c+"."+hS(1)+"."+hS(1)+"."+hS(1)+".0"}}return{codec:n,encrypted:a}}(hT(i,["mdia","minf","stbl","stsd"])[0]);t[r]={timescale:n,type:a},t[a]=cR({timescale:n,id:r},e)}}}}}return hT(e,["moov","mvex","trex"]).forEach(e=>{let r=t[hv(e,4)];r&&(r.default={duration:hv(e,12),flags:hv(e,20)})}),t}function hw(e,t){let r=t+5;for(;128&e[t++]&&t<r;);return t}function hx(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function hS(e){return(e<10?"0":"")+e}function hA(e){let t=hT(e,["schm"])[0];if(t){let r=hm(t.subarray(4,8));if("cbcs"===r||"cenc"===r)return hT(e,["schi","tenc"])[0]}return null}function hR(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function hL(e,t){let r=[],i=t.samples,n=t.timescale,a=t.id,s=!1;return hT(i,["moof"]).map(o=>{let l=o.byteOffset-8;hT(o,["traf"]).map(o=>{let d=hT(o,["tfdt"]).map(e=>{let t=e[0],r=hv(e,4);return 1===t&&(r*=4294967296,r+=hv(e,8)),r/n})[0];return void 0!==d&&(e=d),hT(o,["tfhd"]).map(d=>{let u=hv(d,4),c=16777215&hv(d,0),h=0,f=0,p=8;u===a&&((1&c)!=0&&(p+=8),(2&c)!=0&&(p+=4),(8&c)!=0&&(h=hv(d,p),p+=4),(16&c)!=0&&(f=hv(d,p),p+=4),(32&c)!=0&&(p+=4),"video"===t.type&&(s=function(e){if(!e)return!1;let t=e.indexOf("."),r=t<0?e:e.substring(0,t);return"hvc1"===r||"hev1"===r||"dvh1"===r||"dvhe"===r}(t.codec)),hT(o,["trun"]).map(a=>{let o=a[0],d=16777215&hv(a,0),u=0,c=(256&d)!=0,p=0,m=(512&d)!=0,g=0,v=(1024&d)!=0,y=(2048&d)!=0,b=0,E=hv(a,4),T=8;(1&d)!=0&&(u=hv(a,T),T+=4),(4&d)!=0&&(T+=4);let w=u+l;for(let l=0;l<E;l++){if(c?(p=hv(a,T),T+=4):p=h,m?(g=hv(a,T),T+=4):g=f,v&&(T+=4),y&&(b=0===o?hv(a,T):hb(a,T),T+=4),t.type===cH.VIDEO){let t=0;for(;t<g;){let a=hv(i,w);w+=4,function(e,t){if(!e)return 6==(31&t);{let e=t>>1&63;return 39===e||40===e}}(s,i[w])&&hk(i.subarray(w,w+a),s?2:1,e+b/n,r),w+=a,t+=a+4}}e+=p/n}}))})})}),r}function hk(e,t,r,i){let n;let a=hD(e);n=0+t;let s=0,o=0,l=0;for(;n<a.length;){s=0;do{if(n>=a.length)break;s+=l=a[n++]}while(255===l);o=0;do{if(n>=a.length)break;o+=l=a[n++]}while(255===l);let e=a.length-n,t=n;if(o<e)n+=o;else if(o>e){cU.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===s){if(181===a[t++]){let e=hg(a,t);if(t+=2,49===e){let e=hv(a,t);if(t+=4,1195456820===e){let e=a[t++];if(3===e){let n=a[t++],o=31&n,l=64&n,d=l?2+3*o:0,u=new Uint8Array(d);if(l){u[0]=n;for(let e=1;e<d;e++)u[e]=a[t++]}i.push({type:e,payloadType:s,pts:r,bytes:u})}}}}}else if(5===s&&o>16){let e=[];for(let r=0;r<16;r++){let i=a[t++].toString(16);e.push(1==i.length?"0"+i:i),(3===r||5===r||7===r||9===r)&&e.push("-")}let n=o-16,l=new Uint8Array(n);for(let e=0;e<n;e++)l[e]=a[t++];i.push({payloadType:s,pts:r,uuid:e.join(""),userData:hc(l),userDataBytes:l})}}}function hD(e){let t=e.byteLength,r=[],i=1;for(;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;let n=t-r.length,a=new Uint8Array(n),s=0;for(i=0;i<n;s++,i++)s===r[0]&&(s++,r.shift()),a[i]=e[s];return a}let hI={};class hC{static clearKeyUriToKeyIdMap(){hI={}}constructor(e,t,r,i=[1],n=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=i,this.iv=n,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case cZ.FAIRPLAY:case cZ.WIDEVINE:case cZ.PLAYREADY:case cZ.CLEARKEY:return -1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||cU.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);let t=function(e){let t=new Uint8Array(16);for(let r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(e);return new hC(this.method,this.uri,"identity",this.keyFormatVersions,t)}let t=function(e){let t=e.split(":"),r=null;if("data"===t[0]&&2===t.length){let e=t[1].split(";"),i=e[e.length-1].split(",");if(2===i.length){let t="base64"===i[0],n=i[1];t?(e.splice(-1,1),r=cY(n)):r=function(e){let t=cX(e).subarray(0,16),r=new Uint8Array(16);return r.set(t,16-t.length),r}(n)}}return r}(this.uri);if(t)switch(this.keyFormat){case cZ.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case cZ.PLAYREADY:{let e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(e,t,r){let i,n;if(16!==e.byteLength)throw RangeError("Invalid system id");i=new Uint8Array,n=new Uint8Array;let a=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),function(e,...t){let r=t.length,i=8,n=r;for(;n--;)i+=t[n].byteLength;let a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=255&i,a.set(e,4),n=0,i=8;n<r;n++)a.set(t[n],i),i+=t[n].byteLength;return a}([112,115,115,104],new Uint8Array([0,0,0,0]),e,n,i,a,r||new Uint8Array)}(e,0,t);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),i=String.fromCharCode.apply(null,Array.from(r)),n=i.substring(i.indexOf("<"),i.length),a=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(a){let e=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(e){let t=cY(e).subarray(0,16);(function(e){let t=function(e,t,r){let i=e[t];e[t]=e[r],e[r]=i};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)})(t),this.keyId=t}}break}default:{let e=t.subarray(0,16);if(16!==e.length){let t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e}}if(!this.keyId||16!==this.keyId.byteLength){let e=hI[this.uri];if(!e){let t=Object.keys(hI).length%Number.MAX_SAFE_INTEGER;new DataView((e=new Uint8Array(16)).buffer,12,4).setUint32(0,t),hI[this.uri]=e}this.keyId=e}return this}}let hP=/\{\$([a-zA-Z0-9-_]+)\}/g;function hO(e,t,r){if(null!==e.variableList||e.hasVariableRefs)for(let i=r.length;i--;){let n=r[i],a=t[n];a&&(t[n]=hN(e,a))}}function hN(e,t){if(null!==e.variableList||e.hasVariableRefs){let r=e.variableList;return t.replace(hP,t=>{let i=t.substring(2,t.length-1),n=null==r?void 0:r[i];return void 0===n?(e.playlistParsingError||(e.playlistParsingError=Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),t):n})}return t}function hM(e,t,r){let i,n,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){i=t.QUERYPARAM;try{let e=new self.URL(r).searchParams;if(e.has(i))n=e.get(i);else throw Error(`"${i}" does not match any query parameter in URI: "${r}"`)}catch(t){e.playlistParsingError||(e.playlistParsingError=Error(`EXT-X-DEFINE QUERYPARAM: ${t.message}`))}}else i=t.NAME,n=t.VALUE;i in a?e.playlistParsingError||(e.playlistParsingError=Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):a[i]=n||""}function hF(e=!0){if("undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}let hU={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function hB(e,t,r=!0){return!e.split(",").some(e=>!hj(e,t,r))}function hj(e,t,r=!0){var i;let n=hF(r);return null!=(i=null==n?void 0:n.isTypeSupported(h$(e,t)))&&i}function h$(e,t){return`${t}/mp4;codecs="${e}"`}function hG(e){if(e){let t=e.substring(0,4);return hU.video[t]}return 2}function hq(e){return e.split(",").reduce((e,t)=>{let r=hU.video[t];return r?(2*r+e)/(e?3:2):(hU.audio[t]+e)/(e?2:1)},0)}let hH={},hK=/flac|opus/i;function hV(e,t=!0){return e.replace(hK,e=>(function(e,t=!0){if(hH[e])return hH[e];let r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e];for(let i=0;i<r.length;i++)if(hj(r[i],"audio",t))return hH[e]=r[i],r[i];return e})(e.toLowerCase(),t))}function hW(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}let hz=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,hY=/#EXT-X-MEDIA:(.*)/g,hX=/^#EXT(?:INF|-X-TARGETDURATION):/m,hQ=RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),hJ=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class hZ{static findGroup(e,t){for(let r=0;r<e.length;r++){let i=e[r];if(i.id===t)return i}}static resolve(e,t){return cS.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return hX.test(e)}static parseMasterPlaylist(e,t){var r;let i;let n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:hP.test(e)},a=[];for(hz.lastIndex=0;null!=(i=hz.exec(e));)if(i[1]){let e=new c$(i[1]);hO(n,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);let s=hN(n,i[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:hZ.resolve(s,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),function(e,t){let r=(e||"").split(/[ ,]+/).filter(e=>e);["video","audio","text"].forEach(e=>{let i=r.filter(t=>(function(e,t){let r=hU[t];return!!r&&!!r[e.slice(0,4)]})(t,e));i.length&&(t[`${e}Codec`]=i.join(","),r=r.filter(e=>-1===i.indexOf(e)))}),t.unknownCodecs=r}(e.CODECS,o),null!=(r=o.unknownCodecs)&&r.length||a.push(o),n.levels.push(o)}else if(i[3]){let e=i[3],r=i[4];switch(e){case"SESSION-DATA":{let e=new c$(r);hO(n,e,["DATA-ID","LANGUAGE","VALUE","URI"]);let t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{let e=h0(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):cU.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${r}"`);break}case"DEFINE":{let e=new c$(r);hO(n,e,["NAME","VALUE","QUERYPARAM"]),hM(n,e,t)}break;case"CONTENT-STEERING":{let e=new c$(r);hO(n,e,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:hZ.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=h1(r)}}let s=a.length>0&&a.length<n.levels.length;return n.levels=s?a:n.levels,0===n.levels.length&&(n.playlistParsingError=Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,r){let i;let n={},a=r.levels,s={AUDIO:a.map(e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec})),SUBTITLES:a.map(e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec})),"CLOSED-CAPTIONS":[]},o=0;for(hY.lastIndex=0;null!==(i=hY.exec(e));){let e=new c$(i[1]),a=e.TYPE;if(a){let i=s[a],l=n[a]||[];n[a]=l,hO(r,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);let d=e.LANGUAGE,u=e["ASSOC-LANGUAGE"],c=e.CHANNELS,h=e.CHARACTERISTICS,f=e["INSTREAM-ID"],p={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||d||"",type:a,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:d,url:e.URI?hZ.resolve(e.URI,t):""};if(u&&(p.assocLang=u),c&&(p.channels=c),h&&(p.characteristics=h),f&&(p.instreamId=f),null!=i&&i.length){let e=hZ.findGroup(i,p.groupId)||i[0];h2(p,e,"audioCodec"),h2(p,e,"textCodec")}l.push(p)}}return n}static parseLevelPlaylist(e,t,r,i,n,a){let s,o,l;let d=new cz(t),u=d.fragments,c=null,h=0,f=0,p=0,m=0,g=null,v=new cV(i,t),y=-1,b=!1,E=null;for(hQ.lastIndex=0,d.m3u8=e,d.hasVariableRefs=hP.test(e);null!==(s=hQ.exec(e));){b&&(b=!1,(v=new cV(i,t)).start=p,v.sn=h,v.cc=m,v.level=r,c&&(v.initSegment=c,v.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,E&&(v.setByteRange(E),E=null)));let e=s[1];if(e){v.duration=parseFloat(e);let t=(" "+s[2]).slice(1);v.title=t||null,v.tagList.push(t?["INF",e,t]:["INF",e])}else if(s[3]){if(ck(v.duration)){v.start=p,l&&h5(v,l,d),v.sn=h,v.level=r,v.cc=m,u.push(v);let e=(" "+s[3]).slice(1);v.relurl=hN(d,e),h4(v,g),g=v,p+=v.duration,h++,f=0,b=!0}}else if(s[4]){let e=(" "+s[4]).slice(1);g?v.setByteRange(e,g):v.setByteRange(e)}else if(s[5])v.rawProgramDateTime=(" "+s[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===y&&(y=u.length);else{if(!(s=s[0].match(hJ))){cU.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<s.length&&void 0===s[o];o++);let e=(" "+s[o]).slice(1),n=(" "+s[o+1]).slice(1),p=s[o+2]?(" "+s[o+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":d.type=n.toUpperCase();break;case"MEDIA-SEQUENCE":h=d.startSN=parseInt(n);break;case"SKIP":{let e=new c$(n);hO(d,e,["RECENTLY-REMOVED-DATERANGES"]);let t=e.decimalInteger("SKIPPED-SEGMENTS");if(ck(t)){d.skippedSegments=t;for(let e=t;e--;)u.unshift(null);h+=t}let r=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");r&&(d.recentlyRemovedDateranges=r.split("	"));break}case"TARGETDURATION":d.targetduration=Math.max(parseInt(n),1);break;case"VERSION":d.version=parseInt(n);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"#":(n||p)&&v.tagList.push(p?[n,p]:[n]);break;case"DISCONTINUITY":m++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([e]);break;case"BITRATE":v.tagList.push([e,n]);break;case"DATERANGE":{let e=new c$(n);hO(d,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),hO(d,e,e.clientAttrs);let t=new cG(e,d.dateRanges[e.ID]);t.isValid||d.skippedSegments?d.dateRanges[t.id]=t:cU.warn(`Ignoring invalid DATERANGE tag: "${n}"`),v.tagList.push(["EXT-X-DATERANGE",n]);break}case"DEFINE":{let e=new c$(n);hO(d,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?function(e,t,r){let i=t.IMPORT;if(r&&i in r){let t=e.variableList;t||(e.variableList=t={}),t[i]=r[i]}else e.playlistParsingError||(e.playlistParsingError=Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}(d,e,a):hM(d,e,t)}break;case"DISCONTINUITY-SEQUENCE":m=parseInt(n);break;case"KEY":{let e=h0(n,t,d);if(e.isSupported()){if("NONE"===e.method){l=void 0;break}l||(l={}),l[e.keyFormat]&&(l=cL({},l)),l[e.keyFormat]=e}else cU.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${n}"`);break}case"START":d.startTimeOffset=h1(n);break;case"MAP":{let e=new c$(n);if(hO(d,e,["BYTERANGE","URI"]),v.duration){let n=new cV(i,t);h3(n,e,r,l),c=n,v.initSegment=c,c.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=c.rawProgramDateTime)}else{let t=v.byteRangeEndOffset;if(t){let e=v.byteRangeStartOffset;E=`${t-e}@${e}`}else E=null;h3(v,e,r,l),c=v,b=!0}break}case"SERVER-CONTROL":{let e=new c$(n);d.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=d.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),d.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{let e=new c$(n);d.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=d.partList;e||(e=d.partList=[]);let r=f>0?e[e.length-1]:void 0,i=f++,a=new c$(n);hO(d,a,["BYTERANGE","URI"]);let s=new cW(a,v,t,i,r);e.push(s),v.duration+=s.duration;break}case"PRELOAD-HINT":{let e=new c$(n);hO(d,e,["URI"]),d.preloadHint=e;break}case"RENDITION-REPORT":{let e=new c$(n);hO(d,e,["URI"]),d.renditionReports=d.renditionReports||[],d.renditionReports.push(e);break}default:cU.warn(`line parsed but not handled: ${s}`)}}}g&&!g.relurl?(u.pop(),p-=g.duration,d.partList&&(d.fragmentHint=g)):d.partList&&(h4(v,g),v.cc=m,d.fragmentHint=v,l&&h5(v,l,d));let T=u.length,w=u[0],x=u[T-1];if((p+=d.skippedSegments*d.targetduration)>0&&T&&x){d.averagetargetduration=p/T;let e=x.sn;d.endSN="initSegment"!==e?e:0,d.live||(x.endList=!0),w&&(d.startCC=w.cc)}else d.endSN=0,d.startCC=0;return d.fragmentHint&&(p+=d.fragmentHint.duration),d.totalduration=p,d.endCC=m,y>0&&function(e,t){let r=e[t];for(let i=t;i--;){let t=e[i];if(!t)return;t.programDateTime=r.programDateTime-1e3*t.duration,r=t}}(u,y),d}}function h0(e,t,r){var i,n;let a=new c$(e);hO(r,a,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);let s=null!=(i=a.METHOD)?i:"",o=a.URI,l=a.hexadecimalInteger("IV"),d=a.KEYFORMATVERSIONS,u=null!=(n=a.KEYFORMAT)?n:"identity";return o&&a.IV&&!l&&cU.error(`Invalid IV: ${a.IV}`),new hC(s,o?hZ.resolve(o,t):"",u,(d||"1").split("/").map(Number).filter(Number.isFinite),l)}function h1(e){let t=new c$(e).decimalFloatingPoint("TIME-OFFSET");return ck(t)?t:null}function h2(e,t,r){let i=t[r];i&&(e[r]=i)}function h4(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),ck(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function h3(e,t,r,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=r,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}function h5(e,t,r){e.levelkeys=t;let{encryptedFragments:i}=r;(!i.length||i[i.length-1].levelkeys!==t)&&Object.keys(t).some(e=>t[e].isCommonEncryption)&&i.push(e)}var h8={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},h6={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function h9(e){let{type:t}=e;switch(t){case h8.AUDIO_TRACK:return h6.AUDIO;case h8.SUBTITLE_TRACK:return h6.SUBTITLE;default:return h6.MAIN}}function h7(e,t){let r=e.url;return(void 0===r||0===r.indexOf("data:"))&&(r=t.url),r}class fe{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){let{hls:e}=this;e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.LEVEL_LOADING,this.onLevelLoading,this),e.on(cC.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(cC.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){let{hls:e}=this;e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.LEVEL_LOADING,this.onLevelLoading,this),e.off(cC.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(cC.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){let t=this.hls.config,r=t.pLoader,i=t.loader,n=new(r||i)(t);return this.loaders[e.type]=n,n}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(let e in this.loaders){let t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){let{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:h8.MANIFEST,url:r,deliveryDirectives:null})}onLevelLoading(e,t){let{id:r,level:i,pathwayId:n,url:a,deliveryDirectives:s}=t;this.load({id:r,level:i,pathwayId:n,responseType:"text",type:h8.LEVEL,url:a,deliveryDirectives:s})}onAudioTrackLoading(e,t){let{id:r,groupId:i,url:n,deliveryDirectives:a}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:h8.AUDIO_TRACK,url:n,deliveryDirectives:a})}onSubtitleTrackLoading(e,t){let{id:r,groupId:i,url:n,deliveryDirectives:a}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:h8.SUBTITLE_TRACK,url:n,deliveryDirectives:a})}load(e){var t;let r;let i=this.hls.config,n=this.getInternalLoader(e);if(n){let t=n.context;if(t&&t.url===e.url&&t.level===e.level){cU.trace("[playlist-loader]: playlist request ongoing");return}cU.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),n.abort()}if(r=e.type===h8.MANIFEST?i.manifestLoadPolicy.default:cL({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),n=this.createInternalLoader(e),ck(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===h8.LEVEL&&null!==e.level?t=this.hls.levels[e.level].details:e.type===h8.AUDIO_TRACK&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===h8.SUBTITLE_TRACK&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){let e=t.partTarget,i=t.targetduration;if(e&&i){let t=1e3*Math.max(3*e,.8*i);r=cL({},r,{maxTimeToFirstByteMs:Math.min(t,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,r.maxTimeToFirstByteMs)})}}}let a=r.errorRetry||r.timeoutRetry||{},s={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0};n.load(e,s,{onSuccess:(e,t,r,i)=>{let n=this.getInternalLoader(r);this.resetInternalLoader(r.type);let a=e.data;if(0!==a.indexOf("#EXTM3U")){this.handleManifestParsingError(e,r,Error("no EXTM3U delimiter"),i||null,t);return}t.parsing.start=performance.now(),hZ.isMediaPlaylist(a)?this.handleTrackOrLevelPlaylist(e,t,r,i||null,n):this.handleMasterPlaylist(e,t,r,i)},onError:(e,t,r,i)=>{this.handleNetworkError(t,r,!1,e,i)},onTimeout:(e,t,r)=>{this.handleNetworkError(t,r,!0,void 0,e)}})}handleMasterPlaylist(e,t,r,i){let n=this.hls,a=e.data,s=h7(e,r),o=hZ.parseMasterPlaylist(a,s);if(o.playlistParsingError){this.handleManifestParsingError(e,r,o.playlistParsingError,i,t);return}let{contentSteering:l,levels:d,sessionData:u,sessionKeys:c,startTimeOffset:h,variableList:f}=o;this.variableList=f;let{AUDIO:p=[],SUBTITLES:m,"CLOSED-CAPTIONS":g}=hZ.parseMasterPlaylistMedia(a,s,o);p.length&&!p.some(e=>!e.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(cU.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c$({}),bitrate:0,url:""})),n.trigger(cC.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:m,captions:g,contentSteering:l,url:s,stats:t,networkDetails:i,sessionData:u,sessionKeys:c,startTimeOffset:h,variableList:f})}handleTrackOrLevelPlaylist(e,t,r,i,n){let a=this.hls,{id:s,level:o,type:l}=r,d=h7(e,r),u=ck(o)?o:ck(s)?s:0,c=h9(r),h=hZ.parseLevelPlaylist(e.data,d,u,c,0,this.variableList);if(l===h8.MANIFEST){let e={attrs:new c$({}),bitrate:0,details:h,name:"",url:d};a.trigger(cC.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:d,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=h,this.handlePlaylistLoaded(h,e,t,r,i,n)}handleManifestParsingError(e,t,r,i,n){this.hls.trigger(cC.ERROR,{type:cP.NETWORK_ERROR,details:cO.MANIFEST_PARSING_ERROR,fatal:t.type===h8.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:i,stats:n})}handleNetworkError(e,t,r=!1,i,n){let a=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===h8.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===h8.AUDIO_TRACK||e.type===h8.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);let s=Error(a);cU.warn(`[playlist-loader]: ${a}`);let o=cO.UNKNOWN,l=!1,d=this.getInternalLoader(e);switch(e.type){case h8.MANIFEST:o=r?cO.MANIFEST_LOAD_TIMEOUT:cO.MANIFEST_LOAD_ERROR,l=!0;break;case h8.LEVEL:o=r?cO.LEVEL_LOAD_TIMEOUT:cO.LEVEL_LOAD_ERROR,l=!1;break;case h8.AUDIO_TRACK:o=r?cO.AUDIO_TRACK_LOAD_TIMEOUT:cO.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case h8.SUBTITLE_TRACK:o=r?cO.SUBTITLE_TRACK_LOAD_TIMEOUT:cO.SUBTITLE_LOAD_ERROR,l=!1}d&&this.resetInternalLoader(e.type);let u={type:cP.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:d,context:e,error:s,networkDetails:t,stats:n};if(i){let r=(null==t?void 0:t.url)||e.url;u.response=cR({url:r,data:void 0},i)}this.hls.trigger(cC.ERROR,u)}handlePlaylistLoaded(e,t,r,i,n,a){let s=this.hls,{type:o,level:l,id:d,groupId:u,deliveryDirectives:c}=i,h=h7(t,i),f=h9(i),p="number"==typeof i.level&&f===h6.MAIN?l:void 0;if(!e.fragments.length){let e=Error("No Segments found in Playlist");s.trigger(cC.ERROR,{type:cP.NETWORK_ERROR,details:cO.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:e,reason:e.message,response:t,context:i,level:p,parent:f,networkDetails:n,stats:r});return}e.targetduration||(e.playlistParsingError=Error("Missing Target Duration"));let m=e.playlistParsingError;if(m){s.trigger(cC.ERROR,{type:cP.NETWORK_ERROR,details:cO.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:t,context:i,level:p,parent:f,networkDetails:n,stats:r});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),o){case h8.MANIFEST:case h8.LEVEL:s.trigger(cC.LEVEL_LOADED,{details:e,level:p||0,id:d||0,stats:r,networkDetails:n,deliveryDirectives:c});break;case h8.AUDIO_TRACK:s.trigger(cC.AUDIO_TRACK_LOADED,{details:e,id:d||0,groupId:u||"",stats:r,networkDetails:n,deliveryDirectives:c});break;case h8.SUBTITLE_TRACK:s.trigger(cC.SUBTITLE_TRACK_LOADED,{details:e,id:d||0,groupId:u||"",stats:r,networkDetails:n,deliveryDirectives:c})}}}function ft(e,t){let r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function fr(e,t){let r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw Error(`addCue is failed for: ${t}`)}catch(r){cU.debug(`[texttrack-utils]: ${r}`);try{let r=new self.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,e.addCue(r)}catch(e){cU.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${e}`)}}"disabled"===r&&(e.mode=r)}function fi(e){let t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let t=e.cues.length;t--;)e.removeCue(e.cues[t]);"disabled"===t&&(e.mode=t)}function fn(e,t,r,i){let n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&e.cues.length>0){let n=function(e,t,r){let i=[],n=function(e,t){if(t<e[0].startTime)return 0;let r=e.length-1;if(t>e[r].endTime)return -1;let i=0,n=r;for(;i<=n;){let a=Math.floor((n+i)/2);if(t<e[a].startTime)n=a-1;else{if(!(t>e[a].startTime)||!(i<r))return a;i=a+1}}return e[i].startTime-t<t-e[n].startTime?i:n}(e,t);if(n>-1)for(let a=n,s=e.length;a<s;a++){let n=e[a];if(n.startTime>=t&&n.endTime<=r)i.push(n);else if(n.startTime>r)break}return i}(e.cues,t,r);for(let t=0;t<n.length;t++)(!i||i(n[t]))&&e.removeCue(n[t])}"disabled"===n&&(e.mode=n)}function fa(e){let t=[];for(let r=0;r<e.length;r++){let i=e[r];("subtitles"===i.kind||"captions"===i.kind)&&i.label&&t.push(e[r])}return t}var fs={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};function fo(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function fl(e,t,r,i,n){let a=new e(t,r,"");try{a.value=i,n&&(a.type=n)}catch(s){a=new e(t,r,JSON.stringify(n?cR({type:n},i):i))}return a}let fd=(()=>{let e=fo();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function fu(e,t){return e.getTime()/1e3-t}class fc{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){let{hls:e}=this;e.on(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(cC.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){let{hls:e}=this;e.off(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(cC.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(fi(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){let t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){let r=e[t];if("metadata"===r.kind&&"id3"===r.label)return ft(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;let{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:i}}}=this;if(!r&&!i)return;let{samples:n}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));let a=fo();if(a)for(let e=0;e<n.length;e++){let t=n[e].type;if(t===fs.emsg&&!r||!i)continue;let s=ha(n[e].data);if(s){let r=n[e].pts,i=r+n[e].duration;i>fd&&(i=fd),i-r<=0&&(i=r+.25);for(let e=0;e<s.length;e++){let n=s[e];if(!hi(n)){this.updateId3CueEnds(r,t);let e=fl(a,r,i,n,t);e&&this.id3Track.addCue(e)}}}}}updateId3CueEnds(e,t){var r;let i=null==(r=this.id3Track)?void 0:r.cues;if(i)for(let r=i.length;r--;){let n=i[r];n.type===t&&n.startTime<e&&n.endTime===fd&&(n.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:r,type:i}){let{id3Track:n,hls:a}=this;if(!a)return;let{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:o}}=a;n&&(s||o)&&fn(n,t,r,"audio"===i?e=>e.type===fs.audioId3&&o:"video"===i?e=>e.type===fs.emsg&&s:e=>e.type===fs.audioId3&&o||e.type===fs.emsg&&s)}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;let{dateRangeCuesAppended:r,id3Track:i}=this,{dateRanges:n}=t,a=Object.keys(n);if(i){let e=Object.keys(r).filter(e=>!a.includes(e));for(let t=e.length;t--;){let n=e[t];Object.keys(r[n].cues).forEach(e=>{i.removeCue(r[n].cues[e])}),delete r[n]}}let s=t.fragments[t.fragments.length-1];if(0===a.length||!ck(null==s?void 0:s.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));let o=s.programDateTime/1e3-s.start,l=fo();for(let e=0;e<a.length;e++){let t=a[e],i=n[t],s=fu(i.startDate,o),u=r[t],c=(null==u?void 0:u.cues)||{},h=(null==u?void 0:u.durationKnown)||!1,f=fd,p=i.endDate;if(p)f=fu(p,o),h=!0;else if(i.endOnNext&&!h){let e=a.reduce((e,t)=>{if(t!==i.id){let r=n[t];if(r.class===i.class&&r.startDate>i.startDate&&(!e||i.startDate<e.startDate))return r}return e},null);e&&(f=fu(e.startDate,o),h=!0)}let m=Object.keys(i.attr);for(let e=0;e<m.length;e++){var d;let r=m[e];if(!("ID"!==r&&"CLASS"!==r&&"START-DATE"!==r&&"DURATION"!==r&&"END-DATE"!==r&&"END-ON-NEXT"!==r))continue;let n=c[r];if(n)h&&!u.durationKnown&&(n.endTime=f);else if(l){let e=i.attr[r];("SCTE35-OUT"===r||"SCTE35-IN"===r)&&(d=e,e=Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);let n=fl(l,s,f,{key:r,data:e},fs.dateRange);n&&(n.id=t,this.id3Track.addCue(n),c[r]=n)}}r[t]={cues:c,dateRange:i,durationKnown:h}}}}class fh{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){let{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){let{levelDetails:e}=this;if(null===e)return null;let{holdBack:t,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:n,liveSyncDurationCount:a,lowLatencyMode:s}=this.config,o=this.hls.userConfig,l=s&&r||t;return(o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==n?n:a*i),l+Math.min(1*this.stallCount,i)}get liveSyncPosition(){let e=this.estimateLiveEdge(),t=this.targetLatency,r=this.levelDetails;if(null===e||null===t||null===r)return null;let i=r.edge,n=e-t-this.edgeStalled;return Math.min(Math.max(i-r.totalduration,n),i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration))}get drift(){let{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){let{levelDetails:e}=this;if(null===e)return 0;let t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){let{media:e,levelDetails:t}=this;if(!e||!t)return 0;let r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(cC.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(cC.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(cC.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(cC.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(cC.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(cC.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var r;t.details===cO.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(r=this.levelDetails)&&r.live&&cU.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){let{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;let r=this.computeLatency();if(null===r)return;this._latency=r;let{lowLatencyMode:i,maxLiveSyncPlaybackRate:n}=this.config;if(!i||1===n||!t.live)return;let a=this.targetLatency;if(null===a)return;let s=r-a;if(s<Math.min(this.maxLatency,a+t.targetduration)&&s>.05&&this.forwardBufferLength>1){let t=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(Math.min(2,Math.max(1,n)),Math.max(1,t))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){let{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){let e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}let ff=["NONE","TYPE-0","TYPE-1",null],fp=["SDR","PQ","HLG"];var fm={No:"",Yes:"YES",v2:"v2"};function fg(e){let{canSkipUntil:t,canSkipDateRanges:r,age:i}=e;return t&&i<t/2?r?fm.v2:fm.Yes:fm.No}class fv{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){let t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class fy{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(e=>!!e).map(e=>e.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return fb(this._audioGroups,e)}hasSubtitleGroup(e){return fb(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function fb(e,t){return!!t&&!!e&&-1!==e.indexOf(t)}function fE(e,t){let r=t.startPTS;if(ck(r)){let i,n=0;t.sn>e.sn?(n=r-e.start,i=e):(n=e.start-r,i=t),i.duration!==n&&(i.duration=n)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function fT(e,t,r,i,n,a){let s;i-r<=0&&(cU.warn("Fragment should have a positive duration",t),i=r+t.duration,a=n+t.duration);let o=r,l=i,d=t.startPTS,u=t.endPTS;if(ck(d)){let e=Math.abs(d-r);ck(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,o=Math.max(r,d),r=Math.min(r,d),n=Math.min(n,t.startDTS),l=Math.min(i,u),i=Math.max(i,u),a=Math.max(a,t.endDTS)}let c=r-t.start;0!==t.start&&(t.start=r),t.duration=i-t.start,t.startPTS=r,t.maxStartPTS=o,t.startDTS=n,t.endPTS=i,t.minEndPTS=l,t.endDTS=a;let h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;let f=h-e.startSN,p=e.fragments;for(p[f]=t,s=f;s>0;s--)fE(p[s],p[s-1]);for(s=f;s<p.length-1;s++)fE(p[s],p[s+1]);return e.fragmentHint&&fE(p[p.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function f_(e,t){let r=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;r<0||r>=i.length||fw(t,i[r].start)}function fw(e,t){if(t){let r=e.fragments;for(let i=e.skippedSegments;i<r.length;i++)r[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function fx(e,t,r){var i;return null!=e&&e.details?fS(null==(i=e.details)?void 0:i.partList,t,r):null}function fS(e,t,r){if(e)for(let i=e.length;i--;){let n=e[i];if(n.index===r&&n.fragment.sn===t)return n}return null}function fA(e){e.forEach((e,t)=>{let{details:r}=e;null!=r&&r.fragments&&r.fragments.forEach(e=>{e.level=t})})}function fR(e){switch(e.details){case cO.FRAG_LOAD_TIMEOUT:case cO.KEY_LOAD_TIMEOUT:case cO.LEVEL_LOAD_TIMEOUT:case cO.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function fL(e,t){let r=fR(t);return e.default[`${r?"timeout":"error"}Retry`]}function fk(e,t){return Math.min(("linear"===e.backoff?1:Math.pow(2,t))*e.retryDelayMs,e.maxRetryDelayMs)}function fD(e){return cR(cR({},e),{errorRetry:null,timeoutRetry:null})}function fI(e,t,r,i){if(!e)return!1;let n=null==i?void 0:i.code,a=t<e.maxNumRetry&&(0===n&&!1===navigator.onLine||!!n&&(n<400||n>499)||!!r);return e.shouldRetry?e.shouldRetry(e,t,r,i,a):a}let fC={search:function(e,t){let r=0,i=e.length-1,n=null,a=null;for(;r<=i;){let s=t(a=e[n=(r+i)/2|0]);if(s>0)r=n+1;else{if(!(s<0))return a;i=n-1}}return null}};function fP(e,t,r=0,i=0,n=.005){let a=null;if(e){a=t[e.sn-t[0].sn+1]||null;let i=e.endDTS-r;i>0&&i<15e-7&&(r+=15e-7)}else 0===r&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===fO(r,i,a)||function(e,t,r){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){let i=t.tagList.reduce((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e),r);return e.start<=i}return!1}(a,e,Math.min(n,i))))return a;let s=fC.search(t,fO.bind(null,r,i));return s&&(s!==e||!a)?s:a}function fO(e=0,t=0,r){if(r.start<=e&&r.start+r.duration>e)return 0;let i=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=e?1:r.start-i>e&&r.start?-1:0}var fN={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},fM={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class fF{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=cU.log.bind(cU,"[info]:"),this.warn=cU.warn.bind(cU,"[warning]:"),this.error=cU.error.bind(cU,"[error]:"),this.registerListeners()}registerListeners(){let e=this.hls;e.on(cC.ERROR,this.onError,this),e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){let e=this.hls;e&&(e.off(cC.ERROR,this.onError,this),e.off(cC.ERROR,this.onErrorOut,this),e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===h6.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var r,i,n,a;if(t.fatal)return;let s=this.hls,o=t.context;switch(t.details){case cO.FRAG_LOAD_ERROR:case cO.FRAG_LOAD_TIMEOUT:case cO.KEY_LOAD_ERROR:case cO.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case cO.FRAG_PARSING_ERROR:if(null!=(r=t.frag)&&r.gap){t.errorAction={action:fN.DoNothing,flags:fM.None};return}case cO.FRAG_GAP:case cO.FRAG_DECRYPT_ERROR:t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=fN.SendAlternateToPenaltyBox;return;case cO.LEVEL_EMPTY_ERROR:case cO.LEVEL_PARSING_ERROR:{let e=t.parent===h6.MAIN?t.level:s.loadLevel;t.details===cO.LEVEL_EMPTY_ERROR&&null!=(n=t.context)&&null!=(a=n.levelDetails)&&a.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case cO.LEVEL_LOAD_ERROR:case cO.LEVEL_LOAD_TIMEOUT:"number"==typeof(null==o?void 0:o.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case cO.AUDIO_TRACK_LOAD_ERROR:case cO.AUDIO_TRACK_LOAD_TIMEOUT:case cO.SUBTITLE_LOAD_ERROR:case cO.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){let e=s.levels[s.loadLevel];e&&(o.type===h8.AUDIO_TRACK&&e.hasAudioGroup(o.groupId)||o.type===h8.SUBTITLE_TRACK&&e.hasSubtitleGroup(o.groupId))&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=fN.SendAlternateToPenaltyBox,t.errorAction.flags=fM.MoveAllAlternatesMatchingHost)}return;case cO.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{let e=s.levels[s.loadLevel],r=null==e?void 0:e.attrs["HDCP-LEVEL"];r?t.errorAction={action:fN.SendAlternateToPenaltyBox,flags:fM.MoveAllAlternatesMatchingHDCP,hdcpLevel:r}:this.keySystemError(t)}return;case cO.BUFFER_ADD_CODEC_ERROR:case cO.REMUX_ALLOC_ERROR:case cO.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,null!=(i=t.level)?i:s.loadLevel);return;case cO.INTERNAL_EXCEPTION:case cO.BUFFER_APPENDING_ERROR:case cO.BUFFER_FULL_ERROR:case cO.LEVEL_SWITCH_ERROR:case cO.BUFFER_STALLED_ERROR:case cO.BUFFER_SEEK_OVER_HOLE:case cO.BUFFER_NUDGE_ON_STALL:t.errorAction={action:fN.DoNothing,flags:fM.None};return}t.type===cP.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){let t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){let r=fL(this.hls.config.playlistLoadPolicy,e),i=this.playlistError++;if(fI(r,i,fR(e),e.response))return{action:fN.RetryRequest,flags:fM.None,retryConfig:r,retryCount:i};let n=this.getLevelSwitchAction(e,t);return r&&(n.retryConfig=r,n.retryCount=i),n}getFragRetryOrSwitchAction(e){let t=this.hls,r=this.getVariantLevelIndex(e.frag),i=t.levels[r],{fragLoadPolicy:n,keyLoadPolicy:a}=t.config,s=fL(e.details.startsWith("key")?a:n,e),o=t.levels.reduce((e,t)=>e+t.fragmentError,0);if(i&&(e.details!==cO.FRAG_GAP&&i.fragmentError++,fI(s,o,fR(e),e.response)))return{action:fN.RetryRequest,flags:fM.None,retryConfig:s,retryCount:o};let l=this.getLevelSwitchAction(e,r);return s&&(l.retryConfig=s,l.retryCount=o),l}getLevelSwitchAction(e,t){let r=this.hls;null==t&&(t=r.loadLevel);let i=this.hls.levels[t];if(i){var n,a,s,o;let t=e.details;i.loadError++,t===cO.BUFFER_APPEND_ERROR&&i.fragmentError++;let l=-1,{levels:d,loadLevel:u,minAutoLevel:c,maxAutoLevel:h}=r;r.autoLevelEnabled||(r.loadLevel=-1);let f=null==(n=e.frag)?void 0:n.type,p=(f===h6.AUDIO&&t===cO.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===cO.BUFFER_ADD_CODEC_ERROR||t===cO.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:e})=>i.audioCodec!==e),m="video"===e.sourceBufferName&&(t===cO.BUFFER_ADD_CODEC_ERROR||t===cO.BUFFER_APPEND_ERROR)&&d.some(({codecSet:e,audioCodec:t})=>i.codecSet!==e&&i.audioCodec===t),{type:g,groupId:v}=null!=(a=e.context)?a:{};for(let r=d.length;r--;){let n=(r+u)%d.length;if(n!==u&&n>=c&&n<=h&&0===d[n].loadError){let r=d[n];if(t===cO.FRAG_GAP&&f===h6.MAIN&&e.frag){let t=d[n].details;if(t){let r=fP(e.frag,t.fragments,e.frag.start);if(null!=r&&r.gap)continue}}else if(g===h8.AUDIO_TRACK&&r.hasAudioGroup(v)||g===h8.SUBTITLE_TRACK&&r.hasSubtitleGroup(v))continue;else if(f===h6.AUDIO&&null!=(s=i.audioGroups)&&s.some(e=>r.hasAudioGroup(e))||f===h6.SUBTITLE&&null!=(o=i.subtitleGroups)&&o.some(e=>r.hasSubtitleGroup(e))||p&&i.audioCodec===r.audioCodec||!p&&i.audioCodec!==r.audioCodec||m&&i.codecSet===r.codecSet)continue;l=n;break}}if(l>-1&&r.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:fN.SendAlternateToPenaltyBox,flags:fM.None,nextAutoLevel:l}}return{action:fN.SendAlternateToPenaltyBox,flags:fM.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var r;switch(null==(r=t.errorAction)?void 0:r.action){case fN.DoNothing:break;case fN.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===cO.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0;case fN.RetryRequest:}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){let t=this.hls,r=e.errorAction;if(!r)return;let{flags:i,hdcpLevel:n,nextAutoLevel:a}=r;switch(i){case fM.None:this.switchLevel(e,a);break;case fM.MoveAllAlternatesMatchingHDCP:n&&(t.maxHdcpLevel=ff[ff.indexOf(n)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}r.resolved||this.switchLevel(e,a)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class fU{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=cU.log.bind(cU,`${t}:`),this.warn=cU.warn.bind(cU,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){let i=null==t?void 0:t.renditionReports;if(i){let n=-1;for(let r=0;r<i.length;r++){let a;let s=i[r];try{a=new self.URL(s.URI,t.url).href}catch(e){cU.warn(`Could not construct new URL for Rendition Report: ${e}`),a=s.URI||""}if(a===e){n=r;break}a===e.substring(0,a.length)&&(n=r)}if(-1!==n){let e=i[n],a=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn),s=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){let e=Math.min(t.age-t.partTarget,t.targetduration);s>=0&&e>t.partTarget&&(s+=1)}return new fv(a,s>=0?s:void 0,r&&fg(r))}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return -1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,r){let{details:i,stats:n}=t,a=self.performance.now(),s=n.loading.first?Math.max(0,a-n.loading.first):0;if(i.advancedDateTime=Date.now()-s,i.live||null!=r&&r.live){let s,o,l;if(i.reloaded(r),r&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),r&&i.fragments.length>0&&function(e,t){let r,i=null,n=e.fragments;for(let e=n.length-1;e>=0;e--){let t=n[e].initSegment;if(t){i=t;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;let a=0;if(function(e,t,r){let i=t.skippedSegments,n=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let e=n;e<=a;e++){let n=l[s+e],a=o[e];i&&!a&&e<i&&(a=t.fragments[e]=n),n&&a&&r(n,a)}}(e,t,(e,n)=>{e.relurl&&(a=e.cc-n.cc),ck(e.startPTS)&&ck(e.endPTS)&&(n.start=n.startPTS=e.startPTS,n.startDTS=e.startDTS,n.maxStartPTS=e.maxStartPTS,n.endPTS=e.endPTS,n.endDTS=e.endDTS,n.minEndPTS=e.minEndPTS,n.duration=e.endPTS-e.startPTS,n.duration&&(r=n),t.PTSKnown=t.alignedSliding=!0),n.elementaryStreams=e.elementaryStreams,n.loader=e.loader,n.stats=e.stats,e.initSegment&&(n.initSegment=e.initSegment,i=e.initSegment)}),i&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach(e=>{var t;e&&(!e.initSegment||e.initSegment.relurl===(null==(t=i)?void 0:t.relurl))&&(e.initSegment=i)}),t.skippedSegments){if(t.deltaUpdateFailed=t.fragments.some(e=>!e),t.deltaUpdateFailed){cU.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,r){let i=cL({},e);return r&&r.forEach(e=>{delete i[e]}),Object.keys(t).forEach(e=>{let r=new cG(t[e].attr,i[e]);r.isValid?i[e]=r:cU.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(t[e].attr)}"`)}),i}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges))}let s=t.fragments;if(a){cU.warn("discontinuity sliding from playlist, take drift into account");for(let e=0;e<s.length;e++)s[e].cc+=a}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,r){if(e&&t){let i=0;for(let n=0,a=e.length;n<=a;n++){let a=e[n],s=t[n+i];a&&s&&a.index===s.index&&a.fragment.sn===s.fragment.sn?r(a,s):i--}}}(e.partList,t.partList,(e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),r?fT(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):f_(e,t),s.length&&(t.totalduration=t.edge-s[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;let o=t.advancedDateTime;if(t.advanced&&o){let e=t.edge;t.driftStart||(t.driftStartTime=o,t.driftStart=e),t.driftEndTime=o,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}(r,i),!this.canLoad||!i.live)return;if(i.canBlockReload&&i.endSN&&i.advanced){let e=this.hls.config.lowLatencyMode,n=i.lastPartSn,a=i.endSN,d=i.lastPartIndex,u=n===a;-1!==d?(o=u?a+1:n,l=u?e?0:d:d+1):o=a+1;let c=i.age,h=Math.min(c+i.ageHeader-i.partTarget,1.5*i.targetduration);if(h>0){if(r&&h>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${h} with playlist age: ${i.age}`),h=0;else{let e=Math.floor(h/i.targetduration);o+=e,void 0!==l&&(l+=Math.round(h%i.targetduration/i.partTarget)),this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${c.toFixed(2)}s goal: ${h} skip sn ${e} to part ${l}`)}i.tuneInGoal=h}if(s=this.getDeliveryDirectives(i,t.deliveryDirectives,o,l),e||!u){this.loadPlaylist(s);return}}else(i.canBlockReload||i.canSkipUntil)&&(s=this.getDeliveryDirectives(i,t.deliveryDirectives,o,l));let d=this.hls.mainForwardBufferInfo,u=d?d.end-d.len:0,c=(i.edge-u)*1e3,h=function(e,t=1/0){let r=1e3*e.targetduration;if(e.updated){let i=e.fragments;if(i.length&&4*r>t){let e=1e3*i[i.length-1].duration;e<r&&(r=e)}}else r/=2;return Math.round(r)}(i,c);i.updated&&a>this.requestScheduled+h&&(this.requestScheduled=n.loading.start),void 0!==o&&i.canBlockReload?this.requestScheduled=n.loading.first+h-(1e3*i.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+h<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=h);let f=this.requestScheduled-a;f=Math.max(0,f),this.log(`reload live playlist ${e} in ${Math.round(f)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(s),f)}else this.clearTimer()}getDeliveryDirectives(e,t,r,i){let n=fg(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,i=t.part,n=fm.No),new fv(r,i,n)}checkRetry(e){let t=e.details,r=fR(e),i=e.errorAction,{action:n,retryCount:a=0,retryConfig:s}=i||{},o=!!i&&!!s&&(n===fN.RetryRequest||!i.resolved&&n===fN.SendAlternateToPenaltyBox);if(o){var l;if(this.requestScheduled=-1,a>=s.maxNumRetry)return!1;if(r&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${s.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{let e=fk(s,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),e),this.warn(`Retrying playlist loading ${a+1}/${s.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,i.resolved=!0}return o}}class fB{constructor(e,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){let r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){let e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class fj{constructor(e,t,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new fB(e),this.fast_=new fB(t),this.defaultTTFB_=i,this.ttfb_=new fB(e)}update(e,t){let{slow_:r,fast_:i,ttfb_:n}=this;r.halfLife!==e&&(this.slow_=new fB(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==t&&(this.fast_=new fB(t,i.getEstimate(),i.getTotalWeight())),n.halfLife!==e&&(this.ttfb_=new fB(e,n.getEstimate(),n.getTotalWeight()))}sample(e,t){let r=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/r;this.fast_.sample(r,i),this.slow_.sample(r,i)}sampleTTFB(e){this.ttfb_.sample(Math.sqrt(2)*Math.exp(-Math.pow(e/1e3,2)/2),Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}let f$={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},fG={};function fq(e,t){cU.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function fH(e,t,r){if("attrs"in e){let r=t.indexOf(e);if(-1!==r)return r}for(let i=0;i<t.length;i++)if(fK(e,t[i],r))return i;return -1}function fK(e,t,r){let{groupId:i,name:n,lang:a,assocLang:s,characteristics:o,default:l}=e,d=e.forced;return(void 0===i||t.groupId===i)&&(void 0===n||t.name===n)&&(void 0===a||t.lang===a)&&(void 0===a||t.assocLang===s)&&(void 0===l||t.default===l)&&(void 0===d||t.forced===d)&&(void 0===o||function(e,t=""){let r=e.split(","),i=t.split(",");return r.length===i.length&&!r.some(e=>-1===i.indexOf(e))}(o,t.characteristics))&&(void 0===r||r(e,t))}function fV(e,t){let{audioCodec:r,channels:i}=e;return(void 0===r||(t.audioCodec||"").substring(0,4)===r.substring(0,4))&&(void 0===i||i===(t.channels||"2"))}function fW(e,t,r){for(let i=t;i;i--)if(r(e[i]))return i;for(let i=t+1;i<e.length;i++)if(r(e[i]))return i;return -1}class fz{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{let e;let{fragCurrent:t,partCurrent:r,hls:i}=this,{autoLevelEnabled:n,media:a}=i;if(!t||!a)return;let s=performance.now(),o=r?r.stats:t.stats,l=r?r.duration:t.duration,d=s-o.loading.start,u=i.minAutoLevel;if(o.aborted||o.loaded&&o.loaded===o.total||t.level<=u){this.clearTimer(),this._nextAutoLevel=-1;return}if(!n||a.paused||!a.playbackRate||!a.readyState)return;let c=i.mainForwardBufferInfo;if(null===c)return;let h=this.bwEstimator.getEstimateTTFB(),f=Math.abs(a.playbackRate);if(d<=Math.max(h,l/(2*f)*1e3))return;let p=c.len/f,m=o.loading.first?o.loading.first-o.loading.start:-1,g=o.loaded&&m>-1,v=this.getBwEstimate(),y=i.levels,b=y[t.level],E=o.total||Math.max(o.loaded,Math.round(l*b.averageBitrate/8)),T=g?d-m:d;T<1&&g&&(T=Math.min(d,8*o.loaded/v));let w=g?1e3*o.loaded/T:0,x=w?(E-o.loaded)/w:8*E/v+h/1e3;if(x<=p)return;let S=w?8*w:v,A=Number.POSITIVE_INFINITY;for(e=t.level-1;e>u;e--){let t=y[e].maxBitrate;if((A=this.getTimeToLoadFrag(h/1e3,S,l*t,!y[e].details))<p)break}if(A>=x||A>10*l)return;i.nextLoadLevel=i.nextAutoLevel=e,g?this.bwEstimator.sample(d-Math.min(h,m),o.loaded):this.bwEstimator.sampleTTFB(d);let R=y[e].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>R&&this.resetEstimator(R),this.clearTimer(),cU.warn(`[abr] Fragment ${t.sn}${r?" part "+r.index:""} of level ${t.level} is loading too slowly;
      Time to underbuffer: ${p.toFixed(3)} s
      Estimated load time for current fragment: ${x.toFixed(3)} s
      Estimated load time for down switch fragment: ${A.toFixed(3)} s
      TTFB estimate: ${0|m} ms
      Current BW estimate: ${ck(v)?0|v:"Unknown"} bps
      New BW estimate: ${0|this.getBwEstimate()} bps
      Switching to level ${e} @ ${0|R} bps`),i.trigger(cC.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:r,stats:o})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(cU.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){let e=this.hls.config;return new fj(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){let{hls:e}=this;e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.FRAG_LOADING,this.onFragLoading,this),e.on(cC.FRAG_LOADED,this.onFragLoaded,this),e.on(cC.FRAG_BUFFERED,this.onFragBuffered,this),e.on(cC.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.on(cC.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(cC.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(cC.ERROR,this.onError,this)}unregisterListeners(){let{hls:e}=this;e&&(e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.FRAG_LOADING,this.onFragLoading,this),e.off(cC.FRAG_LOADED,this.onFragLoaded,this),e.off(cC.FRAG_BUFFERED,this.onFragBuffered,this),e.off(cC.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.off(cC.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(cC.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(cC.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){let r=t.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=null!=(i=t.part)?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case cO.BUFFER_ADD_CODEC_ERROR:case cO.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case cO.FRAG_LOAD_TIMEOUT:{let e=t.frag,{fragCurrent:r,partCurrent:i}=this;if(e&&r&&e.sn===r.sn&&e.level===r.level){let t=performance.now(),r=i?i.stats:e.stats,n=t-r.loading.start,a=r.loading.first?r.loading.first-r.loading.start:-1;if(r.loaded&&a>-1){let e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(n-Math.min(e,a),r.loaded)}else this.bwEstimator.sampleTTFB(n)}}}}getTimeToLoadFrag(e,t,r,i){return e+r/t+(i?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){let r=this.hls.config,{loading:i}=t.stats,n=i.end-i.start;ck(n)&&(this.lastLevelLoadSec=n/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:r}){let i=r?r.stats:t.stats;if(t.type===h6.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){let e=r?r.duration:t.duration,n=this.hls.levels[t.level],a=(n.loaded?n.loaded.bytes:0)+i.loaded,s=(n.loaded?n.loaded.duration:0)+e;n.loaded={bytes:a,duration:s},n.realBitrate=Math.round(8*a/s)}if(t.bitrateTest){let e={stats:i,frag:t,part:r,id:t.type};this.onFragBuffered(cC.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){let{frag:r,part:i}=t,n=null!=i&&i.stats.loaded?i.stats:r.stats;if(n.aborted||this.ignoreFragment(r))return;let a=n.parsing.end-n.loading.start-Math.min(n.loading.first-n.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,n.loaded),n.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==h6.MAIN||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){let{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,n=this.findBestLevel(r,t,e,0,i,1,1);if(n>-1)return n;let a=this.hls.firstLevel,s=Math.min(Math.max(a,t),e);return cU.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${s}`),s}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){let e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(-1!==e&&(!t||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;let i=t&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){let t=this.hls.levels;if(t.length>Math.max(e,i)&&t[e].loadError<=t[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){let{fragCurrent:e,partCurrent:t,hls:r}=this,{maxAutoLevel:i,config:n,minAutoLevel:a}=r,s=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay(),d=n.abrBandWidthFactor,u=n.abrBandWidthUpFactor;if(l){let e=this.findBestLevel(o,a,i,l,0,d,u);if(e>=0)return e}let c=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay;if(!l){let e=this.bitrateTestDelay;e&&(c=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-e,cU.info(`[abr] bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*c)} ms`),d=u=1)}let h=this.findBestLevel(o,a,i,l,c,d,u);if(cU.info(`[abr] ${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`),h>-1)return h;let f=r.levels[a],p=r.levels[r.loadLevel];return(null==f?void 0:f.bitrate)<(null==p?void 0:p.bitrate)?a:r.loadLevel}getStarvationDelay(){let e=this.hls,t=e.media;if(!t)return 1/0;let r=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,i,n,a,s){var o,l;let d;let u=i+n,c=this.lastLoadedFragLevel,h=-1===c?this.hls.firstLevel:c,{fragCurrent:f,partCurrent:p}=this,{levels:m,allAudioTracks:g,loadLevel:v,config:y}=this.hls;if(1===m.length)return 0;let b=m[h],E=!!(null!=b&&null!=(o=b.details)&&o.live),T=-1===v||-1===c,w="SDR",x=(null==b?void 0:b.frameRate)||0,{audioPreference:S,videoPreference:A}=y,R=this.audioTracksByGroup||(this.audioTracksByGroup=g.reduce((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);let i=t.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}}));if(T){if(-1!==this.firstSelection)return this.firstSelection;let i=function(e,t,r,i,n){var a;let s,o;let l=Object.keys(e),d=null==i?void 0:i.channels,u=null==i?void 0:i.audioCodec,c=d&&2===parseInt(d),h=!0,f=!1,p=1/0,m=1/0,g=1/0,v=0,y=[],{preferHDR:b,allowedVideoRanges:E}=(s=!1,o=[],(a=t)&&(s="SDR"!==a,o=[a]),n&&(o=n.allowedVideoRanges||fp.slice(0),o=(s=void 0!==n.preferHDR?n.preferHDR:function(){if("function"==typeof matchMedia){let e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}())?o.filter(e=>"SDR"!==e):["SDR"]),{preferHDR:s,allowedVideoRanges:o});for(let t=l.length;t--;){let r=e[l[t]];h=r.channels[2]>0,p=Math.min(p,r.minHeight),m=Math.min(m,r.minFramerate),g=Math.min(g,r.minBitrate);let i=E.filter(e=>r.videoRanges[e]>0);i.length>0&&(f=!0,y=i)}p=ck(p)?p:0,m=ck(m)?m:0;let T=Math.max(1080,p),w=Math.max(30,m);return r=Math.max(g=ck(g)?g:r,r),f||(t=void 0,y=[]),{codecSet:l.reduce((t,i)=>{let n=e[i];if(i===t)return t;if(n.minBitrate>r)return fq(i,`min bitrate of ${n.minBitrate} > current estimate of ${r}`),t;if(!n.hasDefaultAudio)return fq(i,"no renditions with default or auto-select sound found"),t;if(u&&i.indexOf(u.substring(0,4))%5!=0)return fq(i,`audio codec preference "${u}" not found`),t;if(d&&!c){if(!n.channels[d])return fq(i,`no renditions with ${d} channel sound found (channels options: ${Object.keys(n.channels)})`),t}else if((!u||c)&&h&&0===n.channels["2"])return fq(i,"no renditions with stereo sound found"),t;return n.minHeight>T?(fq(i,`min resolution of ${n.minHeight} > maximum of ${T}`),t):n.minFramerate>w?(fq(i,`min framerate of ${n.minFramerate} > maximum of ${w}`),t):y.some(e=>n.videoRanges[e]>0)?n.maxScore<v?(fq(i,`max score of ${n.maxScore} < selected max of ${v}`),t):t&&(hq(i)>=hq(t)||n.fragmentError>e[t].fragmentError)?t:(v=n.maxScore,i):(fq(i,`no variants with VIDEO-RANGE of ${JSON.stringify(y)} found`),t)},void 0),videoRanges:y,preferHDR:b,minFramerate:m,minBitrate:g}}(this.codecTiers||(this.codecTiers=m.slice(t,r+1).reduce((e,t)=>{if(!t.codecSet)return e;let r=t.audioGroups,i=e[t.codecSet];i||(e[t.codecSet]=i={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!r,fragmentError:0}),i.minBitrate=Math.min(i.minBitrate,t.bitrate);let n=Math.min(t.height,t.width);return i.minHeight=Math.min(i.minHeight,n),i.minFramerate=Math.min(i.minFramerate,t.frameRate),i.maxScore=Math.max(i.maxScore,t.score),i.fragmentError+=t.fragmentError,i.videoRanges[t.videoRange]=(i.videoRanges[t.videoRange]||0)+1,r&&r.forEach(e=>{if(!e)return;let t=R.groups[e];t&&(i.hasDefaultAudio=i.hasDefaultAudio||R.hasDefaultAudio?t.hasDefault:t.hasAutoSelect||!R.hasDefaultAudio&&!R.hasAutoSelectAudio,Object.keys(t.channels).forEach(e=>{i.channels[e]=(i.channels[e]||0)+t.channels[e]}))}),e},{})),w,e,S,A),{codecSet:n,videoRanges:a,minFramerate:s,minBitrate:o,preferHDR:l}=i;d=n,w=l?a[a.length-1]:a[0],x=s,e=Math.max(e,o),cU.log(`[abr] picked start tier ${JSON.stringify(i)}`)}else d=null==b?void 0:b.codecSet,w=null==b?void 0:b.videoRange;let L=p?p.duration:f?f.duration:0,k=this.bwEstimator.getEstimateTTFB()/1e3,D=[];for(let o=r;o>=t;o--){let t;let f=m[o],g=o>h;if(!f)continue;if(y.useMediaCapabilities&&!f.supportedResult&&!f.supportedPromise){let t=navigator.mediaCapabilities;"function"==typeof(null==t?void 0:t.decodingInfo)&&function(e,t,r,i,n,a){let s=e.audioCodec?e.audioGroups:null,o=null==a?void 0:a.audioCodec,l=null==a?void 0:a.channels,d=l?parseInt(l):o?1/0:2,u=null;if(null!=s&&s.length)try{u=1===s.length&&s[0]?t.groups[s[0]].channels:s.reduce((e,r)=>{if(r){let i=t.groups[r];if(!i)throw Error(`Audio track group ${r} not found`);Object.keys(i.channels).forEach(t=>{e[t]=(e[t]||0)+i.channels[t]})}return e},{2:0})}catch(e){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(i,30)||"SDR"!==e.videoRange&&e.videoRange!==r||e.bitrate>Math.max(n,8e6))||!!u&&ck(d)&&Object.keys(u).some(e=>parseInt(e)>d)}(f,R,w,x,e,S)?(f.supportedPromise=function(e,t,r){let i=e.videoCodec,n=e.audioCodec;if(!i||!n||!r)return Promise.resolve(f$);let a={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},s=e.videoRange;"SDR"!==s&&(a.transferFunction=s.toLowerCase());let o=i.split(",").map(e=>({type:"media-source",video:cR(cR({},a),{},{contentType:h$(e,"video")})}));return n&&e.audioGroups&&e.audioGroups.forEach(e=>{var r;e&&(null==(r=t.groups[e])||r.tracks.forEach(t=>{if(t.groupId===e){let e=parseFloat(t.channels||"");ck(e)&&e>2&&o.push.apply(o,n.split(",").map(t=>({type:"media-source",audio:{contentType:h$(t,"audio"),channels:""+e}})))}}))}),Promise.all(o.map(e=>{let t=function(e){let{audio:t,video:r}=e,i=r||t;if(i){let e=i.contentType.split('"')[1];if(r)return`r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${e}_${Math.ceil(r.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${e}`}return""}(e);return fG[t]||(fG[t]=r.decodingInfo(e))})).then(e=>({supported:!e.some(e=>!e.supported),configurations:o,decodingInfoResults:e})).catch(e=>({supported:!1,configurations:o,decodingInfoResults:[],error:e}))}(f,R,t),f.supportedPromise.then(e=>{if(!this.hls)return;f.supportedResult=e;let t=this.hls.levels,r=t.indexOf(f);e.error?cU.warn(`[abr] MediaCapabilities decodingInfo error: "${e.error}" for level ${r} ${JSON.stringify(e)}`):!e.supported&&(cU.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${r} ${JSON.stringify(e)}`),r>-1&&t.length>1&&(cU.log(`[abr] Removing unsupported level ${r}`),this.hls.removeLevel(r)))})):f.supportedResult=f$}if(d&&f.codecSet!==d||w&&f.videoRange!==w||g&&x>f.frameRate||!g&&x>0&&x<f.frameRate||f.supportedResult&&!(null!=(l=f.supportedResult.decodingInfoResults)&&l[0].smooth)){D.push(o);continue}let A=f.details,I=(p?null==A?void 0:A.partTarget:null==A?void 0:A.averagetargetduration)||L;t=g?s*e:a*e;let C=L&&i>=2*L&&0===n?m[o].averageBitrate:m[o].maxBitrate,P=this.getTimeToLoadFrag(k,t,C*I,void 0===A);if(t>=C&&(o===c||0===f.loadError&&0===f.fragmentError)&&(P<=k||!ck(P)||E&&!this.bitrateTestDelay||P<u)){let e=this.forcedAutoLevel;return o!==v&&(-1===e||e!==v)&&(D.length&&cU.trace(`[abr] Skipped level(s) ${D.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${m[D[0]].codecs}" ${m[D[0]].videoRange}; not compatible with "${b.codecs}" ${w}`),cU.info(`[abr] switch candidate:${h}->${o} adjustedbw(${Math.round(t)})-bitrate=${Math.round(t-C)} ttfb:${k.toFixed(1)} avgDuration:${I.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${P.toFixed(1)} firstSelection:${T} codecSet:${d} videoRange:${w} hls.loadLevel:${v}`)),T&&(this.firstSelection=o),o}}return -1}set nextAutoLevel(e){let{maxAutoLevel:t,minAutoLevel:r}=this.hls,i=Math.min(Math.max(e,r),t);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class fY{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var fX={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class fQ{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){let{hls:e}=this;e.on(cC.BUFFER_APPENDED,this.onBufferAppended,this),e.on(cC.FRAG_BUFFERED,this.onFragBuffered,this),e.on(cC.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){let{hls:e}=this;e.off(cC.BUFFER_APPENDED,this.onBufferAppended,this),e.off(cC.FRAG_BUFFERED,this.onFragBuffered,this),e.off(cC.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){let r=this.activePartLists[t];if(r)for(let t=r.length;t--;){let i=r[t];if(!i)break;let n=i.end;if(i.start<=e&&null!==n&&e<=n)return i}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){let{fragments:r}=this,i=Object.keys(r);for(let n=i.length;n--;){let a=r[i[n]];if((null==a?void 0:a.body.type)===t&&a.buffered){let t=a.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,r,i){this.timeRanges&&(this.timeRanges[e]=t);let n=(null==i?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(i=>{let a=this.fragments[i];if(!a||n>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===r&&this.removeFragment(a.body);return}let s=a.range[e];s&&s.time.some(e=>{let r=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return r&&this.removeFragment(a.body),r})})}detectPartialFragments(e){let t=this.timeRanges,{frag:r,part:i}=e;if(!t||"initSegment"===r.sn)return;let n=fZ(r),a=this.fragments[n];if(!a||a.buffered&&r.gap)return;let s=!r.relurl;Object.keys(t).forEach(e=>{let n=r.elementaryStreams[e];if(!n)return;let o=t[e],l=s||!0===n.partial;a.range[e]=this.getBufferedTimes(r,i,l,o)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=r.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),fJ(a)||this.removeParts(r.sn-1,r.type)):this.removeFragment(a.body)}removeParts(e,t){let r=this.activePartLists[t];r&&(this.activePartLists[t]=r.filter(t=>t.fragment.sn>=e))}fragBuffered(e,t){let r=fZ(e),i=this.fragments[r];!i&&t&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,r,i){let n={time:[],partial:r},a=e.start,s=e.end,o=e.minEndPTS||s,l=e.maxStartPTS||a;for(let e=0;e<i.length;e++){let t=i.start(e)-this.bufferPadding,r=i.end(e)+this.bufferPadding;if(l>=t&&o<=r){n.time.push({startPTS:Math.max(a,i.start(e)),endPTS:Math.min(s,i.end(e))});break}if(a<r&&s>t){let t=Math.max(a,i.start(e)),r=Math.min(s,i.end(e));r>t&&(n.partial=!0,n.time.push({startPTS:t,endPTS:r}))}else if(s<=t)break}return n}getPartialFragment(e){let t,r,i,n=null,a=0,{bufferPadding:s,fragments:o}=this;return Object.keys(o).forEach(l=>{let d=o[l];d&&fJ(d)&&(r=d.body.start-s,i=d.body.end+s,e>=r&&e<=i&&a<=(t=Math.min(e-r,i-e))&&(n=d.body,a=t))}),n}isEndListAppended(e){let t=this.endListFragments[e];return void 0!==t&&(t.buffered||fJ(t))}getState(e){let t=fZ(e),r=this.fragments[t];return r?r.buffered?fJ(r)?fX.PARTIAL:fX.OK:fX.APPENDING:fX.NOT_LOADED}isTimeBuffered(e,t,r){let i,n;for(let a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,e>=i&&t<=n)return!0;if(t<=i)break}return!1}onFragLoaded(e,t){let{frag:r,part:i}=t;if("initSegment"===r.sn||r.bitrateTest)return;let n=fZ(r);this.fragments[n]={body:r,appendedPTS:null,loaded:i?null:t,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){let{frag:r,part:i,timeRanges:n}=t;if("initSegment"===r.sn)return;let a=r.type;if(i){let e=this.activePartLists[a];e||(this.activePartLists[a]=e=[]),e.push(i)}this.timeRanges=n,Object.keys(n).forEach(e=>{let t=n[e];this.detectEvictedFragments(e,t,a,i)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){let t=fZ(e);return!!this.fragments[t]}hasParts(e){var t;return!!(null!=(t=this.activePartLists[e])&&t.length)}removeFragmentsInRange(e,t,r,i,n){(!i||this.hasGaps)&&Object.keys(this.fragments).forEach(a=>{let s=this.fragments[a];if(!s)return;let o=s.body;o.type===r&&(!i||o.gap)&&o.start<t&&o.end>e&&(s.buffered||n)&&this.removeFragment(o)})}removeFragment(e){let t=fZ(e);e.stats.loaded=0,e.clearElementaryStreamInfo();let r=this.activePartLists[e.type];if(r){let t=e.sn;this.activePartLists[e.type]=r.filter(e=>e.fragment.sn!==t)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function fJ(e){var t,r,i;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(r=e.range.audio)?void 0:r.partial)||(null==(i=e.range.audiovideo)?void 0:i.partial))}function fZ(e){return`${e.type}_${e.level}_${e.sn}`}let f0={length:0,start:()=>0,end:()=>0};class f1{static isBuffered(e,t){try{if(e){let r=f1.getBuffered(e);for(let e=0;e<r.length;e++)if(t>=r.start(e)&&t<=r.end(e))return!0}}catch(e){}return!1}static bufferInfo(e,t,r){try{if(e){let i;let n=f1.getBuffered(e),a=[];for(i=0;i<n.length;i++)a.push({start:n.start(i),end:n.end(i)});return this.bufferedInfo(a,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,r){let i;t=Math.max(0,t),e.sort(function(e,t){return e.start-t.start||t.end-e.end});let n=[];if(r)for(let t=0;t<e.length;t++){let i=n.length;if(i){let a=n[i-1].end;e[t].start-a<r?e[t].end>a&&(n[i-1].end=e[t].end):n.push(e[t])}else n.push(e[t])}else n=e;let a=0,s=t,o=t;for(let e=0;e<n.length;e++){let l=n[e].start,d=n[e].end;if(t+r>=l&&t<d)s=l,a=(o=d)-t;else if(t+r<l){i=l;break}}return{len:a,start:s||0,end:o||0,nextStart:i}}static getBuffered(e){try{return e.buffered}catch(e){return cU.log("failed to get media.buffered",e),f0}}}class f2{constructor(e,t,r,i=0,n=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=f4(),this.buffering={audio:f4(),video:f4(),audiovideo:f4()},this.level=e,this.sn=t,this.id=r,this.size=i,this.part=n,this.partial=a}}function f4(){return{start:0,executeStart:0,executeEnd:0,end:0}}function f3(e,t){for(let i=0,n=e.length;i<n;i++){var r;if((null==(r=e[i])?void 0:r.cc)===t)return e[i]}return null}function f5(e,t){if(e){let r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}function f8(e,t){let r=t.fragments;for(let t=0,i=r.length;t<i;t++)f5(r[t],e);t.fragmentHint&&f5(t.fragmentHint,e),t.alignedSliding=!0}function f6(e,t){let r,i;if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;let n=e.fragments,a=t.fragments;if(!n.length||!a.length)return;let s=Math.min(t.endCC,e.endCC);t.startCC<s&&e.startCC<s&&(r=f3(a,s),i=f3(n,s)),r&&i||(i=f3(n,(r=a[Math.floor(a.length/2)]).cc)||n[Math.floor(n.length/2)]);let o=r.programDateTime,l=i.programDateTime;o&&l&&f8((l-o)/1e3-(i.start-r.start),e)}class f9{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){let r=e.url;if(!r)return Promise.reject(new pt({type:cP.NETWORK_ERROR,details:cO.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();let i=this.config,n=i.fLoader,a=i.loader;return new Promise((s,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(e=>"GAP"===e[0])){o(pe(e));return}e.gap=!1}let l=this.loader=e.loader=n?new n(i):new a(i),d=f7(e),u=fD(i.fragLoadPolicy.default),c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:131072};e.stats=l.stats,l.load(d,c,{onSuccess:(t,r,i,n)=>{this.resetLoader(e,l);let a=t.data;i.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(a.slice(0,16)),a=a.slice(16)),s({frag:e,part:null,payload:a,networkDetails:n})},onError:(t,i,n,a)=>{this.resetLoader(e,l),o(new pt({type:cP.NETWORK_ERROR,details:cO.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:cR({url:r,data:void 0},t),error:Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:n,stats:a}))},onAbort:(t,r,i)=>{this.resetLoader(e,l),o(new pt({type:cP.NETWORK_ERROR,details:cO.INTERNAL_ABORTED,fatal:!1,frag:e,error:Error("Aborted"),networkDetails:i,stats:t}))},onTimeout:(t,r,i)=>{this.resetLoader(e,l),o(new pt({type:cP.NETWORK_ERROR,details:cO.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:Error(`Timeout after ${c.timeout}ms`),networkDetails:i,stats:t}))},onProgress:(r,i,n,a)=>{t&&t({frag:e,part:null,payload:n,networkDetails:a})}})})}loadPart(e,t,r){this.abort();let i=this.config,n=i.fLoader,a=i.loader;return new Promise((s,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){o(pe(e,t));return}let l=this.loader=e.loader=n?new n(i):new a(i),d=f7(e,t),u=fD(i.fragLoadPolicy.default),c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:131072};t.stats=l.stats,l.load(d,c,{onSuccess:(i,n,a,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);let d={frag:e,part:t,payload:i.data,networkDetails:o};r(d),s(d)},onError:(r,i,n,a)=>{this.resetLoader(e,l),o(new pt({type:cP.NETWORK_ERROR,details:cO.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:cR({url:d.url,data:void 0},r),error:Error(`HTTP Error ${r.code} ${r.text}`),networkDetails:n,stats:a}))},onAbort:(r,i,n)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new pt({type:cP.NETWORK_ERROR,details:cO.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:Error("Aborted"),networkDetails:n,stats:r}))},onTimeout:(r,i,n)=>{this.resetLoader(e,l),o(new pt({type:cP.NETWORK_ERROR,details:cO.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:Error(`Timeout after ${c.timeout}ms`),networkDetails:n,stats:r}))}})})}updateStatsFromPart(e,t){let r=e.stats,i=t.stats,n=i.total;if(r.loaded+=i.loaded,n){let i=Math.round(e.duration/t.duration),a=Math.min(Math.round(r.loaded/n),i),s=(i-a)*Math.round(r.loaded/a);r.total=r.loaded+s}else r.total=Math.max(r.loaded,r.total);let a=r.loading,s=i.loading;a.start?a.first+=s.first-s.start:(a.start=s.start,a.first=s.first),a.end=s.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function f7(e,t=null){let r=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},n=r.byteRangeStartOffset,a=r.byteRangeEndOffset;if(ck(n)&&ck(a)){var s;let t=n,r=a;if("initSegment"===e.sn&&(null==(s=e.decryptdata)?void 0:s.method)==="AES-128"){let e=a-n;e%16&&(r=a+(16-e%16)),0!==n&&(i.resetIV=!0,t=n-16)}i.rangeStart=t,i.rangeEnd=r}return i}function pe(e,t){let r=Error(`GAP ${e.gap?"tag":"attribute"} found`),i={type:cP.MEDIA_ERROR,details:cO.FRAG_GAP,fatal:!1,frag:e,error:r,networkDetails:null};return t&&(i.part=t),(t||e).stats.aborted=!0,new pt(i)}class pt extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class pr{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class pi{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class pn{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){let t=new DataView(e),r=new Uint32Array(4);for(let e=0;e<4;e++)r[e]=t.getUint32(4*e);return r}initTable(){let e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],s=r[3],o=this.invSubMix,l=o[0],d=o[1],u=o[2],c=o[3],h=new Uint32Array(256),f=0,p=0,m=0;for(m=0;m<256;m++)m<128?h[m]=m<<1:h[m]=m<<1^283;for(m=0;m<256;m++){let r=p^p<<1^p<<2^p<<3^p<<4;r=r>>>8^255&r^99,e[f]=r,t[r]=f;let o=h[f],m=h[o],g=h[m],v=257*h[r]^16843008*r;i[f]=v<<24|v>>>8,n[f]=v<<16|v>>>16,a[f]=v<<8|v>>>24,s[f]=v,v=16843009*g^65537*m^257*o^16843008*f,l[r]=v<<24|v>>>8,d[r]=v<<16|v>>>16,u[r]=v<<8|v>>>24,c[r]=v,f?(f=o^h[h[h[g^o]]],p^=h[h[p]]):f=p=1}}expandKey(e){let t,r,i,n;let a=this.uint8ArrayToUint32Array_(e),s=!0,o=0;for(;o<a.length&&s;)s=a[o]===this.key[o],o++;if(s)return;this.key=a;let l=this.keySize=a.length;if(4!==l&&6!==l&&8!==l)throw Error("Invalid aes key size="+l);let d=this.ksRows=(l+6+1)*4,u=this.keySchedule=new Uint32Array(d),c=this.invKeySchedule=new Uint32Array(d),h=this.sBox,f=this.rcon,p=this.invSubMix,m=p[0],g=p[1],v=p[2],y=p[3];for(t=0;t<d;t++){if(t<l){i=u[t]=a[t];continue}n=i,t%l==0?n=(h[(n=n<<8|n>>>24)>>>24]<<24|h[n>>>16&255]<<16|h[n>>>8&255]<<8|h[255&n])^f[t/l|0]<<24:l>6&&t%l==4&&(n=h[n>>>24]<<24|h[n>>>16&255]<<16|h[n>>>8&255]<<8|h[255&n]),u[t]=i=(u[t-l]^n)>>>0}for(r=0;r<d;r++)t=d-r,n=3&r?u[t]:u[t-4],r<4||t<=4?c[r]=n:c[r]=m[h[n>>>24]]^g[h[n>>>16&255]]^v[h[n>>>8&255]]^y[h[255&n]],c[r]=c[r]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,r){let i,n,a,s,o,l,d,u,c,h,f,p,m,g;let v=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,E=this.invSubMix,T=E[0],w=E[1],x=E[2],S=E[3],A=this.uint8ArrayToUint32Array_(r),R=A[0],L=A[1],k=A[2],D=A[3],I=new Int32Array(e),C=new Int32Array(I.length),P=this.networkToHostOrderSwap;for(;t<I.length;){for(g=1,c=P(I[t]),h=P(I[t+1]),f=P(I[t+2]),p=P(I[t+3]),o=c^y[0],l=p^y[1],d=f^y[2],u=h^y[3],m=4;g<v;g++)i=T[o>>>24]^w[l>>16&255]^x[d>>8&255]^S[255&u]^y[m],n=T[l>>>24]^w[d>>16&255]^x[u>>8&255]^S[255&o]^y[m+1],a=T[d>>>24]^w[u>>16&255]^x[o>>8&255]^S[255&l]^y[m+2],s=T[u>>>24]^w[o>>16&255]^x[l>>8&255]^S[255&d]^y[m+3],o=i,l=n,d=a,u=s,m+=4;i=b[o>>>24]<<24^b[l>>16&255]<<16^b[d>>8&255]<<8^b[255&u]^y[m],n=b[l>>>24]<<24^b[d>>16&255]<<16^b[u>>8&255]<<8^b[255&o]^y[m+1],a=b[d>>>24]<<24^b[u>>16&255]<<16^b[o>>8&255]<<8^b[255&l]^y[m+2],s=b[u>>>24]<<24^b[o>>16&255]<<16^b[l>>8&255]<<8^b[255&d]^y[m+3],C[t]=P(i^R),C[t+1]=P(s^L),C[t+2]=P(a^k),C[t+3]=P(n^D),R=c,L=h,k=f,D=p,t+=4}return C.buffer}}class pa{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{let e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(e){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){let{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;let r=new Uint8Array(e);return(this.reset(),this.removePKCS7Padding)?function(e){let t=e.byteLength,r=t&&new DataView(e.buffer).getUint8(t-1);return r?c8(e,0,t-r):e}(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r){return this.useSoftware?new Promise((i,n)=>{this.softwareDecrypt(new Uint8Array(e),t,r);let a=this.flush();a?i(a.buffer):n(Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r)}softwareDecrypt(e,t,r){let{currentIV:i,currentResult:n,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=hR(a,e),this.remainderData=null);let s=this.getValidChunk(e);if(!s.length)return null;i&&(r=i);let o=this.softwareDecrypter;return(o||(o=this.softwareDecrypter=new pn),o.expandKey(t),this.currentResult=o.decrypt(s.buffer,0,r),this.currentIV=c8(s,-16).buffer,n)?n:null}webCryptoDecrypt(e,t,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r));this.key=t,this.fastAesKey=new pi(this.subtle,t)}return this.fastAesKey.expandKey().then(t=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new pr(this.subtle,new Uint8Array(r)).decrypt(e.buffer,t)):Promise.reject(Error("web crypto not initialized"))).catch(i=>(cU.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,r)))}onWebCryptoError(e,t,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r);let i=this.flush();if(i)return i.buffer;throw Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e,r=e.length-e.length%16;return r!==e.length&&(t=c8(e,0,r),this.remainderData=c8(e,r)),t}logOnce(e){this.logEnabled&&(cU.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}let ps={},po={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class pl extends fY{constructor(e,t,r,i,n){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=po.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=n,this.logPrefix=i,this.log=cU.log.bind(cU,`${i}:`),this.warn=cU.warn.bind(cU,`${i}:`),this.hls=e,this.fragmentLoader=new f9(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new pa(e.config),e.on(cC.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);let e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=po.STOPPED}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;let r=t.partList;if(null!=r&&r.length){let e=r[r.length-1];return f1.isBuffered(this.media,e.start+e.duration/2)}let i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&null!==this.levelLastLoaded){var e;return null==(e=this.levelLastLoaded)?void 0:e.details}}onMediaAttached(e,t){let r=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);let i=this.config;this.levels&&i.autoStartLoad&&this.state===po.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){let e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){let{config:e,fragCurrent:t,media:r,mediaBuffer:i,state:n}=this,a=r?r.currentTime:0,s=f1.bufferInfo(i||r,a,e.maxBufferHole);if(this.log(`media seeking to ${ck(a)?a.toFixed(3):a}, state: ${n}`),this.state===po.ENDED)this.resetLoadingState();else if(t){let r=e.maxFragLookUpTolerance,i=t.start-r,n=t.start+t.duration+r;if(!s.len||n<s.start||i>s.end){let e=a>n;(a<i||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||s.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(cC.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=po.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){this._doFragLoad(e,t,r,t=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${t.part?" p: "+t.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(t)}).then(t=>{if(!t)return;let r=this.state;if(this.fragContextChanged(e)){r!==po.FRAG_LOADING&&(this.fragCurrent||r!==po.PARSING)||(this.fragmentTracker.removeFragment(e),this.state=po.IDLE);return}"payload"in t&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(cC.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t)}).catch(t=>{this.state!==po.STOPPED&&this.state!==po.ERROR&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;let{fragmentTracker:r}=this;if(r.getState(e)===fX.APPENDING){let t=e.type,i=this.getFwdBufferInfo(this.mediaBuffer,t),n=Math.max(e.duration,i?i.len:this.config.maxBufferLength),a=this.backtrackFragment;(1==(a?e.sn-a.sn:0)||this.reduceMaxBufferLength(n,e.duration))&&r.removeFragment(e)}else(null==(t=this.mediaBuffer)?void 0:t.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===fX.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){let t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,r=null){e-t&&this.hls.trigger(cC.BUFFER_FLUSHING,{startOffset:e,endOffset:t,type:r})}_loadInitSegment(e,t){this._doFragLoad(e,t).then(t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw Error("init load aborted");return t}).then(t=>{let{hls:r}=this,{payload:i}=t,n=e.decryptdata;if(i&&i.byteLength>0&&null!=n&&n.key&&n.iv&&"AES-128"===n.method){let a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer).catch(t=>{throw r.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t}).then(i=>{let n=self.performance.now();return r.trigger(cC.FRAG_DECRYPTED,{frag:e,payload:i,stats:{tstart:a,tdecrypt:n}}),t.payload=i,this.completeInitSegmentLoad(t)})}return this.completeInitSegmentLoad(t)}).catch(t=>{this.state!==po.STOPPED&&this.state!==po.ERROR&&(this.warn(t),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){let{levels:t}=this;if(!t)throw Error("init load aborted, missing levels");let r=e.frag.stats;this.state=po.IDLE,e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){let{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var r,i,n,a,s;let o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===h6.MAIN?"level":"track"} ${e.level} (frag:[${(null!=(r=e.startPTS)?r:NaN).toFixed(3)}-${(null!=(i=e.endPTS)?i:NaN).toFixed(3)}] > buffer:${o?ps.toString(f1.getBuffered(o)):"(detached)"})`),"initSegment"!==e.sn){if(e.type!==h6.SUBTITLE){let t=e.elementaryStreams;if(!Object.keys(t).some(e=>!!t[e])){this.state=po.IDLE;return}}let t=null==(s=this.levels)?void 0:s[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=po.IDLE,o&&(!this.loadedmetadata&&e.type==h6.MAIN&&o.buffered.length&&(null==(n=this.fragCurrent)?void 0:n.sn)===(null==(a=this.fragPrevious)?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){let{transmuxer:t}=this;if(!t)return;let{frag:r,part:i,partsLoaded:n}=e,a=!n||0===n.length||n.some(e=>!e),s=new f2(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(s)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,i){var n;let a;let s=null==t?void 0:t.details;if(!this.levels||!s)throw Error(`frag load aborted, missing level${s?"":" detail"}s`);let o=null;if(e.encrypted&&!(null!=(n=e.decryptdata)&&n.key)?(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state=po.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(cC.KEY_LOADED,e),this.state===po.KEY_LOADING&&(this.state=po.IDLE),e}),this.hls.trigger(cC.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(o=Promise.reject(Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(e,s.encryptedFragments),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){let n=s.partList;if(n&&i){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);let a=this.getNextPart(n,e,r);if(a>-1){let l;let d=n[a];return(this.log(`Loading part sn: ${e.sn} p: ${d.index} cc: ${e.cc} of playlist [${s.startSN}-${s.endSN}] parts [0-${a}-${n.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=d.start+d.duration,this.state=po.FRAG_LOADING,l=o?o.then(r=>!r||this.fragContextChanged(r.frag)?null:this.doFragPartsLoad(e,d,t,i)).catch(e=>this.handleFragLoadError(e)):this.doFragPartsLoad(e,d,t,i).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(cC.FRAG_LOADING,{frag:e,part:d,targetBufferTime:r}),null===this.fragCurrent)?Promise.reject(Error("frag load aborted, context changed in FRAG_LOADING parts")):l}if(!e.url||this.loadedEndOfParts(n,r))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${s?"of ["+s.startSN+"-"+s.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),ck(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=po.FRAG_LOADING;let l=this.config.progressive;return(a=l&&o?o.then(t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,i)).catch(e=>this.handleFragLoadError(e)):Promise.all([this.fragmentLoader.load(e,l?i:void 0),o]).then(([e])=>(!l&&e&&i&&i(e),e)).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(cC.FRAG_LOADING,{frag:e,targetBufferTime:r}),null===this.fragCurrent)?Promise.reject(Error("frag load aborted, context changed in FRAG_LOADING")):a}doFragPartsLoad(e,t,r,i){return new Promise((n,a)=>{var s;let o=[],l=null==(s=r.details)?void 0:s.partList,d=t=>{this.fragmentLoader.loadPart(e,t,i).then(i=>{o[t.index]=i;let a=i.part;this.hls.trigger(cC.FRAG_LOADED,i);let s=fx(r,e.sn,t.index+1)||fS(l,e.sn,t.index+1);if(!s)return n({frag:e,part:a,partsLoaded:o});d(s)}).catch(a)};d(t)})}handleFragLoadError(e){if("data"in e){let t=e.data;e.data&&t.details===cO.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(cC.ERROR,t)}else this.hls.trigger(cC.ERROR,{type:cP.OTHER_ERROR,details:cO.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){let t=this.getCurrentContext(e);if(!t||this.state!==po.PARSING){this.fragCurrent||this.state===po.STOPPED||this.state===po.ERROR||(this.state=po.IDLE);return}let{frag:r,part:i,level:n}=t,a=self.performance.now();r.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(r,i,n,e.partial)}getCurrentContext(e){let{levels:t,fragCurrent:r}=this,{level:i,sn:n,part:a}=e;if(!(null!=t&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${n} of level ${i}. The current chunk will not be buffered.`),null;let s=t[i],o=a>-1?fx(s,n,a):null,l=o?o.fragment:function(e,t,r){if(!(null!=e&&e.details))return null;let i=e.details,n=i.fragments[t-i.startSN];return n||(n=i.fragmentHint)&&n.sn===t?n:t<i.startSN&&r&&r.sn===t?r:null}(s,n,r);return l?(r&&r!==l&&(l.stats=r.stats),{frag:l,part:o,level:s}):null}bufferFragmentData(e,t,r,i,n){var a;if(!e||this.state!==po.PARSING)return;let{data1:s,data2:o}=e,l=s;if(s&&o&&(l=hR(s,o)),!(null!=(a=l)&&a.length))return;let d={type:e.type,frag:t,part:r,chunkMeta:i,parent:t.type,data:l};if(this.hls.trigger(cC.BUFFER_APPENDING,d),e.dropped&&e.independent&&!r){if(n)return;this.flushBufferGap(t)}}flushBufferGap(e){let t=this.media;if(!t)return;if(!f1.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}let r=t.currentTime,i=f1.bufferInfo(t,r,0),n=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),s=Math.max(Math.min(e.start-a,i.end-a),r+a);e.start-s>a&&this.flushMainBuffer(s,e.start)}getFwdBufferInfo(e,t){let r=this.getLoadPosition();return ck(r)?this.getFwdBufferInfoAtPos(e,r,t):null}getFwdBufferInfoAtPos(e,t,r){let{config:{maxBufferHole:i}}=this,n=f1.bufferInfo(e,t,i);if(0===n.len&&void 0!==n.nextStart){let a=this.fragmentTracker.getBufferedFrag(t,r);if(a&&n.nextStart<a.end)return f1.bufferInfo(e,t,Math.max(n.nextStart,i))}return n}getMaxBufferLength(e){let{config:t}=this;return Math.min(e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){let r=this.config,i=Math.max(Math.min(e-t,r.maxBufferLength),t),n=Math.max(e-3*t,r.maxMaxBufferLength/2,i);return n>=i&&(r.maxMaxBufferLength=n,this.warn(`Reduce max buffer length to ${n}s`),!0)}getAppendedFrag(e,t=h6.MAIN){let r=this.fragmentTracker.getAppendedFrag(e,h6.MAIN);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){let r;let i=t.fragments,n=i.length;if(!n)return null;let{config:a}=this,s=i[0].start;if(t.live){let o=a.initialLiveManifestSize;if(n<o)return this.warn(`Not enough fragments to start playback (have: ${n}, need: ${o})`),null;(t.PTSKnown||this.startFragRequested||-1!==this.startPosition)&&!(e<s)||(r=this.getInitialLiveFragment(t,i),this.startPosition=this.nextLoadPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=s&&(r=i[0]);if(!r){let i=a.lowLatencyMode?t.partEnd:t.fragmentEnd;r=this.getFragmentAtPosition(e,i,t)}return this.mapToInitFragWhenRequired(r)}isLoopLoading(e,t){let r=this.fragmentTracker.getState(e);return(r===fX.OK||r===fX.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,i,n){let a=e.gap,s=this.getNextFragment(this.nextLoadPosition,t);if(null===s)return s;if(e=s,a&&e&&!e.gap&&r.nextStart){let t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i);if(null!==t&&r.len+t.len>=n)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,r){let i=-1,n=!1,a=!0;for(let s=0,o=e.length;s<o;s++){let o=e[s];if(a=a&&!o.independent,i>-1&&r<o.start)break;let l=o.loaded;l?i=-1:(n||o.independent||a)&&o.fragment===t&&(i=s),n=l}return i}loadedEndOfParts(e,t){let r=e[e.length-1];return r&&t>r.start&&r.loaded}getInitialLiveFragment(e,t){let r=this.fragPrevious,i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!ck(t)||t<(e[0].programDateTime||0)||t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(let i=0;i<e.length;++i){let n=e[i];if(function(e,t,r){let i=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>e}(t,r,n))return n}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){let a=r.sn+1;if(a>=e.startSN&&a<=e.endSN){let n=t[a-e.startSN];r.cc===n.cc&&(i=n,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}if(!i){var n;n=r.cc,(i=fC.search(t,e=>e.cc<n?1:e.cc>n?-1:0))&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`)}}}else{let t=this.hls.liveSyncPosition;null!==t&&(i=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,r){let i;let{config:n}=this,{fragPrevious:a}=this,{fragments:s,endSN:o}=r,{fragmentHint:l}=r,{maxFragLookUpTolerance:d}=n,u=r.partList,c=!!(n.lowLatencyMode&&null!=u&&u.length&&l);if(c&&l&&!this.bitrateTest&&(s=s.concat(l),o=l.sn),i=e<t?fP(a,s,e,e>t-d?0:d):s[s.length-1]){let e=i.sn-r.startSN,t=this.fragmentTracker.getState(i);if((t===fX.OK||t===fX.PARTIAL&&i.gap)&&(a=i),a&&i.sn===a.sn&&(!c||u[0].fragment.sn>i.sn)&&a&&i.level===a.level){let t=s[e+1];i=i.sn<o&&this.fragmentTracker.getState(t)!==fX.OK?t:null}}return i}synchronizeToLiveEdge(e){let{config:t,media:r}=this;if(!r)return;let i=this.hls.liveSyncPosition,n=r.currentTime,a=e.fragments[0].start,s=e.edge,o=n>=a-t.maxFragLookUpTolerance&&n<=s;if(null!==i&&r.duration>i&&(n<i||!o)){let a=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&r.readyState<4||n<s-a)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn(`Playback: ${n.toFixed(3)} is located too far from the end of live sliding playlist: ${s}, reset currentTime to : ${i.toFixed(3)}`),r.currentTime=i))}}alignPlaylists(e,t,r){let i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;let n=e.fragments[0].start,a=e.alignedSliding&&ck(n);if(!t||!a&&!n){let{fragPrevious:n}=this;r&&(function(e,t,r){if(r&&(t.endCC>t.startCC||e&&e.cc<t.startCC)){let e=function(e,t){let r=e.fragments,i=t.fragments;if(!i.length||!r.length){cU.log("No fragments to align");return}let n=f3(r,i[0].cc);if(!n||n&&!n.startPTS){cU.log("No frag in previous level to align on");return}return n}(r,t);e&&ck(e.start)&&(cU.log(`Adjusting PTS using last level due to CC increase within current level ${t.url}`),f8(e.start,t))}}(n,e,r),!e.alignedSliding&&r&&f6(e,r),e.alignedSliding||!r||e.skippedSegments||f_(r,e));let a=e.fragments[0].start;return this.log(`Live playlist sliding: ${a.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${n?n.sn:"na"} fragments: ${i}`),a}return n}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let r=this.startPosition;if(r<t&&(r=-1),-1===r||-1===this.lastCurrentTime){let i=null!==this.startTimeOffset,n=i?this.startTimeOffset:e.startTimeOffset;null!==n&&ck(n)?(r=t+n,n<0&&(r+=e.totalduration),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Start time offset ${n} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){let{media:e}=this,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===po.FRAG_LOADING_WAITING_RETRY)||(this.state=po.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){let e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}let r=t.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${null==(i=this.fragCurrent)?void 0:i.url}`);return}let n=t.details===cO.FRAG_GAP;n&&this.fragmentTracker.fragBuffered(r,!0);let a=t.errorAction,{action:s,retryCount:o=0,retryConfig:l}=a||{};if(a&&s===fN.RetryRequest&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);let i=fk(l,o);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${o+1}/${l.maxNumRetry} in ${i}ms`),a.resolved=!0,this.retryDate=self.performance.now()+i,this.state=po.FRAG_LOADING_WAITING_RETRY}else if(l&&a){if(this.resetFragmentErrors(e),o<l.maxNumRetry)n||s===fN.RemoveAlternatePermanently||(a.resolved=!0);else{cU.warn(`${t.details} reached or exceeded max retry (${o})`);return}}else(null==a?void 0:a.action)===fN.SendAlternateToPenaltyBox?this.state=po.WAITING_LEVEL:this.state=po.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===po.PARSING||this.state===po.PARSED){let t=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),n=i&&i.len>.5;n&&this.reduceMaxBufferLength(i.len,(null==t?void 0:t.duration)||10);let a=!n;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===h6.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==po.STOPPED&&(this.state=po.IDLE)}afterBufferFlushed(e,t,r){if(!e)return;let i=f1.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,r),this.state===po.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=po.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;let t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,i){var n;let a=r.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((t,n)=>{let s=e.elementaryStreams[n];if(s){let o=s.endPTS-s.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${n} duration reliably (${o})`),t||!1;let l=i?0:fT(a,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return this.hls.trigger(cC.LEVEL_PTS_UPDATED,{details:a,level:r,drift:l,type:n,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t},!1)&&(null==(n=this.transmuxer)?void 0:n.error)===null){let t=Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===r.fragmentError&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=po.PARSED,this.hls.trigger(cC.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){let t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class pd{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){let e;let{chunks:t,dataLength:r}=this;return t.length?(e=1===t.length?t[0]:function(e,t){let r=new Uint8Array(t),i=0;for(let t=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}(t,r),this.reset(),e):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function pu(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class pc{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){let r;this.cachedData&&(e=hR(this.cachedData,e),this.cachedData=null);let i=c7(e,0),n=i?i.length:0,a=this._audioTrack,s=this._id3Track,o=i?hr(i):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&ck(o))&&(this.basePTS=ph(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:fs.audioId3,duration:Number.POSITIVE_INFINITY});n<l;){if(this.canParse(e,n)){let t=this.appendFrame(a,e,n);t?(this.frameIndex++,this.lastPTS=t.sample.pts,n+=t.length,r=n):n=l}else ht(e,n)?(i=c7(e,n),s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:fs.audioId3,duration:Number.POSITIVE_INFINITY}),n+=i.length,r=n):n++;if(n===l&&r!==l){let t=c8(e,r);this.cachedData?this.cachedData=hR(this.cachedData,t):this.cachedData=t}}return{audioTrack:a,videoTrack:pu(),id3Track:s,textTrack:pu()}}demuxSampleAes(e,t,r){return Promise.reject(Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){let t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:pu(),id3Track:this._id3Track,textTrack:pu()}}destroy(){}}let ph=(e,t,r)=>ck(e)?90*e:9e4*t+(r?9e4*r.baseTime/r.timescale:0);function pf(e,t){return 255===e[t]&&(246&e[t+1])==240}function pp(e,t){return 1&e[t+1]?7:9}function pm(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function pg(e,t){return t+1<e.length&&pf(e,t)}function pv(e,t,r,i,n){if(!e.samplerate){let a=function(e,t,r,i){let n,a,s,o;let l=navigator.userAgent.toLowerCase(),d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=((192&t[r+2])>>>6)+1;let u=(60&t[r+2])>>>2;if(u>d.length-1){let t=Error(`invalid ADTS sampling index:${u}`);e.emit(cC.ERROR,cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message});return}return s=(1&t[r+2])<<2|(192&t[r+3])>>>6,cU.log(`manifest codec:${i}, ADTS type:${n}, samplingIndex:${u}`),/firefox/i.test(l)?u>=6?(n=5,o=[,,,,],a=u-3):(n=2,o=[,,],a=u):-1!==l.indexOf("android")?(n=2,o=[,,],a=u):(n=5,o=[,,,,],i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&u>=6?a=u-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(u>=6&&1===s||/vivaldi/i.test(l))||!i&&1===s)&&(n=2,o=[,,]),a=u)),o[0]=n<<3,o[0]|=(14&u)>>1,o[1]|=(1&u)<<7,o[1]|=s<<3,5===n&&(o[1]|=(14&a)>>1,o[2]=(1&a)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:d[u],channelCount:s,codec:"mp4a.40."+n,manifestCodec:i}}(t,r,i,n);a&&(e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,cU.log(`parsed codec:${e.codec}, rate:${a.samplerate}, channels:${a.channelCount}`))}}function py(e,t,r,i,n){let a;let s=i+9216e4/e.samplerate*n,o=function(e,t){let r=pp(e,t);if(t+r<=e.length){let i=pm(e,t)-r;if(i>0)return{headerLength:r,frameLength:i}}}(t,r);if(o){let{frameLength:i,headerLength:n}=o,l=n+i,d=Math.max(0,r+l-t.length);d?(a=new Uint8Array(l-n)).set(t.subarray(r+n,t.length),0):a=t.subarray(r+n,r+l);let u={unit:a,pts:s};return d||e.samples.push(u),{sample:u,length:l,missing:d}}let l=t.length-r;return(a=new Uint8Array(l)).set(t.subarray(r,t.length),0),{sample:{unit:a,pts:s},length:l,missing:-1}}let pb=null,pE=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],pT=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],p_=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],pw=[0,1,1,4];function px(e,t,r,i,n){if(r+24>t.length)return;let a=pS(t,r);if(a&&r+a.frameLength<=t.length){let s=i+9e4*a.samplesPerFrame/a.sampleRate*n,o={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}function pS(e,t){let r=e[t+1]>>3&3,i=e[t+1]>>1&3,n=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==a){let s=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*pE[14*(3===r?3-i:3===i?3:4)+n-1],d=pT[3*(3===r?0:2===r?1:2)+a],u=p_[r][i],c=pw[i],h=Math.floor(u*l/d+s)*c;if(null===pb){let e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);pb=e?parseInt(e[1]):0}return pb&&pb<=87&&2===i&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:d,channelCount:3===o?1:2,frameLength:h,samplesPerFrame:8*u*c}}}function pA(e,t){return 255===e[t]&&(224&e[t+1])==224&&(6&e[t+1])!=0}function pR(e,t){return t+1<e.length&&pA(e,t)}function pL(e,t){if(t+1<e.length&&pA(e,t)){let r=pS(e,t),i=4;null!=r&&r.frameLength&&(i=r.frameLength);let n=t+i;return n===e.length||pR(e,n)}return!1}class pk extends pc{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=c7(e,0),r=(null==t?void 0:t.length)||0;if(pL(e,r))return!1;for(let t=e.length;r<t;r++)if(function(e,t){if(pg(e,t)){let r=pp(e,t);if(t+r>=e.length)return!1;let i=pm(e,t);if(i<=r)return!1;let n=t+i;return n===e.length||pg(e,n)}return!1}(e,r))return cU.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return t+5<e.length&&pf(e,t)&&pm(e,t)<=e.length-t}appendFrame(e,t,r){pv(e,this.observer,t,r,e.manifestCodec);let i=py(e,t,r,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i}}let pD=/\/emsg[-/]ID3/i;class pI{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,i){let n=this.videoTrack=pu("video",1),a=this.audioTrack=pu("audio",1),s=this.txtTrack=pu("text",1);if(this.id3Track=pu("id3",1),this.timeOffset=0,!(null!=e&&e.byteLength))return;let o=h_(e);if(o.video){let{id:e,timescale:t,codec:r}=o.video;n.id=e,n.timescale=s.timescale=t,n.codec=r}if(o.audio){let{id:e,timescale:t,codec:r}=o.audio;a.id=e,a.timescale=t,a.codec=r}s.id=hp.text,n.sampleDuration=0,n.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return function(e){let t=e.byteLength;for(let r=0;r<t;){let i=hv(e,r);if(i>8&&109===e[r+4]&&111===e[r+5]&&111===e[r+6]&&102===e[r+7])return!0;r=i>1?r+i:t}return!1}(e)}demux(e,t){this.timeOffset=t;let r=e,i=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=hR(this.remainderData,e));let t=function(e){let t={valid:null,remainder:null},r=hT(e,["moof"]);if(r.length<2)return t.remainder=e,t;let i=r[r.length-1];return t.valid=c8(e,0,i.byteOffset-8),t.remainder=c8(e,i.byteOffset-8),t}(r);this.remainderData=t.remainder,i.samples=t.valid||new Uint8Array}else i.samples=r;let a=this.extractID3Track(i,t);return n.samples=hL(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){let e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;let i=this.extractID3Track(t,this.timeOffset);return r.samples=hL(e,t),{videoTrack:t,audioTrack:pu(),id3Track:i,textTrack:pu()}}extractID3Track(e,t){let r=this.id3Track;if(e.samples.length){let i=hT(e.samples,["emsg"]);i&&i.forEach(e=>{let i=function(e){let t=e[0],r="",i="",n=0,a=0,s=0,o=0,l=0,d=0;if(0===t){for(;"\0"!==hm(e.subarray(d,d+1));)r+=hm(e.subarray(d,d+1)),d+=1;for(r+=hm(e.subarray(d,d+1)),d+=1;"\0"!==hm(e.subarray(d,d+1));)i+=hm(e.subarray(d,d+1)),d+=1;i+=hm(e.subarray(d,d+1)),d+=1,n=hv(e,12),a=hv(e,16),o=hv(e,20),l=hv(e,24),d=28}else if(1===t){d+=4,n=hv(e,d);let t=hv(e,d+=4),a=hv(e,d+=4);for(d+=4,cD(s=4294967296*t+a)||(s=Number.MAX_SAFE_INTEGER,cU.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=hv(e,d),d+=4,l=hv(e,d),d+=4;"\0"!==hm(e.subarray(d,d+1));)r+=hm(e.subarray(d,d+1)),d+=1;for(r+=hm(e.subarray(d,d+1)),d+=1;"\0"!==hm(e.subarray(d,d+1));)i+=hm(e.subarray(d,d+1)),d+=1;i+=hm(e.subarray(d,d+1)),d+=1}return{schemeIdUri:r,value:i,timeScale:n,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:e.subarray(d,e.byteLength)}}(e);if(pD.test(i.schemeIdUri)){let e=ck(i.presentationTime)?i.presentationTime/i.timeScale:t+i.presentationTimeDelta/i.timeScale,n=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;n<=.001&&(n=Number.POSITIVE_INFINITY);let a=i.payload;r.samples.push({data:a,len:a.byteLength,dts:e,pts:e,type:fs.emsg,duration:n})}})}return r}demuxSampleAes(e,t,r){return Promise.reject(Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}let pC=(e,t)=>{let r=0,i=5;t+=5;let n=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;i>0;){s[0]=e[t];let o=Math.min(i,8),l=8-o;a[0]=4278190080>>>24+l<<l,n[0]=(s[0]&a[0])>>l,r=r?r<<o|n[0]:n[0],t+=1,i-=o}return r};class pP extends pc{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){let i=pO(e,t,r,this.basePTS,this.frameIndex);if(-1!==i)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;let t=c7(e,0);if(!t)return!1;let r=t.length;return!!(11===e[r]&&119===e[r+1]&&void 0!==hr(t)&&16>pC(e,r))}}function pO(e,t,r,i,n){if(r+8>t.length||11!==t[r]||119!==t[r+1])return -1;let a=t[r+4]>>6;if(a>=3)return -1;let s=[48e3,44100,32e3][a],o=63&t[r+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+a];if(r+l>t.length)return -1;let d=t[r+6]>>5,u=0;2===d?u+=2:(1&d&&1!==d&&(u+=2),4&d&&(u+=2));let c=(t[r+6]<<8|t[r+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][d]+c,f=t[r+5]>>3,p=7&t[r+5],m=new Uint8Array([a<<6|f<<1|p>>2,(3&p)<<6|d<<3|c<<2|o>>4,o<<4&224]),g=t.subarray(r,r+l);return e.config=m,e.channelCount=h,e.samplerate=s,e.samples.push({unit:g,pts:i+1536/s*9e4*n}),l}class pN{constructor(){this.VideoSample=null}createVideoSample(e,t,r,i){return{key:e,frame:!1,pts:t,dts:r,units:[],debug:i,length:0}}getLastNalUnit(e){var t;let r;let i=this.VideoSample;if(i&&0!==i.units.length||(i=e[e.length-1]),null!=(t=i)&&t.units){let e=i.units;r=e[e.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){let r=t.samples,i=r.length;if(i){let t=r[i-1];e.pts=t.pts,e.dts=t.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&cU.log(e.pts+"/"+e.dts+":"+e.debug)}}class pM{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){let e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw Error("no bytes available");i.set(e.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e||(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e}readBits(e){let t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;if(e>32&&cU.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw Error("no bits available");return(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!=0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){let e=this.skipLZ();return this.readBits(e+1)-1}readEG(){let e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,r=8;for(let i=0;i<e;i++)0!==r&&(r=(t+this.readEG()+256)%256),t=0===r?t:r}readSPS(){let e,t,r,i=0,n=0,a=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),u=this.readBoolean.bind(this),c=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();let m=o();if(l(5),c(3),o(),f(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){let e=d();if(3===e&&c(1),f(),f(),c(1),u())for(r=0,t=3!==e?8:12;r<t;r++)u()&&p(r<6?16:64)}f();let g=d();if(0===g)d();else if(1===g)for(c(1),h(),h(),e=d(),r=0;r<e;r++)h();f(),c(1);let v=d(),y=d(),b=l(1);0===b&&c(1),c(1),u()&&(i=d(),n=d(),a=d(),s=d());let E=[1,1];if(u()&&u())switch(o()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil((v+1)*16-2*i-2*n),height:(2-b)*(y+1)*16-(b?2:4)*(a+s),pixelRatio:E}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class pF extends pN{parseAVCPES(e,t,r,i,n){let a;let s=this.parseAVCNALu(e,r.data),o=this.VideoSample,l=!1;r.data=null,o&&s.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),s.forEach(i=>{var s,d,u,c;switch(i.type){case 1:{let t=!1;a=!0;let n=i.data;if(l&&n.length>4){let e=new pM(n).readSliceType();(2===e||4===e||7===e||9===e)&&(t=!0)}t&&null!=(d=o)&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),o.frame=!0,o.key=t;break}case 5:a=!0,null!=(s=o)&&s.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),o.key=!0,o.frame=!0;break;case 6:a=!0,hk(i.data,1,r.pts,t.samples);break;case 7:{a=!0,l=!0;let t=i.data,r=new pM(t).readSPS();if(!e.sps||e.width!==r.width||e.height!==r.height||(null==(u=e.pixelRatio)?void 0:u[0])!==r.pixelRatio[0]||(null==(c=e.pixelRatio)?void 0:c[1])!==r.pixelRatio[1]){e.width=r.width,e.height=r.height,e.pixelRatio=r.pixelRatio,e.sps=[t],e.duration=n;let i=t.subarray(1,4),a="avc1.";for(let e=0;e<3;e++){let t=i[e].toString(16);t.length<2&&(t="0"+t),a+=t}e.codec=a}break}case 8:a=!0,e.pps=[i.data];break;case 9:a=!0,e.audFound=!0,o&&this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"");break;case 12:a=!0;break;default:a=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&a&&o.units.push(i)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}parseAVCNALu(e,t){let r,i,n;let a=t.byteLength,s=e.naluState||0,o=s,l=[],d=0,u=-1,c=0;for(-1===s&&(u=0,c=31&t[0],s=0,d=1);d<a;){if(r=t[d++],!s){s=r?0:1;continue}if(1===s){s=r?0:2;continue}if(r){if(1===r){if(i=d-s-1,u>=0){let e={data:t.subarray(u,i),type:c};l.push(e)}else{let r=this.getLastNalUnit(e.samples);r&&(o&&d<=4-o&&r.state&&(r.data=r.data.subarray(0,r.data.byteLength-o)),i>0&&(r.data=hR(r.data,t.subarray(0,i)),r.state=0))}d<a?(n=31&t[d],u=d,c=n,s=0):s=-1}else s=0}else s=3}if(u>=0&&s>=0){let e={data:t.subarray(u,a),type:c,state:s};l.push(e)}if(0===l.length){let r=this.getLastNalUnit(e.samples);r&&(r.data=hR(r.data,t))}return e.naluState=s,l}}class pU{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new pa(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,r){let i=e[t].unit;if(i.length<=16)return;let n=i.subarray(16,i.length-i.length%16),a=n.buffer.slice(n.byteOffset,n.byteOffset+n.length);this.decryptBuffer(a).then(n=>{let a=new Uint8Array(n);i.set(a,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)})}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length){r();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){let t=new Int8Array(16*Math.floor((e.length-48)/160)+16),r=0;for(let i=32;i<e.length-16;i+=160,r+=16)t.set(e.subarray(i,i+16),r);return t}getAvcDecryptedUnit(e,t){let r=new Uint8Array(t),i=0;for(let t=32;t<e.length-16;t+=160,i+=16)e.set(r.subarray(i,i+16),t);return e}decryptAvcSample(e,t,r,i,n){let a=hD(n.data),s=this.getAvcEncryptedData(a);this.decryptBuffer(s.buffer).then(s=>{n.data=this.getAvcDecryptedUnit(a,s),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,i)})}decryptAvcSamples(e,t,r,i){if(e instanceof Uint8Array)throw Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length){i();return}let n=e[t].units;for(;!(r>=n.length);r++){let a=n[r];if(!(a.data.length<=48)&&(1===a.type||5===a.type)&&(this.decryptAvcSample(e,t,r,i,a),!this.decrypter.isSync()))return}}}}class pB{constructor(e,t,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.videoParser=new pF}static probe(e){let t=pB.syncOffset(e);return t>0&&cU.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){let t=e.length,r=Math.min(940,t-188)+1,i=0;for(;i<r;){let n=!1,a=-1,s=0;for(let o=i;o<t;o+=188)if(71===e[o]&&(t-o==188||71===e[o+188])){if(s++,-1===a&&0!==(a=o)&&(r=Math.min(a+18612,e.length-188)+1),n||(n=0===pj(e,o)),n&&s>1&&(0===a&&s>2||o+188>r))return a}else if(s)return -1;else break;i++}return -1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:hp[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=pB.createTrack("video"),this._audioTrack=pB.createTrack("audio",i),this._id3Track=pB.createTrack("id3"),this._txtTrack=pB.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r,this._duration=i}resetTimeStamp(){}resetContiguity(){let{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,r=!1,i=!1){let n;r||(this.sampleAes=null);let a=this._videoTrack,s=this._audioTrack,o=this._id3Track,l=this._txtTrack,d=a.pid,u=a.pesData,c=s.pid,h=o.pid,f=s.pesData,p=o.pesData,m=null,g=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=hR(this.remainderData,e)).length,this.remainderData=null),y<188&&!i)return this.remainderData=e,{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};let b=Math.max(0,pB.syncOffset(e));(y-=(y-b)%188)<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let E=0;for(let t=b;t<y;t+=188)if(71===e[t]){let i;let y=!!(64&e[t+1]),E=pj(e,t);if((48&e[t+3])>>4>1){if((i=t+5+e[t+4])===t+188)continue}else i=t+4;switch(E){case d:y&&(u&&(n=pq(u))&&this.videoParser.parseAVCPES(a,l,n,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(e.subarray(i,t+188)),u.size+=t+188-i);break;case c:if(y){if(f&&(n=pq(f)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,n);break;case"mp3":this.parseMPEGPES(s,n);break;case"ac3":this.parseAC3PES(s,n)}f={data:[],size:0}}f&&(f.data.push(e.subarray(i,t+188)),f.size+=t+188-i);break;case h:y&&(p&&(n=pq(p))&&this.parseID3PES(o,n),p={data:[],size:0}),p&&(p.data.push(e.subarray(i,t+188)),p.size+=t+188-i);break;case 0:var T,w;y&&(i+=e[i]+1),v=this._pmtId=(31&(T=e)[(w=i)+10])<<8|T[w+11];break;case v:{y&&(i+=e[i]+1);let n=function(e,t,r,i,n){let a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},s=(15&e[t+1])<<8|e[t+2],o=t+3+s-4,l=(15&e[t+10])<<8|e[t+11];for(t+=12+l;t<o;){let s=pj(e,t),o=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!i){pG("ADTS AAC");break}case 15:-1===a.audioPid&&(a.audioPid=s);break;case 21:-1===a.id3Pid&&(a.id3Pid=s);break;case 219:if(!i){pG("H.264");break}case 27:-1===a.videoPid&&(a.videoPid=s,a.segmentVideoCodec="avc");break;case 3:case 4:r.mpeg||r.mp3?-1===a.audioPid&&(a.audioPid=s,a.segmentAudioCodec="mp3"):cU.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){pG("AC-3");break}case 129:r.ac3?-1===a.audioPid&&(a.audioPid=s,a.segmentAudioCodec="ac3"):cU.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===a.audioPid&&o>0){let i=t+5,n=o;for(;n>2;){106===e[i]&&(!0!==r.ac3?cU.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=s,a.segmentAudioCodec="ac3"));let t=e[i+1]+2;i+=t,n-=t}}break;case 194:case 135:return p$(n,Error("Unsupported EC-3 in M2TS found")),a;case 36:return p$(n,Error("Unsupported HEVC in M2TS found")),a}t+=o+5}return a}(e,i,this.typeSupported,r,this.observer);(d=n.videoPid)>0&&(a.pid=d,a.segmentCodec=n.segmentVideoCodec),(c=n.audioPid)>0&&(s.pid=c,s.segmentCodec=n.segmentAudioCodec),(h=n.id3Pid)>0&&(o.pid=h),null===m||g||(cU.warn(`MPEG-TS PMT found at ${t} after unknown PID '${m}'. Backtracking to sync byte @${b} to parse all TS packets.`),m=null,t=b-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=E}}else E++;E>0&&p$(this.observer,Error(`Found ${E} TS packet/s that do not start with 0x47`)),a.pesData=u,s.pesData=f,o.pesData=p;let x={audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};return i&&this.extractRemainingSamples(x),x}flush(){let e;let{remainderData:t}=this;return(this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes)?this.decrypt(e,this.sampleAes):e}extractRemainingSamples(e){let t;let{audioTrack:r,videoTrack:i,id3Track:n,textTrack:a}=e,s=i.pesData,o=r.pesData,l=n.pesData;if(s&&(t=pq(s))?(this.videoParser.parseAVCPES(i,a,t,!0,this._duration),i.pesData=null):i.pesData=s,o&&(t=pq(o))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,t);break;case"mp3":this.parseMPEGPES(r,t);break;case"ac3":this.parseAC3PES(r,t)}r.pesData=null}else null!=o&&o.size&&cU.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;l&&(t=pq(l))?(this.parseID3PES(n,t),n.pesData=null):n.pesData=l}demuxSampleAes(e,t,r){let i=this.demux(e,r,!0,!this.config.progressive),n=this.sampleAes=new pU(this.observer,this.config,t);return this.decrypt(i,n)}decrypt(e,t){return new Promise(r=>{let{audioTrack:i,videoTrack:n}=e;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,()=>{n.samples?t.decryptAvcSamples(n.samples,0,0,()=>{r(e)}):r(e)}):n.samples&&t.decryptAvcSamples(n.samples,0,0,()=>{r(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let r,i,n,a,s=0,o=this.aacOverFlow,l=t.data;if(o){this.aacOverFlow=null;let t=o.missing,r=o.sample.unit.byteLength;-1===t?l=hR(o.sample.unit,l):(o.sample.unit.set(l.subarray(0,t),r-t),e.samples.push(o.sample),s=o.missing)}for(r=s,i=l.length;r<i-1&&!pg(l,r);r++);if(r!==s){let e;let t=r<i-1;if(e=t?`AAC PES did not start with ADTS header,offset:${r}`:"No ADTS header found in AAC PES",p$(this.observer,Error(e),t),!t)return}if(pv(e,this.observer,l,r,this.audioCodec),void 0!==t.pts)n=t.pts;else if(o){let t=9216e4/e.samplerate;n=o.sample.pts+t}else{cU.warn("[tsdemuxer]: AAC PES unknown PTS");return}let d=0;for(;r<i;){if(a=py(e,l,r,n,d),r+=a.length,a.missing){this.aacOverFlow=a;break}for(d++;r<i-1&&!pg(l,r);r++);}}parseMPEGPES(e,t){let r=t.data,i=r.length,n=0,a=0,s=t.pts;if(void 0===s){cU.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(pR(r,a)){let t=px(e,r,a,s,n);if(t)a+=t.length,n++;else break}else a++}parseAC3PES(e,t){{let r;let i=t.data,n=t.pts;if(void 0===n){cU.warn("[tsdemuxer]: AC3 PES unknown PTS");return}let a=i.length,s=0,o=0;for(;o<a&&(r=pO(e,i,o,n,s++))>0;)o+=r}}parseID3PES(e,t){if(void 0===t.pts){cU.warn("[tsdemuxer]: ID3 PES unknown PTS");return}let r=cL({},t,{type:this._videoTrack?fs.emsg:fs.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function pj(e,t){return((31&e[t+1])<<8)+e[t+2]}function p$(e,t,r){cU.warn(`parsing error: ${t.message}`),e.emit(cC.ERROR,cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:t,reason:t.message})}function pG(e){cU.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function pq(e){let t,r,i,n,a,s=0,o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;)o[0]=hR(o[0],o[1]),o.splice(1,1);if(1===((t=o[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;let l=t[7];192&l&&(n=(14&t[9])*536870912+(255&t[10])*4194304+(254&t[11])*16384+(255&t[12])*128+(254&t[13])/2,64&l?n-(a=(14&t[14])*536870912+(255&t[15])*4194304+(254&t[16])*16384+(255&t[17])*128+(254&t[18])/2)>54e5&&(cU.warn(`${Math.round((n-a)/9e4)}s delta between PTS and DTS, align them`),n=a):a=n);let d=(i=t[8])+9;if(e.size<=d)return null;e.size-=d;let u=new Uint8Array(e.size);for(let e=0,r=o.length;e<r;e++){let r=(t=o[e]).byteLength;if(d){if(d>r){d-=r;continue}t=t.subarray(d),r-=d,d=0}u.set(t,s),s+=r}return r&&(r-=i+3),{data:u,pts:n,dts:a,len:r}}return null}class pH extends pc{resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=c7(e,0),r=(null==t?void 0:t.length)||0;if(t&&11===e[r]&&119===e[r+1]&&void 0!==hr(t)&&16>=pC(e,r))return!1;for(let t=e.length;r<t;r++)if(pL(e,r))return cU.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return pA(e,t)&&4<=e.length-t}appendFrame(e,t,r){if(null!==this.basePTS)return px(e,t,r,this.basePTS,this.frameIndex)}}class pK{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);else if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);else if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}class pV{static init(){let e;for(e in pV.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},pV.types)pV.types.hasOwnProperty(e)&&(pV.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);let t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);pV.HDLR_TYPES={video:t,audio:r};let i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);pV.STTS=pV.STSC=pV.STCO=n,pV.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),pV.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),pV.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),pV.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);let a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);pV.FTYP=pV.box(pV.types.ftyp,a,o,a,s),pV.DINF=pV.box(pV.types.dinf,pV.box(pV.types.dref,i))}static box(e,...t){let r=8,i=t.length,n=i;for(;i--;)r+=t[i].byteLength;let a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=255&r,a.set(e,4),i=0,r=8;i<n;i++)a.set(t[i],r),r+=t[i].byteLength;return a}static hdlr(e){return pV.box(pV.types.hdlr,pV.HDLR_TYPES[e])}static mdat(e){return pV.box(pV.types.mdat,e)}static mdhd(e,t){let r=Math.floor((t*=e)/4294967296),i=Math.floor(t%4294967296);return pV.box(pV.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}static mdia(e){return pV.box(pV.types.mdia,pV.mdhd(e.timescale,e.duration),pV.hdlr(e.type),pV.minf(e))}static mfhd(e){return pV.box(pV.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?pV.box(pV.types.minf,pV.box(pV.types.smhd,pV.SMHD),pV.DINF,pV.stbl(e)):pV.box(pV.types.minf,pV.box(pV.types.vmhd,pV.VMHD),pV.DINF,pV.stbl(e))}static moof(e,t,r){return pV.box(pV.types.moof,pV.mfhd(e),pV.traf(r,t))}static moov(e){let t=e.length,r=[];for(;t--;)r[t]=pV.trak(e[t]);return pV.box.apply(null,[pV.types.moov,pV.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(pV.mvex(e)))}static mvex(e){let t=e.length,r=[];for(;t--;)r[t]=pV.trex(e[t]);return pV.box.apply(null,[pV.types.mvex,...r])}static mvhd(e,t){let r=Math.floor((t*=e)/4294967296),i=Math.floor(t%4294967296),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return pV.box(pV.types.mvhd,n)}static sdtp(e){let t,r;let i=e.samples||[],n=new Uint8Array(4+i.length);for(t=0;t<i.length;t++)r=i[t].flags,n[t+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return pV.box(pV.types.sdtp,n)}static stbl(e){return pV.box(pV.types.stbl,pV.stsd(e),pV.box(pV.types.stts,pV.STTS),pV.box(pV.types.stsc,pV.STSC),pV.box(pV.types.stsz,pV.STSZ),pV.box(pV.types.stco,pV.STCO))}static avc1(e){let t,r,i,n=[],a=[];for(t=0;t<e.sps.length;t++)i=(r=e.sps[t]).byteLength,n.push(i>>>8&255),n.push(255&i),n=n.concat(Array.prototype.slice.call(r));for(t=0;t<e.pps.length;t++)i=(r=e.pps[t]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));let s=pV.box(pV.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(a))),o=e.width,l=e.height,d=e.pixelRatio[0],u=e.pixelRatio[1];return pV.box(pV.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,pV.box(pV.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),pV.box(pV.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){let t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){let t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return pV.box(pV.types.mp4a,pV.audioStsd(e),pV.box(pV.types.esds,pV.esds(e)))}static mp3(e){return pV.box(pV.types[".mp3"],pV.audioStsd(e))}static ac3(e){return pV.box(pV.types["ac-3"],pV.audioStsd(e),pV.box(pV.types.dac3,e.config))}static stsd(e){return"audio"!==e.type?pV.box(pV.types.stsd,pV.STSD,pV.avc1(e)):"mp3"===e.segmentCodec&&"mp3"===e.codec?pV.box(pV.types.stsd,pV.STSD,pV.mp3(e)):"ac3"===e.segmentCodec?pV.box(pV.types.stsd,pV.STSD,pV.ac3(e)):pV.box(pV.types.stsd,pV.STSD,pV.mp4a(e))}static tkhd(e){let t=e.id,r=e.duration*e.timescale,i=e.width,n=e.height,a=Math.floor(r/4294967296),s=Math.floor(r%4294967296);return pV.box(pV.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,n>>8&255,255&n,0,0]))}static traf(e,t){let r=pV.sdtp(e),i=e.id,n=Math.floor(t/4294967296),a=Math.floor(t%4294967296);return pV.box(pV.types.traf,pV.box(pV.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),pV.box(pV.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a])),pV.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,pV.box(pV.types.trak,pV.tkhd(e),pV.mdia(e))}static trex(e){let t=e.id;return pV.box(pV.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){let r,i,n,a,s,o;let l=e.samples||[],d=l.length,u=12+16*d,c=new Uint8Array(u);for(t+=8+u,c.set(["video"===e.type?1:0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),r=0;r<d;r++)n=(i=l[r]).duration,a=i.size,s=i.flags,o=i.cts,c.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*r);return pV.box(pV.types.trun,c)}static initSegment(e){pV.types||pV.init();let t=pV.moov(e);return hR(pV.FTYP,t)}}function pW(e,t,r=1,i=!1){let n=e*t*r;return i?Math.round(n):n}function pz(e,t=!1){return pW(e,1e3,11111111111111112e-21,t)}pV.types=void 0,pV.HDLR_TYPES=void 0,pV.STTS=void 0,pV.STSC=void 0,pV.STCO=void 0,pV.STSZ=void 0,pV.VMHD=void 0,pV.SMHD=void 0,pV.STSD=void 0,pV.FTYP=void 0,pV.DINF=void 0;let pY=null,pX=null;class pQ{constructor(e,t,r,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===pY){let e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);pY=e?parseInt(e[1]):0}if(null===pX){let e=navigator.userAgent.match(/Safari\/(\d+)/i);pX=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){cU.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){cU.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){cU.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1,r=e.reduce((e,r)=>{let i=r.pts-e;return i<-4294967296?(t=!0,pJ(e,r.pts)):i>0?e:r.pts},e[0].pts);return t&&cU.debug("PTS rollover detected"),r}remux(e,t,r,i,n,a,s,o){let l,d,u,c,h,f;let p=n,m=n,g=e.pid>-1,v=t.pid>-1,y=t.samples.length,b=e.samples.length>0,E=s&&y>0||y>1;if((!g||b)&&(!v||E)||this.ISGenerated||s){let r;if(this.ISGenerated){var T,w,x,S;let e=this.videoTrackConfig;e&&(t.width!==e.width||t.height!==e.height||(null==(T=t.pixelRatio)?void 0:T[0])!==(null==(w=e.pixelRatio)?void 0:w[0])||(null==(x=t.pixelRatio)?void 0:x[1])!==(null==(S=e.pixelRatio)?void 0:S[1]))&&this.resetInitSegment()}else u=this.generateIS(e,t,n,a);let i=this.isVideoContiguous,s=-1;if(E&&(s=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return -1}(t.samples),!i&&this.config.forceKeyFrameOnDiscontinuity)){if(f=!0,s>0){cU.warn(`[mp4-remuxer]: Dropped ${s} out of ${y} video samples due to a missing keyframe`);let e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(s),t.dropped+=s,m+=(t.samples[0].pts-e)/t.inputTimeScale,r=m}else -1===s&&(cU.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),f=!1)}if(this.ISGenerated){if(b&&E){let r=this.getVideoStartPts(t.samples),i=(pJ(e.samples[0].pts,r)-r)/t.inputTimeScale;p+=Math.max(0,i),m+=Math.max(0,-i)}if(b){if(e.samplerate||(cU.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,n,a)),d=this.remuxAudio(e,p,this.isAudioContiguous,a,v||E||o===h6.AUDIO?m:void 0),E){let r=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(cU.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,n,a)),l=this.remuxVideo(t,m,i,r)}}else E&&(l=this.remuxVideo(t,m,i,0));l&&(l.firstKeyFrame=s,l.independent=-1!==s,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=pZ(r,n,this._initPTS,this._initDTS)),i.samples.length&&(c=p0(i,n,this._initPTS))),{audio:d,video:l,initSegment:u,independent:f,text:c,id3:h}}generateIS(e,t,r,i){let n,a,s;let o=e.samples,l=t.samples,d=this.typeSupported,u={},c=this._initPTS,h=!c||i,f="audio/mp4";if(h&&(n=a=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":d.mpeg?(f="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}u.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&d.mpeg?new Uint8Array(0):pV.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(s=e.inputTimeScale,c&&s===c.timescale?h=!1:n=a=o[0].pts-Math.round(s*r))}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:pV.initSegment([t]),metadata:{width:t.width,height:t.height}},h){if(s=t.inputTimeScale,c&&s===c.timescale)h=!1;else{let e=this.getVideoStartPts(l),t=Math.round(s*r);a=Math.min(a,pJ(l[0].dts,e)-t),n=Math.min(n,e-t)}}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:n,timescale:s},this._initDTS={baseTime:a,timescale:s}):n=s=void 0,{tracks:u,initPTS:n,timescale:s}}remuxVideo(e,t,r,i){let n,a,s;let o=e.inputTimeScale,l=e.samples,d=[],u=l.length,c=this._initPTS,h=this.nextAvcDts,f=8,p=this.videoSampleDuration,m=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,v=!1;if(!r||null===h){let e=t*o,i=l[0].pts-pJ(l[0].dts,l[0].pts);pY&&null!==h&&15e3>Math.abs(e-i-h)?r=!0:h=e-i}let y=c.baseTime*o/c.timescale;for(let e=0;e<u;e++){let t=l[e];t.pts=pJ(t.pts-y,h),t.dts=pJ(t.dts-y,h),t.dts<l[e>0?e-1:e].dts&&(v=!0)}v&&l.sort(function(e,t){let r=e.dts-t.dts,i=e.pts-t.pts;return r||i}),n=l[0].dts;let b=(a=l[l.length-1].dts)-n,E=b?Math.round(b/(u-1)):p||e.inputTimeScale/30;if(r){let e=n-h,r=e>E,i=e<-1;if((r||i)&&(r?cU.warn(`AVC: ${pz(e,!0)} ms (${e}dts) hole between fragments detected at ${t.toFixed(3)}`):cU.warn(`AVC: ${pz(-e,!0)} ms (${e}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!i||h>=l[0].pts||pY)){n=h;let t=l[0].pts-e;if(r)l[0].dts=n,l[0].pts=t;else for(let r=0;r<l.length&&!(l[r].dts>t);r++)l[r].dts-=e,l[r].pts-=e;cU.log(`Video: Initial PTS/DTS adjusted: ${pz(t,!0)}/${pz(n,!0)}, delta: ${pz(e,!0)} ms`)}}let T=0,w=0,x=n=Math.max(0,n);for(let e=0;e<u;e++){let t=l[e],r=t.units,i=r.length,n=0;for(let e=0;e<i;e++)n+=r[e].data.length;w+=n,T+=i,t.length=n,t.dts<x?(t.dts=x,x+=E/4|0||1):x=t.dts,m=Math.min(t.pts,m),g=Math.max(t.pts,g)}a=l[u-1].dts;let S=w+4*T+8;try{s=new Uint8Array(S)}catch(e){this.observer.emit(cC.ERROR,cC.ERROR,{type:cP.MUX_ERROR,details:cO.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:S,reason:`fail allocating video mdat ${S}`});return}let A=new DataView(s.buffer);A.setUint32(0,S),s.set(pV.types.mdat,4);let R=!1,L=Number.POSITIVE_INFINITY,k=Number.POSITIVE_INFINITY,D=Number.NEGATIVE_INFINITY,I=Number.NEGATIVE_INFINITY;for(let e=0;e<u;e++){let t;let r=l[e],n=r.units,a=0;for(let e=0,t=n.length;e<t;e++){let t=n[e],r=t.data,i=t.data.byteLength;A.setUint32(f,i),f+=4,s.set(r,f),f+=i,a+=4+i}if(e<u-1)p=l[e+1].dts-r.dts,t=l[e+1].pts-r.pts;else{let n=this.config,a=e>0?r.dts-l[e-1].dts:E;if(t=e>0?r.pts-l[e-1].pts:E,n.stretchShortVideoTrack&&null!==this.nextAudioPts){let e=Math.floor(n.maxBufferHole*o),t=(i?m+i*o:this.nextAudioPts)-r.pts;t>e?((p=t-a)<0?p=a:R=!0,cU.log(`[mp4-remuxer]: It is approximately ${t/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=a}else p=a}let c=Math.round(r.pts-r.dts);L=Math.min(L,p),D=Math.max(D,p),k=Math.min(k,t),I=Math.max(I,t),d.push(new p1(r.key,p,a,c))}if(d.length){if(pY){if(pY<70){let e=d[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(pX&&I-k<D-L&&E/D<.025&&0===d[0].cts){cU.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=n;for(let t=0,r=d.length;t<r;t++){let i=e+d[t].duration,n=e+d[t].cts;if(t<r-1){let e=i+d[t+1].cts;d[t].duration=e-n}else d[t].duration=t?d[t-1].duration:E;d[t].cts=0,e=i}}}p=R||!p?E:p,this.nextAvcDts=h=a+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;let C={data1:pV.moof(e.sequenceNumber++,n,cL({},e,{samples:d})),data2:s,startPTS:m/o,endPTS:(g+p)/o,startDTS:n/o,endDTS:h/o,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:e.dropped};return e.samples=[],e.dropped=0,C}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,r,i,n){let a;let s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,l=s/o,d=this.getSamplesPerFrame(e),u=d*l,c=this._initPTS,h="mp3"===e.segmentCodec&&this.typeSupported.mpeg,f=[],p=void 0!==n,m=e.samples,g=h?0:8,v=this.nextAudioPts||-1,y=t*s,b=c.baseTime*s/c.timescale;if(this.isAudioContiguous=r=r||m.length&&v>0&&(i&&9e3>Math.abs(y-v)||Math.abs(pJ(m[0].pts-b,y)-v)<20*u),m.forEach(function(e){e.pts=pJ(e.pts-b,y)}),!r||v<0){if(!(m=m.filter(e=>e.pts>=0)).length)return;v=0===n?0:i&&!p?Math.max(0,y):m[0].pts}if("aac"===e.segmentCodec){let t=this.config.maxAudioFramesDrift;for(let r=0,i=v;r<m.length;r++){let n=m[r],a=n.pts,o=a-i,l=Math.abs(1e3*o/s);if(o<=-t*u&&p)0===r&&(cU.warn(`Audio frame @ ${(a/s).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*o/s)} ms.`),this.nextAudioPts=v=i=a);else if(o>=t*u&&l<1e4&&p){let t=Math.round(o/u);(i=a-t*u)<0&&(t--,i+=u),0===r&&(this.nextAudioPts=v=i),cU.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(i/s).toFixed(3)}s due to ${Math.round(1e3*o/s)} ms gap.`);for(let a=0;a<t;a++){let t=Math.max(i,0),a=pK.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);a||(cU.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),a=n.unit.subarray()),m.splice(r,0,{unit:a,pts:t}),i+=u,r++}}n.pts=i,i+=u}}let E=null,T=null,w=0,x=m.length;for(;x--;)w+=m[x].unit.byteLength;for(let t=0,i=m.length;t<i;t++){let i=m[t],n=i.unit,s=i.pts;if(null!==T)f[t-1].duration=Math.round((s-T)/l);else{if(r&&"aac"===e.segmentCodec&&(s=v),E=s,!(w>0))return;w+=g;try{a=new Uint8Array(w)}catch(e){this.observer.emit(cC.ERROR,cC.ERROR,{type:cP.MUX_ERROR,details:cO.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:w,reason:`fail allocating audio mdat ${w}`});return}h||(new DataView(a.buffer).setUint32(0,w),a.set(pV.types.mdat,4))}a.set(n,g);let o=n.byteLength;g+=o,f.push(new p1(!0,d,o,0)),T=s}let S=f.length;if(!S)return;let A=f[f.length-1];this.nextAudioPts=v=T+l*A.duration;let R=h?new Uint8Array(0):pV.moof(e.sequenceNumber++,E/l,cL({},e,{samples:f}));e.samples=[];let L=E/s,k=v/s,D={data1:R,data2:a,startPTS:L,endPTS:k,startDTS:L,endDTS:k,type:"audio",hasAudio:!0,hasVideo:!1,nb:S};return this.isAudioContiguous=!0,D}remuxEmptyAudio(e,t,r,i){let n=e.inputTimeScale,a=e.samplerate?e.samplerate:n,s=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,d=(null!==s?s:i.startDTS*n)+l,u=i.endDTS*n+l,c=n/a*1024,h=Math.ceil((u-d)/c),f=pK.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(cU.warn("[mp4-remuxer]: remux empty Audio"),!f){cU.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}let p=[];for(let e=0;e<h;e++){let t=d+e*c;p.push({unit:f,pts:t,dts:t})}return e.samples=p,this.remuxAudio(e,t,r,!1)}}function pJ(e,t){let r;if(null===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}function pZ(e,t,r,i){let n=e.samples.length;if(!n)return;let a=e.inputTimeScale;for(let s=0;s<n;s++){let n=e.samples[s];n.pts=pJ(n.pts-r.baseTime*a/r.timescale,t*a)/a,n.dts=pJ(n.dts-i.baseTime*a/i.timescale,t*a)/a}let s=e.samples;return e.samples=[],{samples:s}}function p0(e,t,r){let i=e.samples.length;if(!i)return;let n=e.inputTimeScale;for(let a=0;a<i;a++){let i=e.samples[a];i.pts=pJ(i.pts-r.baseTime*n/r.timescale,t*n)/n}e.samples.sort((e,t)=>e.pts-t.pts);let a=e.samples;return e.samples=[],{samples:a}}class p1{constructor(e,t,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=r,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class p2{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,r,i){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(function(e,t){if(!e||!t)return e;let r=t.keyId;return r&&t.isCommonEncryption&&hT(e,["moov","trak"]).forEach(e=>{let t=hT(e,["mdia","minf","stbl","stsd"])[0].subarray(8),i=hT(t,["enca"]),n=i.length>0;n||(i=hT(t,["encv"])),i.forEach(e=>{hT(n?e.subarray(28):e.subarray(78),["sinf"]).forEach(e=>{let t=hA(e);if(t){let e=t.subarray(8,24);e.some(e=>0!==e)||(cU.log(`[eme] Patching keyId in 'enc${n?"a":"v"}>sinf>>tenc' box: ${hh.hexDump(e)} -> ${hh.hexDump(r)}`),t.set(r,8))}})})}),e}(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:r}=this;if(!(null!=e&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}let i=this.initData=h_(e);i.audio&&(t=p4(i.audio,cH.AUDIO)),i.video&&(r=p4(i.video,cH.VIDEO));let n={};i.audio&&i.video?n.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:e,id:"main"}:i.audio?n.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?n.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:cU.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n}remux(e,t,r,i,n,a){var s,o,l;let{initPTS:d,lastEndTime:u}=this,c={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};ck(u)||(u=this.lastEndTime=n||0);let h=t.samples;if(!(null!=h&&h.length))return c;let f={initPTS:void 0,timescale:1},p=this.initData;if(null!=(s=p)&&s.length||(this.generateInitSegment(h),p=this.initData),!(null!=(o=p)&&o.length))return cU.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);let m=function(e,t){let r=0,i=0,n=0,a=hT(e,["moof","traf"]);for(let e=0;e<a.length;e++){let s=a[e],o=hT(s,["tfhd"])[0],l=t[hv(o,4)];if(!l)continue;let d=l.default,u=hv(o,0)|(null==d?void 0:d.flags),c=null==d?void 0:d.duration;8&u&&(c=2&u?hv(o,12):hv(o,8));let h=l.timescale||9e4,f=hT(s,["trun"]);for(let e=0;e<f.length;e++)(r=function(e){let t=hv(e,0),r=8;1&t&&(r+=4),4&t&&(r+=4);let i=0,n=hv(e,4);for(let a=0;a<n;a++)256&t&&(i+=hv(e,r),r+=4),512&t&&(r+=4),1024&t&&(r+=4),2048&t&&(r+=4);return i}(f[e]))||!c||(r=c*hv(f[e],4)),l.type===cH.VIDEO?i+=r/h:l.type===cH.AUDIO&&(n+=r/h)}if(0===i&&0===n){let t=1/0,r=0,i=0,n=hT(e,["sidx"]);for(let e=0;e<n.length;e++){let a=function(e){let t=[],r=e[0],i=8,n=hv(e,8);i+=4;let a=0,s=0;0===r?(a=hv(e,i),s=hv(e,i+4),i+=8):(a=hy(e,i),s=hy(e,i+8),i+=16),i+=2;let o=e.length+s,l=hg(e,i);i+=2;for(let r=0;r<l;r++){let r=i,a=hv(e,r);r+=4;let s=2147483647&a;if(1==(2147483648&a)>>>31)return cU.warn("SIDX has hierarchical references (not supported)"),null;let l=hv(e,r);r+=4,t.push({referenceSize:s,subsegmentDuration:l,info:{duration:l/n,start:o,end:o+s-1}}),o+=s,r+=4,i=r}return{earliestPresentationTime:a,timescale:n,version:r,referencesCount:l,references:t}}(n[e]);null!=a&&a.references&&(t=Math.min(t,a.earliestPresentationTime/a.timescale),i=(r=Math.max(r,a.references.reduce((e,t)=>e+t.info.duration||0,0)+a.earliestPresentationTime/a.timescale))-t)}if(i&&ck(i))return i}return i||n}(h,p),g=(l=p,hT(h,["moof","traf"]).reduce((e,t)=>{let r=hT(t,["tfdt"])[0],i=r[0],n=hT(t,["tfhd"]).reduce((e,t)=>{let n=l[hv(t,4)];if(n){let t=hv(r,4);if(1===i){if(4294967295===t)return cU.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;t*=4294967296,t+=hv(r,8)}let a=t/(n.timescale||9e4);if(ck(a)&&(null===e||a<e))return a}return e},null);return null!==n&&ck(n)&&(null===e||n<e)?n:e},null)),v=null===g?n:g;((function(e,t,r,i){if(null===e)return!0;let n=Math.max(i,1);return Math.abs(t-e.baseTime/e.timescale-r)>n})(d,v,n,m)||f.timescale!==d.timescale&&a)&&(f.initPTS=v-n,d&&1===d.timescale&&cU.warn(`Adjusting initPTS by ${f.initPTS-d.baseTime}`),this.initPTS=d={baseTime:f.initPTS,timescale:1});let y=e?v-d.baseTime/d.timescale:u,b=y+m;(function(e,t,r){hT(t,["moof","traf"]).forEach(t=>{hT(t,["tfhd"]).forEach(i=>{let n=e[hv(i,4)];if(!n)return;let a=n.timescale||9e4;hT(t,["tfdt"]).forEach(e=>{let t=e[0],i=r*a;if(i){let r=hv(e,4);if(0===t)r-=i,hE(e,4,r=Math.max(r,0));else{r*=4294967296,r+=hv(e,8),r-=i;let t=Math.floor((r=Math.max(r,0))/4294967296),n=Math.floor(r%4294967296);hE(e,4,t),hE(e,8,n)}}})})})})(p,h,d.baseTime/d.timescale),m>0?this.lastEndTime=b:(cU.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());let E=!!p.audio,T=!!p.video,w="";E&&(w+="audio"),T&&(w+="video");let x={data1:h,startPTS:y,startDTS:y,endPTS:b,endDTS:b,type:w,hasAudio:E,hasVideo:T,nb:1,dropped:0};return c.audio="audio"===x.type?x:void 0,c.video="audio"!==x.type?x:void 0,c.initSegment=f,c.id3=pZ(r,n,d,d),i.samples.length&&(c.text=p0(i,n,d)),c}}function p4(e,t){let r=null==e?void 0:e.codec;if(r&&r.length>4)return r;if(t===cH.AUDIO){if("ec-3"===r||"ac-3"===r||"alac"===r)return r;if("fLaC"===r||"Opus"===r)return hV(r,!1);let e="mp4a.40.5";return cU.info(`Parsed audio codec "${r}" or audio object type not handled. Using "${e}"`),e}return(cU.warn(`Unhandled video codec "${r}"`),"hvc1"===r||"hev1"===r)?"hvc1.1.6.L120.90":"av01"===r?"av01.0.04M.08":"avc1.42e01e"}try{n=self.performance.now.bind(self.performance)}catch(e){cU.debug("Unable to use Performance API on this environment"),n=null==cQ?void 0:cQ.Date.now}let p3=[{demux:pI,remux:p2},{demux:pB,remux:pQ},{demux:pk,remux:pQ},{demux:pH,remux:pQ}];p3.splice(2,0,{demux:pP,remux:pQ});class p5{constructor(e,t,r,i,n){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.vendor=i,this.id=n}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,i){let a;let s=r.transmuxing;s.executeStart=n();let o=new Uint8Array(e),{currentTransmuxState:l,transmuxConfig:d}=this;i&&(this.currentTransmuxState=i);let{contiguous:u,discontinuity:c,trackSwitch:h,accurateTimeOffset:f,timeOffset:p,initSegmentChange:m}=i||l,{audioCodec:g,videoCodec:v,defaultInitPts:y,duration:b,initSegmentData:E}=d,T=(a=null,o.byteLength>0&&(null==t?void 0:t.key)!=null&&null!==t.iv&&null!=t.method&&(a=t),a);if(T&&"AES-128"===T.method){let e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(o,T.key.buffer,T.iv.buffer).then(e=>{let t=this.push(e,null,r);return this.decryptionPromise=null,t}),this.decryptionPromise;{let t=e.softwareDecrypt(o,T.key.buffer,T.iv.buffer);if(r.part>-1&&(t=e.flush()),!t)return s.executeEnd=n(),p8(r);o=new Uint8Array(t)}}let w=this.needsProbing(c,h);if(w){let e=this.configureTransmuxer(o);if(e)return cU.warn(`[transmuxer] ${e.message}`),this.observer.emit(cC.ERROR,cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),s.executeEnd=n(),p8(r)}(c||h||m||w)&&this.resetInitSegment(E,g,v,b,t),(c||m||w)&&this.resetInitialTimestamp(y),u||this.resetContiguity();let x=this.transmux(o,T,p,f,r),S=this.currentTransmuxState;return S.contiguous=!0,S.discontinuity=!1,S.trackSwitch=!1,s.executeEnd=n(),x}flush(e){let t=e.transmuxing;t.executeStart=n();let{decrypter:r,currentTransmuxState:i,decryptionPromise:a}=this;if(a)return a.then(()=>this.flush(e));let s=[],{timeOffset:o}=i;if(r){let t=r.flush();t&&s.push(this.push(t,null,e))}let{demuxer:l,remuxer:d}=this;if(!l||!d)return t.executeEnd=n(),[p8(e)];let u=l.flush(o);return p6(u)?u.then(t=>(this.flushRemux(s,t,e),s)):(this.flushRemux(s,u,e),s)}flushRemux(e,t,r){let{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:d}=this.currentTransmuxState;cU.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);let u=this.remuxer.remux(i,a,s,o,d,l,!0,this.id);e.push({remuxResult:u,chunkMeta:r}),r.transmuxing.executeEnd=n()}resetInitialTimestamp(e){let{demuxer:t,remuxer:r}=this;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){let{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,i,n){let{demuxer:a,remuxer:s}=this;a&&s&&(a.resetInitSegment(e,t,r,i),s.resetInitSegment(e,t,r,n))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,i,n){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,r,i,n):this.transmuxUnencrypted(e,r,i,n)}transmuxUnencrypted(e,t,r,i){let{audioTrack:n,videoTrack:a,id3Track:s,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(n,a,s,o,t,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,r,i,n){return this.demuxer.demuxSampleAes(e,t,r).then(e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,r,i,!1,this.id),chunkMeta:n}))}configureTransmuxer(e){let t;let{config:r,observer:i,typeSupported:n,vendor:a}=this;for(let r=0,i=p3.length;r<i;r++){var s;if(null!=(s=p3[r].demux)&&s.probe(e)){t=p3[r];break}}if(!t)return Error("Failed to find demuxer by probing fragment data");let o=this.demuxer,l=this.remuxer,d=t.remux,u=t.demux;l&&l instanceof d||(this.remuxer=new d(i,r,n,a)),o&&o instanceof u||(this.demuxer=new u(i,r,n),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new pa(this.config)),e}}let p8=e=>({remuxResult:{},chunkMeta:e});function p6(e){return"then"in e&&e.then instanceof Function}class p9{constructor(e,t,r,i,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=i,this.defaultInitPts=n||null}}class p7{constructor(e,t,r,i,n,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=n,this.initSegmentChange=a}}var me={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var o=new n(i,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1)),o.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,a=i.length,s=Array(a);n<a;n++)s[n]=i[n].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,n,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,d,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,n),!0;case 5:return u.fn.call(u.context,t,i,n,a),!0;case 6:return u.fn.call(u.context,t,i,n,a,s),!0}for(d=1,l=Array(c-1);d<c;d++)l[d-1]=arguments[d];u.fn.apply(u.context,l)}else{var h,f=u.length;for(d=0;d<f;d++)switch(u[d].once&&this.removeListener(e,u[d].fn,void 0,!0),c){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,t);break;case 3:u[d].fn.call(u[d].context,t,i);break;case 4:u[d].fn.call(u[d].context,t,i,n);break;default:if(!l)for(h=1,l=Array(c-1);h<c;h++)l[h-1]=arguments[h];u[d].fn.apply(u[d].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,i,n){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||s(this,a);else{for(var l=0,d=[],u=o.length;l<u;l++)(o[l].fn!==t||n&&!o[l].once||i&&o[l].context!==i)&&d.push(o[l]);d.length?this._events[a]=1===d.length?d[0]:d:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(me);var mt=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(me.exports);class mr{constructor(e,t,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;let n=e.config;this.hls=e,this.id=t,this.useWorker=!!n.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;let a=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===cC.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new mt,this.observer.on(cC.FRAG_DECRYPTED,a),this.observer.on(cC.ERROR,a);let s=hF(n.preferManagedMediaSource)||{isTypeSupported:()=>!1},o={mpeg:s.isTypeSupported("audio/mpeg"),mp3:s.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:s.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&"undefined"!=typeof Worker&&(n.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__)){try{n.workerPath?(cU.log(`loading Web Worker ${n.workerPath} for "${t}"`),this.workerContext=function(e){let t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(n.workerPath)):(cU.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){let e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);let{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{let r=Error(`${e.message}  (${e.filename}:${e.lineno})`);n.enableWorker=!1,cU.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(cC.ERROR,{type:cP.OTHER_ERROR,details:cO.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:r})},e.postMessage({cmd:"init",typeSupported:o,vendor:"",id:t,config:JSON.stringify(n)})}catch(e){cU.warn(`Error setting up "${t}" Web Worker, fallback to inline`,e),this.resetWorker(),this.error=null,this.transmuxer=new p5(this.observer,o,n,"",t)}return}this.transmuxer=new p5(this.observer,o,n,"",t)}resetWorker(){if(this.workerContext){let{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{let e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}let e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,r,i,n,a,s,o,l,d){var u,c;l.transmuxing.start=self.performance.now();let{transmuxer:h}=this,f=a?a.start:n.start,p=n.decryptdata,m=this.frag,g=!(m&&n.cc===m.cc),v=!(m&&l.level===m.level),y=m?l.sn-m.sn:-1,b=this.part?l.part-this.part.index:-1,E=0===y&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),T=!v&&(1===y||0===y&&(1===b||E&&b<=0)),w=self.performance.now();(v||y||0===n.stats.parsing.start)&&(n.stats.parsing.start=w),a&&(b||!T)&&(a.stats.parsing.start=w);let x=!(m&&(null==(u=n.initSegment)?void 0:u.url)===(null==(c=m.initSegment)?void 0:c.url)),S=new p7(g,T,o,v,f,x);if(!T||g||x){cU.log(`[transmuxer-interface, ${n.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}
        discontinuity: ${g}
        trackSwitch: ${v}
        contiguous: ${T}
        accurateTimeOffset: ${o}
        timeOffset: ${f}
        initSegmentChange: ${x}`);let e=new p9(r,i,t,s,d);this.configureTransmuxer(e)}if(this.frag=n,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:S},e instanceof ArrayBuffer?[e]:[]);else if(h){let t=h.push(e,p,l,S);p6(t)?(h.async=!0,t.then(e=>{this.handleTransmuxComplete(e)}).catch(e=>{this.transmuxerError(e,l,"transmuxer-interface push error")})):(h.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();let{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let r=t.flush(e);p6(r)||t.async?(p6(r)||(r=Promise.resolve(r)),r.then(t=>{this.handleFlushResult(t,e)}).catch(t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")})):this.handleFlushResult(r,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach(e=>{this.handleTransmuxComplete(e)}),this.onFlush(t)}onWorkerMessage(e){let t=e.data;if(!(null!=t&&t.event)){cU.warn(`worker message received with no ${t?"event name":"data"}`);return}let r=this.hls;if(this.hls)switch(t.event){case"init":{var i;let e=null==(i=this.workerContext)?void 0:i.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":cU[t.data.logType]&&cU[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}configureTransmuxer(e){let{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function mi(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!mn(e[r].attrs,t[r].attrs))return!1;return!0}function mn(e,t,r){let i=e["STABLE-RENDITION-ID"];return i&&!r?i===t["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>e[r]!==t[r])}function ma(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class ms extends pl{constructor(e,t,r){super(e,t,r,"[audio-stream-controller]",h6.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){let{hls:e}=this;e.on(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.on(cC.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(cC.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(cC.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(cC.ERROR,this.onError,this),e.on(cC.BUFFER_RESET,this.onBufferReset,this),e.on(cC.BUFFER_CREATED,this.onBufferCreated,this),e.on(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(cC.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(cC.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(cC.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){let{hls:e}=this;e.off(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.off(cC.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(cC.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(cC.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(cC.ERROR,this.onError,this),e.off(cC.BUFFER_RESET,this.onBufferReset,this),e.off(cC.BUFFER_CREATED,this.onBufferCreated,this),e.off(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(cC.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(cC.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(cC.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:n}){if("main"===r){let e=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:n},this.log(`InitPTS for cc: ${e} found from main: ${i}`),this.videoTrackCC=e,this.state===po.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=po.STOPPED;return}let t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=po.IDLE):(this.loadedmetadata=!1,this.state=po.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){var e,t;switch(this.state){case po.IDLE:this.doTickIdle();break;case po.WAITING_TRACK:{let{levels:t,trackId:r}=this,i=null==t?void 0:null==(e=t[r])?void 0:e.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=po.WAITING_INIT_PTS}break}case po.FRAG_LOADING_WAITING_RETRY:{let e=performance.now(),r=this.retryDate;if(!r||e>=r||null!=(t=this.media)&&t.seeking){let{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=po.IDLE}break}case po.WAITING_INIT_PTS:{let e=this.waitingData;if(e){let{frag:t,part:r,cache:i,complete:n}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=po.FRAG_LOADING;let e={frag:t,part:r,payload:i.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),n&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{let e=this.getLoadPosition(),r=f1.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);0>fO(r.end,this.config.maxFragLookUpTolerance,t)&&(this.log(`Waiting fragment cc (${t.cc}) @ ${t.start} cancelled because another fragment at ${r.end} is needed`),this.clearWaitingFragment())}}else this.state=po.IDLE}}this.onTickEnd()}clearWaitingFragment(){let e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=po.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){let{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){let{hls:e,levels:t,media:r,trackId:i}=this,n=e.config;if(!r&&(this.startFragRequested||!n.startFragPrefetch)||!(null!=t&&t[i]))return;let a=t[i],s=a.details;if(!s||s.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(s)){this.state=po.WAITING_TRACK;return}let o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,cH.AUDIO,h6.AUDIO));let l=this.getFwdBufferInfo(o,h6.AUDIO);if(null===l)return;let{bufferedTrack:d,switchingTrack:u}=this;if(!u&&this._streamEnded(l,s)){e.trigger(cC.BUFFER_EOS,{type:"audio"}),this.state=po.ENDED;return}let c=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,h6.MAIN),h=l.len,f=this.getMaxBufferLength(null==c?void 0:c.len),p=s.fragments,m=p[0].start,g=this.flushing?this.getLoadPosition():l.end;if(u&&r){let e=this.getLoadPosition();d&&!mn(u.attrs,d.attrs)&&(g=e),s.PTSKnown&&e<m&&(l.end>m||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=m+.05)}if(h>=f&&!u&&g<p[p.length-1].start)return;let v=this.getNextFragment(g,s),y=!1;if(v&&this.isLoopLoading(v,g)&&(y=!!v.gap,v=this.getNextFragmentLoopLoading(v,s,l,h6.MAIN,f)),!v){this.bufferFlushed=!0;return}let b=c&&v.start>c.end+s.targetduration;if(b||!(null!=c&&c.len)&&l.len){let e=this.getAppendedFrag(v.start,h6.MAIN);if(null===e||(y||(y=!!e.gap||!!b&&0===c.len),b&&!y||y&&l.nextStart&&l.nextStart<e.end))return}this.loadFragment(v,a,g)}getMaxBufferLength(e){let t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(e=>new fy(e))}onAudioTrackSwitching(e,t){let r=!!t.url;this.trackId=t.id;let{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.switchingTrack=t,this.state=po.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=po.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(cC.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var r,i;if(null==this.mainDetails){this.cachedTrackLoadedData=t;return}let{levels:n}=this,{details:a,id:s}=t;if(!n){this.warn(`Audio tracks were reset while loading level ${s}`);return}this.log(`Audio track ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);let o=n[s],l=0;if(a.live||null!=(r=o.details)&&r.live){this.checkLiveUpdate(a);let e=this.mainDetails;if(a.deltaUpdateFailed||!e)return;!o.details&&a.hasProgramDateTime&&e.hasProgramDateTime?(f6(a,e),l=a.fragments[0].start):l=this.alignPlaylists(a,o.details,null==(i=this.levelLastLoaded)?void 0:i.details)}o.details=a,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(this.mainDetails||a,l),this.state!==po.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=po.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;let{frag:r,part:i,payload:n}=e,{config:a,trackId:s,levels:o}=this;if(!o){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}let l=o[s];if(!l){this.warn("Audio track is undefined on fragment load progress");return}let d=l.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}let u=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2",c=this.transmuxer;c||(c=this.transmuxer=new mr(this.hls,h6.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));let h=this.initPTS[r.cc],f=null==(t=r.initSegment)?void 0:t.data;if(void 0!==h){let e=i?i.index:-1,t=new f2(r.level,r.sn,r.stats.chunkCount,n.byteLength,e,-1!==e);c.push(n,f,u,"",r,i,d.totalduration,!1,t,h)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${d.startSN} ,${d.endSN}],track ${s}`);let{cache:e}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new pd,complete:!1};e.push(new Uint8Array(n)),this.waitingVideoCC=this.videoTrackCC,this.state=po.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){let r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){let{frag:r,part:i}=t;if(r.type!==h6.AUDIO){if(!this.loadedmetadata&&r.type===h6.MAIN){let e=this.videoBuffer||this.media;e&&f1.getBuffered(e).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if("initSegment"!==r.sn){this.fragPrevious=r;let e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(cC.AUDIO_TRACK_SWITCHED,cR({},e)))}this.fragBufferedComplete(r,i)}onError(e,t){var r;if(t.fatal){this.state=po.ERROR;return}switch(t.details){case cO.FRAG_GAP:case cO.FRAG_PARSING_ERROR:case cO.FRAG_DECRYPT_ERROR:case cO.FRAG_LOAD_ERROR:case cO.FRAG_LOAD_TIMEOUT:case cO.KEY_LOAD_ERROR:case cO.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(h6.AUDIO,t);break;case cO.AUDIO_TRACK_LOAD_ERROR:case cO.AUDIO_TRACK_LOAD_TIMEOUT:case cO.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==po.WAITING_TRACK||(null==(r=t.context)?void 0:r.type)!==h8.AUDIO_TRACK||(this.state=po.IDLE);break;case cO.BUFFER_APPEND_ERROR:case cO.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;if(t.details===cO.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case cO.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==cH.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==cH.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===po.ENDED&&(this.state=po.IDLE);let e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,h6.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;let r="audio",{hls:i}=this,{remuxResult:n,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s){this.resetWhenMissingContext(a);return}let{frag:o,part:l,level:d}=s,{details:u}=d,{audio:c,text:h,id3:f,initSegment:p}=n;if(this.fragContextChanged(o)||!u){this.fragmentTracker.removeFragment(o);return}if(this.state=po.PARSING,this.switchingTrack&&c&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){let e=o.initSegment||o;this._bufferInitSegment(d,p.tracks,e,a),i.trigger(cC.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:r,tracks:p.tracks})}if(c){let{startPTS:e,endPTS:t,startDTS:r,endDTS:i}=c;l&&(l.elementaryStreams[cH.AUDIO]={startPTS:e,endPTS:t,startDTS:r,endDTS:i}),o.setElementaryStreamInfo(cH.AUDIO,e,t,r,i),this.bufferFragmentData(c,o,l,a)}if(null!=f&&null!=(t=f.samples)&&t.length){let e=cL({id:r,frag:o,details:u},f);i.trigger(cC.FRAG_PARSING_METADATA,e)}if(h){let e=cL({id:r,frag:o,details:u},h);i.trigger(cC.FRAG_PARSING_USERDATA,e)}}_bufferInitSegment(e,t,r,i){if(this.state!==po.PARSING)return;t.video&&delete t.video;let n=t.audio;if(!n)return;n.id="audio";let a=e.audioCodec;this.log(`Init audio buffer, container:${n.container}, codecs[level/parsed]=[${a}/${n.codec}]`),a&&1===a.split(",").length&&(n.levelCodec=a),this.hls.trigger(cC.BUFFER_CODECS,t);let s=n.initSegment;if(null!=s&&s.byteLength){let e={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:s};this.hls.trigger(cC.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,r){let i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===fX.NOT_LOADED||i===fX.PARTIAL){var n;if("initSegment"===e.sn)this._loadInitSegment(e,t);else if(null!=(n=t.details)&&n.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=po.WAITING_INIT_PTS;let r=this.mainDetails;r&&r.fragments[0].start!==t.details.fragments[0].start&&f6(t.details,r)}else this.startFragRequested=!0,super.loadFragment(e,t,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){let{media:t,bufferedTrack:r}=this,i=null==r?void 0:r.attrs,n=e.attrs;t&&i&&(i.CHANNELS!==n.CHANNELS||r.name!==e.name||r.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){let{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(cC.AUDIO_TRACK_SWITCHED,cR({},e))}}class mo extends fU{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){let{hls:e}=this;e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.on(cC.LEVEL_LOADING,this.onLevelLoading,this),e.on(cC.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(cC.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(cC.ERROR,this.onError,this)}unregisterListeners(){let{hls:e}=this;e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.off(cC.LEVEL_LOADING,this.onLevelLoading,this),e.off(cC.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(cC.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(cC.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){let{id:r,groupId:i,details:n}=t,a=this.tracksInGroup[r];if(!a||a.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${null==a?void 0:a.groupId}`);return}let s=a.details;a.details=t.details,this.log(`Audio track ${r} "${a.name}" lang:${a.lang} group:${i} loaded [${n.startSN}-${n.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){let t=this.hls.levels[e];if(!t)return;let r=t.audioGroups||null,i=this.groupIds,n=this.currentTrack;if(!r||(null==i?void 0:i.length)!==(null==r?void 0:r.length)||null!=r&&r.some(e=>(null==i?void 0:i.indexOf(e))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;let e=this.tracks.filter(e=>!r||-1!==r.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=e;let t=this.hls.config.audioPreference;if(!n&&t){let r=fH(t,e,fV);if(r>-1)n=e[r];else{let e=fH(t,this.tracks);n=this.tracks[e]}}let i=this.findTrackId(n);-1===i&&n&&(i=this.findTrackId(null)),this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==r?void 0:r.join(",")}`),this.hls.trigger(cC.AUDIO_TRACKS_UPDATED,{audioTracks:e});let s=this.trackId;if(-1!==i&&-1===s)this.setAudioTrack(i);else if(e.length&&-1===s){var a;let t=Error(`No audio track selected for current audio group-ID(s): ${null==(a=this.groupIds)?void 0:a.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}else this.shouldReloadPlaylist(n)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&(t.context.type!==h8.AUDIO_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){let t=this.hls;if(t.config.audioPreference=e,e){let r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){let i=this.currentTrack;if(i&&fK(e,i,fV))return i;let n=fH(e,this.tracksInGroup,fV);if(n>-1){let e=this.tracksInGroup[n];return this.setAudioTrack(n),e}if(i){let i=t.loadLevel;-1===i&&(i=t.firstAutoLevel);let n=function(e,t,r,i,n){let a=t[i],s=t.reduce((e,t,r)=>{let i=t.uri;return(e[i]||(e[i]=[])).push(r),e},{})[a.uri];s.length>1&&(i=Math.max.apply(Math,s));let o=a.videoRange,l=a.frameRate,d=a.codecSet.substring(0,4),u=fW(t,i,t=>{if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==d)return!1;let i=t.audioGroups;return fH(e,r.filter(e=>!i||-1!==i.indexOf(e.groupId)),n)>-1});return u>-1?u:fW(t,i,t=>{let i=t.audioGroups;return fH(e,r.filter(e=>!i||-1!==i.indexOf(e.groupId)),n)>-1})}(e,t.levels,r,i,fV);if(-1===n)return null;t.nextLoadLevel=n}if(e.channels||e.audioCodec){let t=fH(e,r);if(t>-1)return r[t]}}}return null}setAudioTrack(e){let t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;let r=this.currentTrack,i=t[e],n=i.details&&!i.details.live;if(e===this.trackId&&i===r&&n||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(cC.AUDIO_TRACK_SWITCHING,cR({},i)),n))return;let a=this.switchParams(i.url,null==r?void 0:r.details,i.details);this.loadPlaylist(a)}findTrackId(e){let t=this.tracksInGroup;for(let r=0;r<t.length;r++){let i=t[r];if((!this.selectDefaultTrack||i.default)&&(!e||fK(e,i,fV)))return r}if(e){let{name:r,lang:i,assocLang:n,characteristics:a,audioCodec:s,channels:o}=e;for(let e=0;e<t.length;e++)if(fK({name:r,lang:i,assocLang:n,characteristics:a,audioCodec:s,channels:o},t[e],fV))return e;for(let r=0;r<t.length;r++){let i=t[r];if(mn(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){let i=t[r];if(mn(e.attrs,i.attrs,["LANGUAGE"]))return r}}return -1}loadPlaylist(e){let t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();let r=t.id,i=t.groupId,n=t.url;if(e)try{n=e.addDirectives(n)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}this.log(`loading audio-track playlist ${r} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(cC.AUDIO_TRACK_LOADING,{url:n,id:r,groupId:i,deliveryDirectives:e||null})}}}class ml extends pl{constructor(e,t,r){super(e,t,r,"[subtitle-stream-controller]",h6.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){let{hls:e}=this;e.on(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.on(cC.ERROR,this.onError,this),e.on(cC.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(cC.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(cC.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(cC.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(cC.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){let{hls:e}=this;e.off(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.off(cC.ERROR,this.onError,this),e.off(cC.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(cC.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(cC.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(cC.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(cC.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=po.IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){let r;let{frag:i,success:n}=t;if(this.fragPrevious=i,this.state=po.IDLE,!n)return;let a=this.tracksBuffered[this.currentTrackId];if(!a)return;let s=i.start;for(let e=0;e<a.length;e++)if(s>=a[e].start&&s<=a[e].end){r=a[e];break}let o=i.start+i.duration;r?r.end=o:(r={start:s,end:o},a.push(r)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null)}onBufferFlushing(e,t){let{startOffset:r,endOffset:i}=t;if(0===r&&i!==Number.POSITIVE_INFINITY){let e=i-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach(t=>{for(let r=0;r<t.length;){if(t[r].end<=e){t.shift();continue}if(t[r].start<e)t[r].start=e;else break;r++}}),this.fragmentTracker.removeFragmentsInRange(r,e,h6.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===h6.MAIN){var r;null!=(r=this.media)&&r.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){let r=t.frag;(null==r?void 0:r.type)===h6.SUBTITLE&&(t.details===cO.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==po.STOPPED&&(this.state=po.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&mi(this.levels,t)){this.levels=t.map(e=>new fy(e));return}this.tracksBuffered=[],this.levels=t.map(e=>{let t=new fy(e);return this.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,h6.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,!(null!=(r=this.levels)&&r.length)||-1===this.currentTrackId){this.clearInterval();return}let i=this.levels[this.currentTrackId];null!=i&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var r,i;let{currentTrackId:n,levels:a}=this,{details:s,id:o}=t;if(!a){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}let l=a[o];if(o>=a.length||!l)return;this.log(`Subtitle track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let d=0;if(s.live||null!=(r=l.details)&&r.live){let e=this.mainDetails;if(s.deltaUpdateFailed||!e)return;let t=e.fragments[0];l.details?0===(d=this.alignPlaylists(s,l.details,null==(i=this.levelLastLoaded)?void 0:i.details))&&t&&fw(s,d=t.start):s.hasProgramDateTime&&e.hasProgramDateTime?(f6(s,e),d=s.fragments[0].start):t&&fw(s,d=t.start)}l.details=s,this.levelLastLoaded=l,o===n&&(this.startFragRequested||!this.mainDetails&&s.live||this.setStartPosition(this.mainDetails||s,d),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===po.IDLE&&!fP(null,s.fragments,this.media.currentTime,0)&&(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0))}_handleFragmentLoadComplete(e){let{frag:t,payload:r}=e,i=t.decryptdata,n=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&"AES-128"===i.method){let e=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).catch(e=>{throw n.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e}).then(r=>{let i=performance.now();n.trigger(cC.FRAG_DECRYPTED,{frag:t,payload:r,stats:{tstart:e,tdecrypt:i}})}).catch(e=>{this.warn(`${e.name}: ${e.message}`),this.state=po.IDLE})}}doTick(){if(!this.media){this.state=po.IDLE;return}if(this.state===po.IDLE){let{currentTrackId:e,levels:t}=this,r=null==t?void 0:t[e];if(!r||!t.length||!r.details)return;let{config:i}=this,n=this.getLoadPosition(),{end:a,len:s}=f1.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n,i.maxBufferHole),o=this.getFwdBufferInfo(this.media,h6.MAIN),l=r.details;if(s>this.getMaxBufferLength(null==o?void 0:o.len)+l.levelTargetDuration)return;let d=l.fragments,u=d.length,c=l.edge,h=null,f=this.fragPrevious;if(a<c){let e=i.maxFragLookUpTolerance;(h=fP(f,d,Math.max(d[0].start,a),a>c-e?0:e))||!f||!(f.start<d[0].start)||(h=d[0])}else h=d[u-1];if(!h)return;if("initSegment"!==(h=this.mapToInitFragWhenRequired(h)).sn){let e=d[h.sn-l.startSN-1];e&&e.cc===h.cc&&this.fragmentTracker.getState(e)===fX.NOT_LOADED&&(h=e)}this.fragmentTracker.getState(h)===fX.NOT_LOADED&&this.loadFragment(h,r,a)}}getMaxBufferLength(e){let t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,r){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,r))}get mediaBufferTimeRanges(){return new md(this.tracksBuffered[this.currentTrackId]||[])}}class md{constructor(e){this.buffered=void 0;let t=(t,r,i)=>{if((r>>>=0)>i-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${i})`);return e[r][t]};this.buffered={get length(){return e.length},end:r=>t("end",r,e.length),start:r=>t("start",r,e.length)}}}class mu extends fU{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null,t=fa(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}let r=this.findTrackForTextTrack(e);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){let{hls:e}=this;e.on(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.on(cC.LEVEL_LOADING,this.onLevelLoading,this),e.on(cC.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(cC.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(cC.ERROR,this.onError,this)}unregisterListeners(){let{hls:e}=this;e.off(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.off(cC.LEVEL_LOADING,this.onLevelLoading,this),e.off(cC.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(cC.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(cC.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),fa(this.media.textTracks).forEach(e=>{fi(e)}),this.subtitleTrack=-1,this.media=null)}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){let{id:r,groupId:i,details:n}=t,a=this.tracksInGroup[r];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${null==a?void 0:a.groupId}`);return}let s=a.details;a.details=t.details,this.log(`Subtitle track ${r} "${a.name}" lang:${a.lang} group:${i} loaded [${n.startSN}-${n.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){let t=this.hls.levels[e];if(!t)return;let r=t.subtitleGroups||null,i=this.groupIds,n=this.currentTrack;if(!r||(null==i?void 0:i.length)!==(null==r?void 0:r.length)||null!=r&&r.some(e=>(null==i?void 0:i.indexOf(e))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;let e=this.tracks.filter(e=>!r||-1!==r.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=e;let t=this.hls.config.subtitlePreference;if(!n&&t){this.selectDefaultTrack=!1;let r=fH(t,e);if(r>-1)n=e[r];else{let e=fH(t,this.tracks);n=this.tracks[e]}}let i=this.findTrackId(n);-1===i&&n&&(i=this.findTrackId(null)),this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==r?void 0:r.join(",")}" group-id`),this.hls.trigger(cC.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:e}),-1!==i&&-1===this.trackId&&this.setSubtitleTrack(i)}else this.shouldReloadPlaylist(n)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){let t=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<t.length;i++){let n=t[i];if((!r||n.default)&&(r||e)&&(!e||fK(n,e)))return i}if(e){for(let r=0;r<t.length;r++){let i=t[r];if(mn(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){let i=t[r];if(mn(e.attrs,i.attrs,["LANGUAGE"]))return r}}return -1}findTrackForTextTrack(e){if(e){let t=this.tracksInGroup;for(let r=0;r<t.length;r++)if(ma(t[r],e))return r}return -1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==h8.SUBTITLE_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){let t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){let r=this.currentTrack;if(r&&fK(e,r))return r;let i=fH(e,this.tracksInGroup);if(i>-1){let e=this.tracksInGroup[i];return this.setSubtitleTrack(i),e}if(r);else{let r=fH(e,t);if(r>-1)return t[r]}}}return null}loadPlaylist(e){super.loadPlaylist();let t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){let r=t.id,i=t.groupId,n=t.url;if(e)try{n=e.addDirectives(n)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(cC.SUBTITLE_TRACK_LOADING,{url:n,id:r,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){let e;let{media:t}=this;if(!t)return;let r=fa(t.textTracks),i=this.currentTrack;if(!i||(e=r.filter(e=>ma(i,e))[0])||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`),[].slice.call(r).forEach(t=>{"disabled"!==t.mode&&t!==e&&(t.mode="disabled")}),e){let t=this.subtitleDisplay?"showing":"hidden";e.mode!==t&&(e.mode=t)}}setSubtitleTrack(e){let t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!ck(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;let r=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(cC.SUBTITLE_TRACK_SWITCH,{id:e});return}let n=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&n)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));let{id:a,groupId:s="",name:o,type:l,url:d}=i;this.hls.trigger(cC.SUBTITLE_TRACK_SWITCH,{id:a,groupId:s,name:o,type:l,url:d});let u=this.switchParams(i.url,null==r?void 0:r.details,i.details);this.loadPlaylist(u)}}class mc{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,r){let i=this.queues[t];i.push(e),1!==i.length||r||this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;let r=new Promise(e=>{t=e}),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),r}executeNext(e){let t=this.queues[e];if(t.length){let r=t[0];try{r.execute()}catch(i){cU.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),r.onError(i);let t=this.buffers[e];null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}let mh=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class mf{constructor(e){var t;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=e=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{let{media:e,mediaSource:t}=this;this.log("Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(cC.MEDIA_ATTACHED,{media:e,mediaSource:t})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{let{mediaSrc:e,_objectUrl:t}=this;e!==t&&cU.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e;let r="[buffer-controller]";this.appendSource=(t=hF(e.config.preferManagedMediaSource),"undefined"!=typeof self&&t===self.ManagedMediaSource),this.log=cU.log.bind(cU,r),this.warn=cU.warn.bind(cU,r),this.error=cU.error.bind(cU,r),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){let{hls:e}=this;e.on(cC.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.on(cC.BUFFER_RESET,this.onBufferReset,this),e.on(cC.BUFFER_APPENDING,this.onBufferAppending,this),e.on(cC.BUFFER_CODECS,this.onBufferCodecs,this),e.on(cC.BUFFER_EOS,this.onBufferEos,this),e.on(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(cC.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(cC.FRAG_PARSED,this.onFragParsed,this),e.on(cC.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){let{hls:e}=this;e.off(cC.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.off(cC.BUFFER_RESET,this.onBufferReset,this),e.off(cC.BUFFER_APPENDING,this.onBufferAppending,this),e.off(cC.BUFFER_CODECS,this.onBufferCodecs,this),e.off(cC.BUFFER_EOS,this.onBufferEos,this),e.off(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(cC.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(cC.FRAG_PARSED,this.onFragParsed,this),e.off(cC.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new mc(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let r=2;(!t.audio||t.video)&&t.altAudio||(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){let r=this.media=t.media,i=hF(this.appendSource);if(r&&i){var n;let e=this.mediaSource=new i;this.log(`created media source: ${null==(n=e.constructor)?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming));let t=this._objectUrl=self.URL.createObjectURL(e);if(this.appendSource)try{r.removeAttribute("src");let i=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||i&&e instanceof i,mp(r),function(e,t){let r=self.document.createElement("source");r.type="video/mp4",r.src=t,e.appendChild(r)}(r,t),r.load()}catch(e){r.src=t}else r.src=t;r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){let{media:e,mediaSource:t,_objectUrl:r}=this;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){this.warn(`onMediaDetaching: ${e.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(e.removeAttribute("src"),this.appendSource&&mp(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(cC.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer()}resetBuffer(e){let t=this.sourceBuffer[e];try{if(t){var r;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(t){this.warn(`onBufferReset ${e}`,t)}}onBufferCodecs(e,t){let r=this.getSourceBufferTypes().length,i=Object.keys(t);if(i.forEach(e=>{if(r){let r=this.tracks[e];if(r&&"function"==typeof r.buffer.changeType){var i;let{id:n,codec:a,levelCodec:s,container:o,metadata:l}=t[e],d=hW(r.codec,r.levelCodec),u=null==d?void 0:d.replace(mh,"$1"),c=hW(a,s),h=null==(i=c)?void 0:i.replace(mh,"$1");if(c&&u!==h){"audio"===e.slice(0,5)&&(c=hV(c,this.appendSource));let t=`${o};codecs=${c}`;this.appendChangeType(e,t),this.log(`switching codec ${d} to ${c}`),this.tracks[e]={buffer:r.buffer,codec:a,container:o,levelCodec:s,metadata:l,id:n}}}}else this.pendingTracks[e]=t[e]}),r)return;let n=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==n&&(this.log(`${n} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=n),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(e,t){let{operationQueue:r}=this;r.append({execute:()=>{let i=this.sourceBuffer[e];i&&(this.log(`changing ${e} sourceBuffer type to ${t}`),i.changeType(t)),r.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}},e,!!this.pendingTracks[e])}onBufferAppending(e,t){let{hls:r,operationQueue:i,tracks:n}=this,{data:a,type:s,frag:o,part:l,chunkMeta:d}=t,u=d.buffering[s],c=self.performance.now();u.start=c;let h=o.stats.buffering,f=l?l.stats.buffering:null;0===h.start&&(h.start=c),f&&0===f.start&&(f.start=c);let p=n.audio,m=!1;"audio"===s&&(null==p?void 0:p.container)==="audio/mpeg"&&(m=!this.lastMpegAudioChunk||1===d.id||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);let g=o.start;i.append({execute:()=>{if(u.executeStart=self.performance.now(),m){let e=this.sourceBuffer[s];if(e){let t=g-e.timestampOffset;Math.abs(t)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${g} (delta: ${t}) sn: ${o.sn})`),e.timestampOffset=g)}}this.appendExecutor(a,s)},onStart:()=>{},onComplete:()=>{let e=self.performance.now();u.executeEnd=u.end=e,0===h.first&&(h.first=e),f&&0===f.first&&(f.first=e);let{sourceBuffer:t}=this,r={};for(let e in t)r[e]=f1.getBuffered(t[e]);this.appendErrors[s]=0,"audio"===s||"video"===s?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(cC.BUFFER_APPENDED,{type:s,frag:o,part:l,chunkMeta:d,parent:o.type,timeRanges:r})},onError:e=>{let t={type:cP.MEDIA_ERROR,parent:o.type,details:cO.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:o,part:l,chunkMeta:d,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=cO.BUFFER_FULL_ERROR;else{let e=++this.appendErrors[s];t.details=cO.BUFFER_APPEND_ERROR,this.warn(`Failed ${e}/${r.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer`),e>=r.config.appendErrorMaxRetry&&(t.fatal=!0)}r.trigger(cC.ERROR,t)}},s,!!this.pendingTracks[s])}onBufferFlushing(e,t){let{operationQueue:r}=this,i=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(cC.BUFFER_FLUSHED,{type:e})},onError:t=>{this.warn(`Failed to remove from ${e} SourceBuffer`,t)}});t.type?r.append(i(t.type),t.type):this.getSourceBufferTypes().forEach(e=>{r.append(i(e),e)})}onFragParsed(e,t){let{frag:r,part:i}=t,n=[],a=i?i.elementaryStreams:r.elementaryStreams;a[cH.AUDIOVIDEO]?n.push("audiovideo"):(a[cH.AUDIO]&&n.push("audio"),a[cH.VIDEO]&&n.push("video")),0===n.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(()=>{let e=self.performance.now();r.stats.buffering.end=e,i&&(i.stats.buffering.end=e);let t=i?i.stats:r.stats;this.hls.trigger(cC.FRAG_BUFFERED,{frag:r,part:i,stats:t,id:r.type})},n)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((e,r)=>{let i=this.sourceBuffer[r];return!i||t.type&&t.type!==r||(i.ending=!0,i.ended||(i.ended=!0,this.log(`${r} sourceBuffer now EOS`))),e&&!!(!i||i.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(e=>{let t=this.sourceBuffer[e];t&&(t.ending=!1)});let{mediaSource:e}=this;if(!e||"open"!==e.readyState){e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),e.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){let{hls:e,details:t,media:r}=this;if(!r||null===t||!this.getSourceBufferTypes().length)return;let i=e.config,n=r.currentTime,a=t.levelTargetDuration,s=t.live&&null!==i.liveBackBufferLength?i.liveBackBufferLength:i.backBufferLength;if(ck(s)&&s>0){let e=Math.max(s,a);this.flushBackBuffer(n,a,Math.floor(n/a)*a-e)}if(ck(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){let e=Math.max(Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),a);this.flushFrontBuffer(n,a,Math.floor(n/a)*a+e)}}flushBackBuffer(e,t,r){let{details:i,sourceBuffer:n}=this;this.getSourceBufferTypes().forEach(a=>{let s=n[a];if(s){let n=f1.getBuffered(s);if(n.length>0&&r>n.start(0)){if(this.hls.trigger(cC.BACK_BUFFER_REACHED,{bufferEnd:r}),null!=i&&i.live)this.hls.trigger(cC.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(s.ended&&n.end(n.length-1)-e<2*t){this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(cC.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:a})}}})}flushFrontBuffer(e,t,r){let{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(n=>{let a=i[n];if(a){let i=f1.getBuffered(a),s=i.length;if(s<2)return;let o=i.start(s-1),l=i.end(s-1);if(r>o||e>=o&&e<=l)return;if(a.ended&&e-l<2*t){this.log(`Cannot flush ${n} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(cC.BUFFER_FLUSHING,{startOffset:o,endOffset:1/0,type:n})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;let{details:e,hls:t,media:r,mediaSource:i}=this,n=e.fragments[0].start+e.totalduration,a=r.duration,s=ck(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(n>s&&n>a||!ck(a))&&(this.log(`Updating Media Source duration to ${n.toFixed(3)}`),i.duration=n)}updateSeekableRange(e){let t=this.mediaSource,r=e.fragments;if(r.length&&e.live&&null!=t&&t.setLiveSeekableRange){let i=Math.max(0,r[0].start),n=Math.max(i,i+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${i}-${n}.`),t.setLiveSeekableRange(i,n)}}checkPendingTracks(){let{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:r}=this,i=Object.keys(r).length;if(i&&(!e||2===i||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};let e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(cC.BUFFER_CREATED,{tracks:this.tracks}),e.forEach(e=>{t.executeNext(e)});else{let e=Error("could not create source buffer for media codec(s)");this.hls.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){let{sourceBuffer:t,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(let n in e)if(!t[n]){var i;let a=e[n];if(!a)throw Error(`source buffer exists for track ${n}, however track does not`);let s=(null==(i=a.levelCodec)?void 0:i.indexOf(","))===-1?a.levelCodec:a.codec;s&&"audio"===n.slice(0,5)&&(s=hV(s,this.appendSource));let o=`${a.container};codecs=${s}`;this.log(`creating sourceBuffer(${o})`);try{let e=t[n]=r.addSourceBuffer(o);this.addBufferListener(n,"updatestart",this._onSBUpdateStart),this.addBufferListener(n,"updateend",this._onSBUpdateEnd),this.addBufferListener(n,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(n,"bufferedchange",(e,t)=>{let r=t.removedRanges;null!=r&&r.length&&this.hls.trigger(cC.BUFFER_FLUSHED,{type:n})}),this.tracks[n]={buffer:e,codec:s,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(e){this.error(`error while trying to add sourceBuffer: ${e.message}`),this.hls.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:n,mimeType:o})}}}get mediaSrc(){var e,t;let r=(null==(e=this.media)?void 0:null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==r?void 0:r.src}_onSBUpdateStart(e){let{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if((null==(t=this.mediaSource)?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}let{operationQueue:r}=this;r.current(e).onComplete(),r.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var r;let i=Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(r=this.mediaSource)?void 0:r.readyState}`);this.error(`${i}`,t),this.hls.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});let n=this.operationQueue.current(e);n&&n.onError(i)}removeExecutor(e,t,r){let{media:i,mediaSource:n,operationQueue:a,sourceBuffer:s}=this,o=s[e];if(!i||!n||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}let l=ck(i.duration)?i.duration:1/0,d=ck(n.duration)?n.duration:1/0,u=Math.max(0,t),c=Math.min(r,l,d);c>u&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${u},${c}] from the ${e} SourceBuffer`),o.remove(u,c)):a.shiftAndExecuteNext(e)}appendExecutor(e,t){let r=this.sourceBuffer[t];if(!r){if(!this.pendingTracks[t])throw Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);return}r.ended=!1,r.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}let{operationQueue:r}=this;Promise.all(t.map(e=>r.appendBlocker(e))).then(()=>{e(),t.forEach(e=>{let t=this.sourceBuffer[e];null!=t&&t.updating||r.shiftAndExecuteNext(e)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,r){let i=this.sourceBuffer[e];if(!i)return;let n=r.bind(this,e);this.listeners[e].push({event:t,listener:n}),i.addEventListener(t,n)}removeBufferListeners(e){let t=this.sourceBuffer[e];t&&this.listeners[e].forEach(e=>{t.removeEventListener(e.event,e.listener)})}}function mp(e){let t=e.querySelectorAll("source");[].slice.call(t).forEach(t=>{e.removeChild(t)})}let mm={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},mg=e=>String.fromCharCode(mm[e]||e),mv={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},my={17:2,18:4,21:6,22:8,23:10,19:13,20:15},mb={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},mE={25:2,26:4,29:6,30:8,31:10,27:13,28:15},mT=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class m_{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){let r="function"==typeof t?t():t;cU.log(`${this.time} [${e}] ${r}`)}}}let mw=function(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class mx{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){let t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){let i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class mS{constructor(){this.uchar=" ",this.penState=new mx}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class mA{constructor(e){this.chars=[],this.pos=0,this.currPenState=new mx,this.cueStartTime=null,this.logger=void 0;for(let e=0;e<100;e++)this.chars.push(new mS);this.logger=e}equals(e){for(let t=0;t<100;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<100;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=100)}moveCursor(e){let t=this.pos+e;if(e>1)for(let e=this.pos+1;e<t+1;e++)this.chars[e].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();let t=mg(e);if(this.pos>=100){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<100;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){let e=[],t=!0;for(let r=0;r<100;r++){let i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class mR{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<15;t++)this.rows.push(new mA(e));this.logger=e}reset(){for(let e=0;e<15;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<15;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let e=0;e<15;e++)this.rows[e].clear();let e=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){let i=r.rows[e].cueStartTime,n=this.logger.time;if(null!==i&&null!==n&&i<n)for(let i=0;i<this.nrRollUpRows;i++)this.rows[t-this.nrRollUpRows+i+1].copy(r.rows[e+i])}}this.currRow=t;let r=this.rows[this.currRow];if(null!==e.indent){let t=Math.max(e.indent-1,0);r.setCursor(e.indent),e.color=r.chars[t].penState.foreground}let i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());let e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;let t=[],r="",i=-1;for(let r=0;r<15;r++){let n=this.rows[r].getTextString();n&&(i=r+1,e?t.push("Row "+i+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r}getTextAndFormat(){return this.rows}}class mL{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new mR(r),this.nonDisplayedMemory=new mR(r),this.lastOutputScreen=new mR(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);let t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){let e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){let t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{let r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){let t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&!this.displayedMemory.isEmpty()&&(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)}}class mk{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;let i=this.logger=new m_;this.channels=[null,new mL(e,t,i),new mL(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let e=0;e<t.length;e+=2){var r;let i=127&t[e],n=127&t[e+1],a=!1,s=null;if(0===i&&0===n)continue;this.logger.log(3,()=>"["+mw([t[e],t[e+1]])+"] -> ("+mw([i,n])+")");let o=this.cmdHistory;if(i>=16&&i<=31){if(o.a===i&&o.b===n){o.a=null,o.b=null,this.logger.log(3,()=>"Repeated command ("+mw([i,n])+") is dropped");continue}(r=this.cmdHistory).a=i,r.b=n,(a=this.parseCmd(i,n))||(a=this.parseMidrow(i,n)),a||(a=this.parsePAC(i,n)),a||(a=this.parseBackgroundAttributes(i,n))}else o.a=null,o.b=null;if(!a&&(s=this.parseChars(i,n))){let e=this.currentChannel;e&&e>0?this.channels[e].insertChars(s):this.logger.log(2,"No channel found yet. TEXT-MODE?")}a||s||this.logger.log(2,()=>"Couldn't parse cleaned data "+mw([i,n])+" orig: "+mw([t[e],t[e+1]]))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;let r=20===e||21===e||23===e?1:2,i=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let r=0;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;let i=this.channels[r];return!!i&&(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+mw([e,t])+")"),!0)}return!1}parsePAC(e,t){let r;let i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,n=(16===e||24===e)&&t>=64&&t<=95;if(!(i||n))return!1;let a=e<=23?1:2;r=t>=64&&t<=95?1===a?mv[e]:mb[e]:1===a?my[e]:mE[e];let s=this.channels[a];return!!s&&(s.setPAC(this.interpretPAC(r,t)),this.currentChannel=a,!0)}interpretPAC(e,t){let r;let i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=(1&r)==1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i}parseChars(e,t){let r;let i=null,n=null;if(e>=25?(r=2,n=e-8):(r=1,n=e),n>=17&&n<=19){let e;e=17===n?t+80:18===n?t+112:t+144,this.logger.log(2,()=>"Special char '"+mg(e)+"' in channel "+r),i=[e]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+mw(i).join(",")),i}parseBackgroundAttributes(e,t){let r;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;let i={};return 16===e||24===e?(r=Math.floor((t-32)/2),i.background=mT[r],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),this.channels[e<=23?1:2].setBkgData(i),!0}reset(){var e;for(let e=0;e<Object.keys(this.channels).length;e++){let t=this.channels[e];t&&t.reset()}(e=this.cmdHistory).a=null,e.b=null}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){let r=this.channels[t];r&&r.cueSplitAtTime(e)}}}class mD{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var mI=function(){if(null!=cQ&&cQ.VTTCue)return self.VTTCue;let e=["","lr","rl"],t=["start","middle","end","left","right"];function r(e,t){if("string"!=typeof t||!Array.isArray(e))return!1;let r=t.toLowerCase();return!!~e.indexOf(r)&&r}function i(e,...t){let r=1;for(;r<arguments.length;r++){let t=arguments[r];for(let r in t)e[r]=t[r]}return e}function n(n,a,s){let o={enumerable:!0};this.hasBeenReset=!1;let l="",d=!1,u=n,c=a,h=s,f=null,p="",m=!0,g="auto",v="start",y=50,b="middle",E=50,T="middle";Object.defineProperty(this,"id",i({},o,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(this,"pauseOnExit",i({},o,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(this,"startTime",i({},o,{get:function(){return u},set:function(e){if("number"!=typeof e)throw TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(this,"endTime",i({},o,{get:function(){return c},set:function(e){if("number"!=typeof e)throw TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(this,"text",i({},o,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(this,"region",i({},o,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(this,"vertical",i({},o,{get:function(){return p},set:function(t){let i=r(e,t);if(!1===i)throw SyntaxError("An invalid or illegal string was specified.");p=i,this.hasBeenReset=!0}})),Object.defineProperty(this,"snapToLines",i({},o,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(this,"line",i({},o,{get:function(){return g},set:function(e){if("number"!=typeof e&&"auto"!==e)throw SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(this,"lineAlign",i({},o,{get:function(){return v},set:function(e){let i=r(t,e);if(!i)throw SyntaxError("An invalid or illegal string was specified.");v=i,this.hasBeenReset=!0}})),Object.defineProperty(this,"position",i({},o,{get:function(){return y},set:function(e){if(e<0||e>100)throw Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(this,"positionAlign",i({},o,{get:function(){return b},set:function(e){let i=r(t,e);if(!i)throw SyntaxError("An invalid or illegal string was specified.");b=i,this.hasBeenReset=!0}})),Object.defineProperty(this,"size",i({},o,{get:function(){return E},set:function(e){if(e<0||e>100)throw Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(this,"align",i({},o,{get:function(){return T},set:function(e){let i=r(t,e);if(!i)throw SyntaxError("An invalid or illegal string was specified.");T=i,this.hasBeenReset=!0}})),this.displayState=void 0}return n.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},n}();class mC{decode(e,t){if(!e)return"";if("string"!=typeof e)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function mP(e){function t(e,t,r,i){return(0|e)*3600+(0|t)*60+(0|r)+parseFloat(i||0)}let r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}class mO{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){let r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function mN(e,t,r,i){let n=i?e.split(i):[e];for(let e in n){if("string"!=typeof n[e])continue;let i=n[e].split(r);2===i.length&&t(i[0],i[1])}}let mM=new mI(0,0,""),mF="middle"===mM.align?"middle":"center";function mU(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class mB{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new mC,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){let t=this;function r(){let e=t.buffer,r=0;for(e=mU(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;let i=e.slice(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.slice(r),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;let i=(e=r()).match(/^()?WEBVTT([ \t].*)?$/);if(!(null!=i&&i[0]))throw Error("Malformed WebVTT signature.");t.state="HEADER"}let n=!1;for(;t.buffer&&/\r\n|\n/.test(t.buffer);)switch(n?n=!1:e=r(),t.state){case"HEADER":if(/:/.test(e)){var i;i=e,mN(i,function(e,t){},/:/)}else e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new mI(0,0,""),t.state="CUE",-1===e.indexOf("-->")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{!function(e,t,r){let i=e;function n(){let t=mP(e);if(null===t)throw Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=n(),a(),"-->"!==e.slice(0,3))throw Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);e=e.slice(3),a(),t.endTime=n(),a(),function(e,t){let i=new mO;mN(e,function(e,t){let n;switch(e){case"region":for(let n=r.length-1;n>=0;n--)if(r[n].id===t){i.set(e,r[n].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":n=t.split(","),i.integer(e,n[0]),i.percent(e,n[0])&&i.set("snapToLines",!1),i.alt(e,n[0],["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",mF,"end"]);break;case"position":n=t.split(","),i.percent(e,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",mF,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",mF,"end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");let n=i.get("line","auto");"auto"===n&&-1===mM.line&&(n=-1),t.line=n,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",mF);let a=i.get("position","auto");"auto"===a&&50===mM.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}(e,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{let r=-1!==e.indexOf("-->");if(!e||r&&(n=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw Error("Malformed WebVTT signature.")}catch(e){this.onparsingerror&&this.onparsingerror(e)}return this.onflush&&this.onflush(),this}}let mj=/\r\n|\n\r|\n|\r/g,m$=function(e,t,r=0){return e.slice(r,r+t.length)===t},mG=function(e){let t=parseInt(e.slice(-3)),r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),n=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!ck(t)||!ck(r)||!ck(i)||!ck(n))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+(1e3*r+6e4*i+36e5*n)},mq=function(e){let t=5381,r=e.length;for(;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()};function mH(e,t,r){return mq(e.toString())+mq(t.toString())+mq(r)}let mK=function(e,t,r){let i=e[t],n=e[i.prevCC];if(!n||!n.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;null!=(a=n)&&a.new;){var a;e.ccOffset+=i.start-n.start,i.new=!1,n=e[(i=n).prevCC]}e.presentationOffset=r},mV="stpp.ttml.im1t",mW=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,mz=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,mY={left:"start",center:"center",right:"end",start:"start",end:"end"};function mX(e,t,r,i){let n=hT(new Uint8Array(e),["mdat"]);if(0===n.length){i(Error("Could not parse IMSC1 mdat"));return}let a=n.map(e=>hc(e)),s=function(e,t,r=1,i=!1){return pW(e,1,1/r,i)}(t.baseTime,0,t.timescale);try{a.forEach(e=>r(function(e,t){let r=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!r)throw Error("Invalid ttml");let i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(i).reduce((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||i[t],e),{}),a="preserve"!==r.getAttribute("xml:space"),s=mJ(mQ(r,"styling","style")),o=mJ(mQ(r,"layout","region")),l=mQ(r,"body","[begin]");return[].map.call(l,e=>{let r=function e(t,r){return[].slice.call(t.childNodes).reduce((t,i,n)=>{var a;return"br"===i.nodeName&&n?t+"\n":null!=(a=i.childNodes)&&a.length?e(i,r):r?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}(e,a);if(!r||!e.hasAttribute("begin"))return null;let i=m1(e.getAttribute("begin"),n),l=m1(e.getAttribute("dur"),n),d=m1(e.getAttribute("end"),n);if(null===i)throw m0(e);if(null===d){if(null===l)throw m0(e);d=i+l}let u=new mI(i-t,d-t,r);u.id=mH(u.startTime,u.endTime,u.text);let c=o[e.getAttribute("region")],h=function(e,t,r){let i="http://www.w3.org/ns/ttml#styling",n=null,a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return a&&r.hasOwnProperty(a)&&(n=r[a]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((r,a)=>{let s=mZ(t,i,a)||mZ(e,i,a)||mZ(n,i,a);return s&&(r[a]=s),r},{})}(c,s[e.getAttribute("style")],s),{textAlign:f}=h;if(f){let e=mY[f];e&&(u.lineAlign=e),u.align=f}return cL(u,h),u}).filter(e=>null!==e)}(e,s)))}catch(e){i(e)}}function mQ(e,t,r){let i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(r)):[]}function mJ(e){return e.reduce((e,t)=>{let r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function mZ(e,t,r){return e&&e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function m0(e){return Error(`Could not parse ttml timestamp ${e}`)}function m1(e,t){if(!e)return null;let r=mP(e);return null===r&&(mW.test(e)?r=function(e,t){let r=mW.exec(e),i=(0|r[4])+(0|r[5])/t.subFrameRate;return(0|r[1])*3600+(0|r[2])*60+(0|r[3])+i/t.frameRate}(e,t):mz.test(e)&&(r=function(e,t){let r=mz.exec(e),i=Number(r[1]);switch(r[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(e,t))),r}class m2{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=m5(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(cC.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(cC.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(cC.FRAG_LOADING,this.onFragLoading,this),e.on(cC.FRAG_LOADED,this.onFragLoaded,this),e.on(cC.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(cC.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(cC.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(cC.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(cC.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){let{hls:e}=this;e.off(cC.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(cC.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(cC.FRAG_LOADING,this.onFragLoading,this),e.off(cC.FRAG_LOADED,this.onFragLoaded,this),e.off(cC.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(cC.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(cC.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(cC.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(cC.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){let e=new mD(this,"textTrack1"),t=new mD(this,"textTrack2"),r=new mD(this,"textTrack3"),i=new mD(this,"textTrack4");this.cea608Parser1=new mk(1,e,t),this.cea608Parser2=new mk(3,r,i)}}addCues(e,t,r,i,n){let a=!1;for(let e=n.length;e--;){var s;let i=n[e],o=(s=i[0],Math.min(i[1],r)-Math.max(s,t));if(o>=0&&(i[0]=Math.min(i[0],t),i[1]=Math.max(i[1],r),a=!0,o/(r-t)>.5))return}if(a||n.push([t,r]),this.config.renderTextTracksNatively){let n=this.captionsTracks[e];this.Cues.newCue(n,t,r,i)}else{let n=this.Cues.newCue(null,t,r,i);this.hls.trigger(cC.CUES_PARSED,{type:"captions",cues:n,track:e})}}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:n}){let{unparsedVttFrags:a}=this;"main"===r&&(this.initPTS[t.cc]={baseTime:i,timescale:n}),a.length&&(this.unparsedVttFrags=[],a.forEach(e=>{this.onFragLoaded(cC.FRAG_LOADED,e)}))}getExistingTrack(e,t){let{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){let n=r.textTracks[i];if(m3(n,{name:e,lang:t,attrs:{}}))return n}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;let{captionsProperties:t,captionsTracks:r,media:i}=this,{label:n,languageCode:a}=t[e],s=this.getExistingTrack(n,a);if(s)r[e]=s,fi(r[e]),ft(r[e],i);else{let t=this.createTextTrack("captions",n,a);t&&(t[e]=!0,r[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;let t=this.captionsProperties[e];if(!t)return;let r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(cC.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,r){let i=this.media;if(i)return i.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){let{captionsTracks:e}=this;Object.keys(e).forEach(t=>{fi(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=m5(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){let{media:e}=this;if(!e)return;let t=e.textTracks;if(t)for(let e=0;e<t.length;e++)fi(t[e])}onSubtitleTracksUpdated(e,t){let r=t.subtitleTracks||[],i=r.some(e=>e.textCodec===mV);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(mi(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){let e=this.media,t=e?fa(e.textTracks):null;if(this.tracks.forEach((e,r)=>{let i;if(t){let r=null;for(let i=0;i<t.length;i++)if(t[i]&&m3(t[i],e)){r=t[i],t[i]=null;break}r&&(i=r)}if(i)fi(i);else{let t=m4(e);(i=this.createTextTrack(t,e.name,e.lang))&&(i.mode="disabled")}i&&this.textTracks.push(i)}),null!=t&&t.length){let e=t.filter(e=>null!==e).map(e=>e.label);e.length&&cU.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){let e=this.tracks.map(e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}));this.hls.trigger(cC.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(e=>{let t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;let r=`textTrack${t[1]}`,i=this.captionsProperties[r];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)})}closedCaptionsForLevel(e){let t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===h6.MAIN){var r,i;let{cea608Parser1:e,cea608Parser2:n,lastSn:a}=this,{cc:s,sn:o}=t.frag,l=null!=(r=null==(i=t.part)?void 0:i.index)?r:-1;e&&n&&(o!==a+1||o===a&&l!==this.lastPartIndex+1||s!==this.lastCc)&&(e.reset(),n.reset()),this.lastCc=s,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){let{frag:r,payload:i}=t;if(r.type===h6.SUBTITLE){if(i.byteLength){let e=r.decryptdata,n="stats"in t;if(null==e||!e.encrypted||n){let e=this.tracks[r.level],n=this.vttCCs;n[r.cc]||(n[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),e&&e.textCodec===mV?this._parseIMSC1(r,i):this._parseVTTs(t)}}else this.hls.trigger(cC.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:Error("Empty subtitle payload")})}}_parseIMSC1(e,t){let r=this.hls;mX(t,this.initPTS[e.cc],t=>{this._appendCues(t,e.level),r.trigger(cC.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},t=>{cU.log(`Failed to parse IMSC1: ${t}`),r.trigger(cC.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})}_parseVTTs(e){var t;let{frag:r,payload:i}=e,{initPTS:n,unparsedVttFrags:a}=this,s=n.length-1;if(!n[r.cc]&&-1===s){a.push(e);return}let o=this.hls;!function(e,t,r,i,n,a,s){let o;let l=new mB,d=hc(new Uint8Array(e)).trim().replace(mj,"\n").split("\n"),u=[],c=t?function(e,t=1){return pW(e,9e4,1/t)}(t.baseTime,t.timescale):0,h="00:00.000",f=0,p=0,m=!0;l.oncue=function(e){let a=r[i],s=r.ccOffset,l=(f-c)/9e4;if(null!=a&&a.new&&(void 0!==p?s=r.ccOffset=a.start:mK(r,i,l)),l){if(!t){o=Error("Missing initPTS for VTT MPEGTS");return}s=l-r.presentationOffset}let d=e.endTime-e.startTime,h=pJ((e.startTime+s-p)*9e4,9e4*n)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+d,0);let m=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(m)),e.id||(e.id=mH(e.startTime,e.endTime,m)),e.endTime>0&&u.push(e)},l.onparsingerror=function(e){o=e},l.onflush=function(){if(o){s(o);return}a(u)},d.forEach(e=>{if(m){if(m$(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach(e=>{m$(e,"LOCAL:")?h=e.slice(6):m$(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))});try{p=mG(h)/1e3}catch(e){o=e}return}""===e&&(m=!1)}l.parse(e+"\n")}),l.flush()}(null!=(t=r.initSegment)&&t.data?hR(r.initSegment.data,new Uint8Array(i)):i,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,e=>{this._appendCues(e,r.level),o.trigger(cC.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},t=>{let n="Missing initPTS for VTT MPEGTS"===t.message;n?a.push(e):this._fallbackToIMSC1(r,i),cU.log(`Failed to parse VTT cue: ${t}`),n&&s>r.cc||o.trigger(cC.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:t})})}_fallbackToIMSC1(e,t){let r=this.tracks[e.level];r.textCodec||mX(t,this.initPTS[e.cc],()=>{r.textCodec=mV,this._parseIMSC1(e,t)},()=>{r.textCodec="wvtt"})}_appendCues(e,t){let r=this.hls;if(this.config.renderTextTracksNatively){let r=this.textTracks[t];if(!r||"disabled"===r.mode)return;e.forEach(e=>fr(r,e))}else{let i=this.tracks[t];if(!i)return;let n=i.default?"default":"subtitles"+t;r.trigger(cC.CUES_PARSED,{type:"subtitles",cues:e,track:n})}}onFragDecrypted(e,t){let{frag:r}=t;r.type===h6.SUBTITLE&&this.onFragLoaded(cC.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();let{cea608Parser1:r,cea608Parser2:i}=this;if(!this.enabled||!r||!i)return;let{frag:n,samples:a}=t;if(n.type!==h6.MAIN||"NONE"!==this.closedCaptionsForLevel(n))for(let e=0;e<a.length;e++){let t=a[e].bytes;if(t){let n=this.extractCea608Data(t);r.addData(a[e].pts,n[0]),i.addData(a[e].pts,n[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:r,endOffsetSubtitles:i,type:n}){let{media:a}=this;if(a&&!(a.currentTime<r)){if(!n||"video"===n){let{captionsTracks:e}=this;Object.keys(e).forEach(i=>fn(e[i],t,r))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==i){let{textTracks:e}=this;Object.keys(e).forEach(r=>fn(e[r],t,i))}}}extractCea608Data(e){let t=[[],[]],r=31&e[0],i=2;for(let n=0;n<r;n++){let r=e[i++],n=127&e[i++],a=127&e[i++];if((0!==n||0!==a)&&(4&r)!=0){let e=3&r;(0===e||1===e)&&(t[e].push(n),t[e].push(a))}}return t}}function m4(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function m3(e,t){return!!e&&e.kind===m4(t)&&ma(t,e)}function m5(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class m8{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){let{hls:e}=this;e.on(cC.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(cC.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.on(cC.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(cC.BUFFER_CODECS,this.onBufferCodecs,this),e.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){let{hls:e}=this;e.off(cC.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(cC.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.off(cC.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(cC.BUFFER_CODECS,this.onBufferCodecs,this),e.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){let r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){let r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&ck(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}let e=this.hls.levels;if(e.length){let t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&cU.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=r,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){let t=this.hls.levels;if(!t.length)return -1;let r=t.filter((t,r)=>this.isLevelAllowed(t)&&r<=e);return this.clientRect=null,m8.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;let e=this.media,t={width:0,height:0};if(e){let r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}isLevelAllowed(e){return!this.restrictedLevels.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,r){if(!(null!=e&&e.length))return -1;let i=(e,t)=>!t||e.width!==t.width||e.height!==t.height,n=e.length-1,a=Math.max(t,r);for(let t=0;t<e.length;t+=1){let r=e[t];if((r.width>=a||r.height>=a)&&i(r,e[t+1])){n=t;break}}return n}}class m6{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(cC.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(cC.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){let r=this.hls.config;if(r.capLevelOnFPSDrop){let e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,r){let i=performance.now();if(t){if(this.lastTime){let e=i-this.lastTime,n=r-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*n/e,o=this.hls;if(o.trigger(cC.FPS_DROP,{currentDropped:n,currentDecoded:a,totalDroppedFrames:r}),s>0&&n>o.config.fpsDroppedMonitoringThreshold*a){let e=o.currentLevel;cU.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(cC.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){let e=this.media;if(e){if(this.isVideoPlaybackQualityAvailable){let t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}}let m9="[eme]";class m7{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=m7.CDMCleanupPromise?[m7.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=cU.debug.bind(cU,m9),this.log=cU.log.bind(cU,m9),this.warn=cU.warn.bind(cU,m9),this.error=cU.error.bind(cU,m9),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();let e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(cC.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(cC.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(cC.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(cC.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(cC.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(cC.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){let{drmSystems:t,widevineLicenseUrl:r}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===cJ.WIDEVINE&&r)return r;throw Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){let{drmSystems:t}=this.config,r=t[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){let t=this.hls.levels,r=(e,t,r)=>!!e&&r.indexOf(e)===t,i=t.map(e=>e.audioCodec).filter(r),n=t.map(e=>e.videoCodec).filter(r);return i.length+n.length===0&&n.push("avc1.42e01e"),new Promise((t,r)=>{let a=e=>{let s=e.shift();this.getMediaKeysPromise(s,i,n).then(e=>t({keySystem:s,mediaKeys:e})).catch(t=>{e.length?a(e):t instanceof ge?r(t):r(new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};a(e)})}requestMediaKeySystemAccess(e,t){let{requestMediaKeySystemAccessFunc:r}=this.config;if("function"!=typeof r){let e=`Configured requestMediaKeySystemAccess is not a function ${r}`;return null===c5&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(Error(e))}return r(e,t)}getMediaKeysPromise(e,t,r){let i=function(e,t,r,i){let n;switch(e){case cJ.FAIRPLAY:n=["cenc","sinf"];break;case cJ.WIDEVINE:case cJ.PLAYREADY:n=["cenc"];break;case cJ.CLEARKEY:n=["cenc","keyids"];break;default:throw Error(`Unknown key-system: ${e}`)}return[{initDataTypes:n,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:t.map(e=>({contentType:`audio/mp4; codecs="${e}"`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:r.map(e=>({contentType:`video/mp4; codecs="${e}"`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}(e,t,r,this.config.drmSystemOptions),n=this.keySystemAccessPromises[e],a=null==n?void 0:n.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),a=this.requestMediaKeySystemAccess(e,i);let t=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)}),a.then(r=>{this.log(`Access for key-system "${r.keySystem}" obtained`);let i=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=r.createMediaKeys().then(t=>(this.log(`Media-keys created for "${e}"`),i.then(r=>r?this.setMediaKeysServerCertificate(t,e,r):t))),t.mediaKeys.catch(t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)}),t.mediaKeys})}return a.then(()=>n.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:r}){this.log(`Creating key-system session "${t}" keyId: ${hh.hexDump(e.keyId||[])}`);let i=r.createSession(),n={decryptdata:e,keySystem:t,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(n),n}renewKeySession(e){let t=e.decryptdata;if(t.pssh){let r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t);this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,"cenc",t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw Error("keyId is null");return hh.hexDump(e.keyId)}updateKeySession(e,t){var r;let i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${hh.hexDump((null==(r=e.decryptdata)?void 0:r.keyId)||[])}
      } (data length: ${t?t.byteLength:t})`),i.update(t)}selectKeySystemFormat(e){let t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,r)=>{let i=c3(this.config),n=e.map(c0).filter(e=>!!e&&-1!==i.indexOf(e));return this.getKeySystemSelectionPromise(n).then(({keySystem:e})=>{let i=c4(e);i?t(i):r(Error(`Unable to find format for key-system "${e}"`))}).catch(r)})}loadKey(e){let t=e.keyInfo.decryptdata,r=this.getKeyIdString(t),i=`(keyId: ${r} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let n=this.keyIdToKeySessionPromise[r];return n||(n=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(t).then(({keySystem:r,mediaKeys:n})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(r,n).then(()=>{this.throwIfDestroyed();let e=this.createMediaKeySessionContext({keySystem:r,mediaKeys:n,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")})))).catch(e=>this.handleError(e)),n}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof ge?this.hls.trigger(cC.ERROR,e.data):this.hls.trigger(cC.ERROR,{type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){let t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){let t=c0(e.keyFormat),r=t?[t]:c3(this.config);return this.attemptKeySystemAccess(r)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=c3(this.config)),0===e.length)throw new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){let t,r;let{initDataType:i,initData:n}=e,a=`"${e.type}" event: init data type: "${i}"`;if(this.debug(a),null===n)return;if("sinf"===i&&this.config.drmSystems[cJ.FAIRPLAY]){let e=hm(new Uint8Array(n));try{let i=cY(JSON.parse(e).sinf),n=hA(new Uint8Array(i));if(!n)throw Error("'schm' box missing or not cbcs/cenc with schi > tenc");t=n.subarray(8,24),r=cJ.FAIRPLAY}catch(e){this.warn(`${a} Failed to parse sinf: ${e}`);return}}else{let e=function(e){let t=[];if(e instanceof ArrayBuffer){let r=e.byteLength,i=0;for(;i+32<r;){let r=function(e){let t=e.getUint32(0),r=e.byteOffset,i=e.byteLength;if(i<t)return{offset:r,size:i};if(1886614376!==e.getUint32(4))return{offset:r,size:t};let n=e.getUint32(8)>>>24;if(0!==n&&1!==n)return{offset:r,size:t};let a=e.buffer,s=hh.hexDump(new Uint8Array(a,r+12,16)),o=e.getUint32(28),l=null,d=null;if(0===n){if(t-32<o||o<22)return{offset:r,size:t};d=new Uint8Array(a,r+32,o)}else if(1===n){if(!o||i<r+32+16*o+16)return{offset:r,size:t};l=[];for(let e=0;e<o;e++)l.push(new Uint8Array(a,r+32+16*e,16))}return{version:n,systemId:s,kids:l,data:d,offset:r,size:t}}(new DataView(e,i));t.push(r),i+=r.size}}return t}(n),i=e.filter(e=>e.systemId===c1.WIDEVINE)[0];if(!i){0===e.length||e.some(e=>!e.systemId)?this.warn(`${a} contains incomplete or invalid pssh data`):this.log(`ignoring ${a} for ${e.map(e=>c2(e.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(r=c2(i.systemId),0===i.version&&i.data){let e=i.data.length-22;t=i.data.subarray(e,e+16)}}if(!r||!t)return;let s=hh.hexDump(t),{keyIdToKeySessionPromise:o,mediaKeySessions:l}=this,d=o[s];for(let e=0;e<l.length;e++){let r=l[e],a=r.decryptdata;if(!a.keyId)continue;let u=hh.hexDump(a.keyId);if(s===u||-1!==a.uri.replace(/-/g,"").indexOf(s)){if(d=o[u],a.pssh)break;delete o[u],a.pssh=new Uint8Array(n),a.keyId=t,d=o[s]=d.then(()=>this.generateRequestWithPreferredKeySession(r,i,n,"encrypted-event-key-match"));break}}d||(d=o[s]=this.getKeySystemSelectionPromise([r]).then(({keySystem:e,mediaKeys:r})=>{var a;this.throwIfDestroyed();let o=new hC("ISO-23001-7",s,null!=(a=c4(e))?a:"");return o.pssh=new Uint8Array(n),o.keyId=t,this.attemptSetMediaKeys(e,r).then(()=>{this.throwIfDestroyed();let t=this.createMediaKeySessionContext({decryptdata:o,keySystem:e,mediaKeys:r});return this.generateRequestWithPreferredKeySession(t,i,n,"encrypted-event-no-match")})})),d.catch(e=>this.handleError(e))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){let r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);let i=Promise.all(r).then(()=>{if(!this.media)throw Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(e=>-1===r.indexOf(e))})}generateRequestWithPreferredKeySession(e,t,r,i){var n,a,s;let o=null==(n=this.config.drmSystems)?void 0:null==(a=n[e.keySystem])?void 0:a.generateRequest;if(o)try{let i=o.call(this.hls,t,r,e);if(!i)throw Error("Invalid response from configured generateRequest filter");t=i.initDataType,r=e.decryptdata.pssh=i.initData?new Uint8Array(i.initData):null}catch(e){if(this.warn(e.message),null!=(s=this.hls)&&s.config.debug)throw e}if(null===r)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);let l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${l} (init data type: ${t} length: ${r?r.byteLength:null})`);let d=new mt,u=e._onmessage=t=>{let r=e.mediaKeysSession;if(!r){d.emit("error",Error("invalid state"));return}let{messageType:i,message:n}=t;this.log(`"${i}" message event for session "${r.sessionId}" message size: ${n.byteLength}`),"license-request"===i||"license-renewal"===i?this.renewLicense(e,n).catch(e=>{this.handleError(e),d.emit("error",e)}):"license-release"===i?e.keySystem===cJ.FAIRPLAY&&(this.updateKeySession(e,cX("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${i}"`)},c=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession){d.emit("error",Error("invalid state"));return}this.onKeyStatusChange(e);let r=e.keyStatus;d.emit("keyStatus",r),"expired"===r&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",u),e.mediaKeysSession.addEventListener("keystatuseschange",c);let h=new Promise((e,t)=>{d.on("error",t),d.on("keyStatus",r=>{r.startsWith("usable")?e():"output-restricted"===r?t(new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?t(new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${r}"`)):"expired"===r?t(Error("key expired while generating request")):this.warn(`unhandled key status change "${r}"`)})});return e.mediaKeysSession.generateRequest(t,r).then(()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)}).catch(e=>{throw new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)}).then(()=>h).catch(t=>{throw d.removeAllListeners(),this.removeSession(e),t}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,r)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${hh.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${hh.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){let t=this.config,r=new t.loader(t),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching server certificate for "${e}"`),new Promise((n,a)=>{let s={responseType:"arraybuffer",url:i},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0};r.load(s,l,{onSuccess:(e,t,r,i)=>{n(e.data)},onError:(t,r,n,o)=>{a(new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:cR({url:s.url,data:void 0},t)},`"${e}" certificate request failed (${i}). Status: ${t.code} (${t.text})`))},onTimeout:(t,r,n)=>{a(new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:{url:s.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(e,t,r)=>{a(Error("aborted"))}})})):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise((i,n)=>{e.setServerCertificate(r).then(n=>{this.log(`setServerCertificate ${n?"success":"not supported by CDM"} (${null==r?void 0:r.byteLength}) on "${t}"`),i(e)}).catch(e=>{n(new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(t=>this.updateKeySession(e,new Uint8Array(t)).catch(e=>{throw new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}unpackPlayReadyKeyMessage(e,t){let r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;let i=new DOMParser().parseFromString(r,"application/xml"),n=i.querySelectorAll("HttpHeader");if(n.length>0){let t;for(let r=0,i=n.length;r<i;r++){var a,s;let i=null==(a=(t=n[r]).querySelector("name"))?void 0:a.textContent,o=null==(s=t.querySelector("value"))?void 0:s.textContent;i&&o&&e.setRequestHeader(i,o)}}let o=i.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw Error("Cannot find <Challenge> in key message");return cX(atob(l))}setupLicenseXHR(e,t,r,i){let n=this.config.licenseXhrSetup;return n?Promise.resolve().then(()=>{if(!r.decryptdata)throw Error("Key removed");return n.call(this.hls,e,t,r,i)}).catch(a=>{if(!r.decryptdata)throw a;return e.open("POST",t,!0),n.call(this.hls,e,t,r,i)}).then(r=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:r||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){let r=this.config.keyLoadPolicy.default;return new Promise((i,n)=>{let a=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${a}`);let s=new XMLHttpRequest;s.responseType="arraybuffer",s.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return n(Error("invalid state"));if(4===s.readyState){if(200===s.status){this._requestLicenseFailureCount=0;let t=s.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);let r=this.config.licenseResponseCallback;if(r)try{t=r.call(this.hls,s,a,e)}catch(e){this.error(e)}i(t)}else{let o=r.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||s.status>=400&&s.status<500)n(new ge({type:cP.KEY_SYSTEM_ERROR,details:cO.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:a,data:void 0,code:s.status,text:s.statusText}},`License Request XHR failed (${a}). Status: ${s.status} (${s.statusText})`));else{let r=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${r} attempts left`),this.requestLicense(e,t).then(i,n)}}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=s,this.setupLicenseXHR(s,a,e,t).then(({xhr:t,licenseChallenge:r})=>{e.keySystem==cJ.PLAYREADY&&(r=this.unpackPlayReadyKeyMessage(t,r)),t.send(r)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;let r=t.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){let e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},hC.clearKeyUriToKeyIdMap();let r=t.length;m7.CDMCleanupPromise=Promise.all(t.map(e=>this.removeSession(e)).concat(null==e?void 0:e.setMediaKeys(null).catch(e=>{this.log(`Could not clear media keys: ${e}`)}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(e=>{this.log(`Could not close sessions and clear media keys: ${e}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){let e=t.reduce((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){let{mediaKeysSession:t,licenseXhr:r}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;let i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch(e=>{this.log(`Could not remove session: ${e}`)}).then(()=>t.close()).catch(e=>{this.log(`Could not close session: ${e}`)})}}}m7.CDMCleanupPromise=void 0;class ge extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=Error(t)),this.data=e,e.err=e.error}}(function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"})(vc||(vc={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(vh||(vh={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status"}(vf||(vf={}));let gt={[vf.OBJECT]:["br","d","ot","tb"],[vf.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[vf.SESSION]:["cid","pr","sf","sid","st","v"],[vf.STATUS]:["bs","rtp"]};class gr{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(e=>e instanceof gr?e:new gr(e))),this.value=e,this.params=t}}class gi{constructor(e){this.description=void 0,this.description=e}}let gn="Bare Item",ga=/[\x00-\x1f\x7f]+/;function gs(e,t,r){return Error(`failed to serialize "${Array.isArray(e)?JSON.stringify(e):e instanceof Map?"Map{}":e instanceof Set?"Set{}":"object"==typeof e?JSON.stringify(e):String(e)}" as ${t}`,{cause:r})}function go(e){if(e<-999999999999999||999999999999999<e)throw gs(e,"Integer");return e.toString()}function gl(e){let t=e.description||e.toString().slice(7,-1);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw gs(t,"Token");return t}function gd(e){switch(typeof e){case"number":if(!ck(e))throw gs(e,gn);if(Number.isInteger(e))return go(e);return function(e){let t=function e(t,r){if(t<0)return-e(-t,r);let i=Math.pow(10,r);if(!(Math.abs(t*i%1-.5)<Number.EPSILON))return Math.round(t*i)/i;{let e=Math.floor(t*i);return(e%2==0?e:e+1)/i}}(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw gs(e,"Decimal");let r=t.toString();return r.includes(".")?r:`${r}.0`}(e);case"string":return function(e){if(ga.test(e))throw gs(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return gl(e);case"boolean":return function(e){if("boolean"!=typeof e)throw gs(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return`@${go(e.getTime()/1e3)}`;if(e instanceof Uint8Array)return function(e){if(!1===ArrayBuffer.isView(e))throw gs(e,"Byte Sequence");return`:${btoa(String.fromCharCode(...e))}:`}(e);if(e instanceof gi)return gl(e);default:throw gs(e,gn)}}function gu(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw gs(e,"Key");return e}function gc(e){return null==e?"":Object.entries(e).map(([e,t])=>!0===t?`;${gu(e)}`:`;${gu(e)}=${gd(t)}`).join("")}function gh(e){return e instanceof gr?`${gd(e.value)}${gc(e.params)}`:gd(e)}let gf=e=>"ot"===e||"sf"===e||"st"===e,gp=e=>"number"==typeof e?ck(e):null!=e&&""!==e&&!1!==e,gm=e=>Math.round(e),gg=e=>100*gm(e/100),gv={br:gm,d:gm,bl:gg,dl:gg,mtp:gg,nor:(e,t)=>(null!=t&&t.baseUrl&&(e=function(e,t){let r=new URL(e),i=new URL(t);if(r.origin!==i.origin)return e;let n=r.pathname.split("/").slice(1),a=i.pathname.split("/").slice(1,-1);for(;n[0]===a[0];)n.shift(),a.shift();for(;a.length;)a.shift(),n.unshift("..");return n.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:gg,tb:gm};function gy(e,t={}){return e?function(e,t={whitespace:!0}){if("object"!=typeof e)throw gs(e,"Dict");let r=e instanceof Map?e.entries():Object.entries(e),i=null!=t&&t.whitespace?" ":"";return Array.from(r).map(([e,t])=>{t instanceof gr==!1&&(t=new gr(t));let r=gu(e);if(!0===t.value)r+=gc(t.params);else if(r+="=",Array.isArray(t.value)){var i;r+=(i=t,`(${i.value.map(gh).join(" ")})${gc(i.params)}`)}else r+=gh(t);return r}).join(`,${i}`)}(function(e,t){let r={};if(null==e||"object"!=typeof e)return r;let i=Object.keys(e).sort(),n=cL({},gv,null==t?void 0:t.formatters),a=null==t?void 0:t.filter;return i.forEach(i=>{if(null!=a&&a(i))return;let s=e[i],o=n[i];o&&(s=o(s,t)),("v"!==i||1!==s)&&("pr"!=i||1!==s)&&gp(s)&&(gf(i)&&"string"==typeof s&&(s=new gi(s)),r[i]=s)}),r}(e,t),cL({whitespace:!1},t)):""}let gb=/CMCD=[^&#]+/;class gE{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:vc.MANIFEST,su:!this.initialized})}catch(e){cU.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=e=>{try{let t=e.frag,r=this.hls.levels[t.level],i=this.getObjectType(t),n={d:1e3*t.duration,ot:i};(i===vc.VIDEO||i===vc.AUDIO||i==vc.MUXED)&&(n.br=r.bitrate/1e3,n.tb=this.getTopBandwidth(i)/1e3,n.bl=this.getBufferLength(i)),this.apply(e,n)}catch(e){cU.warn("Could not generate segment CMCD data.",e)}},this.hls=e;let t=this.config=e.config,{cmcd:r}=t;null!=r&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||function(){try{return crypto.randomUUID()}catch(e){try{let e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(t){let e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})}}}(),this.cid=r.contentId,this.useHeaders=!0===r.useHeaders,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){let e=this.hls;e.on(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(cC.MEDIA_DETACHED,this.onMediaDetached,this),e.on(cC.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){let e=this.hls;e.off(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(cC.MEDIA_DETACHED,this.onMediaDetached,this),e.off(cC.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,i;this.audioBuffer=null==(r=t.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(i=t.tracks.video)?void 0:i.buffer}createData(){var e;return{v:1,sf:vh.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){cL(t,this.createData());let r=t.ot===vc.INIT||t.ot===vc.VIDEO||t.ot===vc.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);let{includeKeys:i}=this;if(i&&(t=Object.keys(t).reduce((e,r)=>(i.includes(r)&&(e[r]=t[r]),e),{})),this.useHeaders){var n;e.headers||(e.headers={}),n=e.headers,cL(n,function(e,t={}){if(!e)return{};let r=Object.entries(e),i=Object.entries(gt).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{}));return Object.entries(r.reduce((e,t)=>{var r;let[n,a]=t,s=(null==(r=i.find(e=>e[1].includes(n)))?void 0:r[0])||vf.REQUEST;return null!=e[s]||(e[s]={}),e[s][n]=a,e},{})).reduce((e,[r,i])=>(e[r]=gy(i,t),e),{})}(t,void 0))}else e.url=function(e,t,r){let i=function(e,t={}){if(!e)return"";let r=gy(e,t);return`CMCD=${encodeURIComponent(r)}`}(t,void 0);if(!i)return e;if(gb.test(e))return e.replace(gb,i);let n=e.includes("?")?"&":"?";return`${e}${n}${i}`}(e.url,t)}getObjectType(e){let{type:t}=e;return"subtitle"===t?vc.TIMED_TEXT:"initSegment"===e.sn?vc.INIT:"audio"===t?vc.AUDIO:"main"===t?this.hls.audioTracks.length?vc.VIDEO:vc.MUXED:void 0}getTopBandwidth(e){let t,r=0,i=this.hls;if(e===vc.AUDIO)t=i.audioTracks;else{let e=i.maxAutoLevel,r=e>-1?e+1:i.levels.length;t=i.levels.slice(0,r)}for(let e of t)e.bitrate>r&&(r=e.bitrate);return r>0?r:NaN}getBufferLength(e){let t=this.hls.media,r=e===vc.AUDIO?this.audioBuffer:this.videoBuffer;return r&&t?1e3*f1.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len:NaN}createPlaylistLoader(){let{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new r(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,r,i){t(e),this.loader.load(e,r,i)}}}createFragmentLoader(){let{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new r(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,r,i){t(e),this.loader.load(e,r,i)}}}}class gT{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=cU.log.bind(cU,"[content-steering]:"),this.registerListeners()}registerListeners(){let e=this.hls;e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.on(cC.ERROR,this.onError,this)}unregisterListeners(){let e=this.hls;e&&(e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.off(cC.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){let e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){let t=this.levels;t&&(this.levels=t.filter(t=>t!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){let{contentSteering:r}=t;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){let{errorAction:r}=t;if((null==r?void 0:r.action)===fN.SendAlternateToPenaltyBox&&r.flags===fM.MoveAllAlternatesMatchingHost){let e=this.levels,i=this.pathwayPriority,n=this.pathwayId;if(t.context){let{groupId:r,pathwayId:i,type:a}=t.context;r&&e?n=this.getPathwayForGroupId(r,a,n):i&&(n=i)}n in this.penalizedPathways||(this.penalizedPathways[n]=performance.now()),!i&&e&&(i=e.reduce((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e),[])),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==n),r.resolved||cU.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${n} levels: ${e?e.length:e} priorities: ${JSON.stringify(i)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){let r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this.pathwayPriority=e;let r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(e=>{i-r[e]>3e5&&delete r[e]});for(let i=0;i<e.length;i++){let n=e[i];if(n in r)continue;if(n===this.pathwayId)return;let a=this.hls.nextLoadLevel,s=this.hls.levels[a];if((t=this.getLevelsForPathway(n)).length>0){this.log(`Setting Pathway to "${n}"`),this.pathwayId=n,fA(t),this.hls.trigger(cC.LEVELS_UPDATED,{levels:t});let e=this.hls.levels[a];s&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==s.bitrate&&this.log(`Unstable Pathways change from bitrate ${s.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,r){let i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let r=0;r<i.length;r++)if(t===h8.AUDIO_TRACK&&i[r].hasAudioGroup(e)||t===h8.SUBTITLE_TRACK&&i[r].hasSubtitleGroup(e))return i[r].pathwayId;return r}clonePathways(e){let t=this.levels;if(!t)return;let r={},i={};e.forEach(e=>{let{ID:n,"BASE-ID":a,"URI-REPLACEMENT":s}=e;if(t.some(e=>e.pathwayId===n))return;let o=this.getLevelsForPathway(a).map(e=>{let t=new c$(e.attrs);t["PATHWAY-ID"]=n;let a=t.AUDIO&&`${t.AUDIO}_clone_${n}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${n}`;a&&(r[t.AUDIO]=a,t.AUDIO=a),o&&(i[t.SUBTITLES]=o,t.SUBTITLES=o);let l=gw(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",s),d=new fy({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let t=1;t<e.audioGroups.length;t++)d.addGroupId("audio",`${e.audioGroups[t]}_clone_${n}`);if(e.subtitleGroups)for(let t=1;t<e.subtitleGroups.length;t++)d.addGroupId("text",`${e.subtitleGroups[t]}_clone_${n}`);return d});t.push(...o),g_(this.audioTracks,r,s,n),g_(this.subtitleTracks,i,s,n)})}loadSteeringManifest(e){let t;let r=this.hls.config,i=r.loader;this.loader&&this.loader.destroy(),this.loader=new i(r);try{t=new self.URL(e)}catch(t){this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if("data:"!==t.protocol){let e=0|(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate);t.searchParams.set("_HLS_pathway",this.pathwayId),t.searchParams.set("_HLS_throughput",""+e)}let n={responseType:"json",url:t.href},a=r.steeringManifestLoadPolicy.default,s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0};this.log(`Requesting steering manifest: ${t}`),this.loader.load(n,o,{onSuccess:(e,r,i,n)=>{this.log(`Loaded steering manifest: "${t}"`);let a=e.data;if(1!==a.VERSION){this.log(`Steering VERSION ${a.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=a.TTL;let{"RELOAD-URI":s,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=a;if(s)try{this.uri=new self.URL(s,t).href}catch(e){this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${s}`);return}this.scheduleRefresh(this.uri||i.url),o&&this.clonePathways(o);let d={steeringManifest:a,url:t.toString()};this.hls.trigger(cC.STEERING_MANIFEST_LOADED,d),l&&this.updatePathwayPriority(l)},onError:(e,t,r,i)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code){this.enabled=!1,this.log(`Steering manifest ${t.url} no longer available`);return}let n=1e3*this.timeToLoad;if(429===e.code){let e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){let t=e.getResponseHeader("Retry-After");t&&(n=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`);return}this.scheduleRefresh(this.uri||t.url,n)},onTimeout:(e,t,r)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}})}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var t;let r=null==(t=this.hls)?void 0:t.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,1e3*this.timeToLoad)},t)}}function g_(e,t,r,i){e&&Object.keys(t).forEach(n=>{let a=e.filter(e=>e.groupId===n).map(e=>{let a=cL({},e);return a.details=void 0,a.attrs=new c$(a.attrs),a.url=a.attrs.URI=gw(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),a.groupId=a.attrs["GROUP-ID"]=t[n],a.attrs["PATHWAY-ID"]=i,a});e.push(...a)})}function gw(e,t,r,i){let n;let{HOST:a,PARAMS:s,[r]:o}=i;t&&(n=null==o?void 0:o[t])&&(e=n);let l=new self.URL(e);return a&&!n&&(l.host=a),s&&Object.keys(s).sort().forEach(e=>{e&&l.searchParams.set(e,s[e])}),l.href}let gx=/^age:\s*[\d.]+\s*$/im;class gS{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new cq,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){let e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){let{config:e,context:t}=this;if(!e||!t)return;let r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;let n=this.xhrSetup;n?Promise.resolve().then(()=>{if(this.loader===r&&!this.stats.aborted)return n(r,t.url)}).catch(e=>{if(this.loader===r&&!this.stats.aborted)return r.open("GET",t.url,!0),n(r,t.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)}).catch(e=>{this.callbacks.onError({code:r.status,text:e.message},t,r,i)}):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);let i=t.headers,{maxTimeToFirstByteMs:n,maxLoadTimeMs:a}=r.loadPolicy;if(i)for(let t in i)e.setRequestHeader(t,i[t]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=n&&ck(n)?n:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){let{context:e,loader:t,stats:r}=this;if(!e||!t)return;let i=t.readyState,n=this.config;if(!r.aborted&&i>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),n.timeout!==n.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),n.timeout=n.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===i)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let i=t.status,a="text"!==t.responseType;if(i>=200&&i<300&&(a&&t.response||null!==t.responseText)){r.loading.end=Math.max(self.performance.now(),r.loading.first);let n=a?t.response:t.responseText,s="arraybuffer"===t.responseType?n.byteLength:n.length;if(r.loaded=r.total=s,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;let o=this.callbacks.onProgress;if(o&&o(r,e,n,t),!this.callbacks)return;let l={url:t.responseURL,data:n,code:i};this.callbacks.onSuccess(l,r,e,t)}else{let a=n.loadPolicy.errorRetry;fI(a,r.retry,!1,{url:e.url,data:void 0,code:i})?this.retry(a):(cU.error(`${i} while loading ${e.url}`),this.callbacks.onError({code:i,text:t.statusText},e,t,r))}}}loadtimeout(){if(!this.config)return;let e=this.config.loadPolicy.timeoutRetry;if(fI(e,this.stats.retry,!0))this.retry(e);else{var t;cU.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);let e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){let{context:t,stats:r}=this;this.retryDelay=fk(e,r.retry),r.retry++,cU.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){let t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&gx.test(this.loader.getAllResponseHeaders())){let t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}let gA=/(\d+)-(\d+)\/(\d+)/;class gR{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||gL,this.controller=new self.AbortController,this.stats=new cq}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){let i=this.stats;if(i.loading.start)throw Error("Loader can only be used once.");i.loading.start=self.performance.now();let n=function(e,t){let r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(cL({},e.headers))};return e.rangeEnd&&r.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),r}(e,this.controller.signal),a=r.onProgress,s="arraybuffer"===e.responseType,o=s?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,n),self.clearTimeout(this.requestTimeout),t.timeout=l&&ck(l)?l:d,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(i,e,this.response)},t.timeout),self.fetch(this.request).then(n=>{this.response=this.loader=n;let o=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(i,e,this.response)},d-(o-i.loading.start)),!n.ok){let{status:e,statusText:t}=n;throw new gk(t||"fetch, bad network response",e,n)}return(i.loading.first=o,i.total=function(e){let t=e.get("Content-Range");if(t){let e=function(e){let t=gA.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(ck(e))return e}let r=e.get("Content-Length");if(r)return parseInt(r)}(n.headers)||i.total,a&&ck(t.highWaterMark))?this.loadProgressively(n,i,e,t.highWaterMark,a):s?n.arrayBuffer():"json"===e.responseType?n.json():n.text()}).then(n=>{let s=this.response;if(!s)throw Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);let l=n[o];l&&(i.loaded=i.total=l);let d={url:s.url,data:n,code:s.status};a&&!ck(t.highWaterMark)&&a(i,e,n,s),r.onSuccess(d,i,e,s)}).catch(t=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;let n=t&&t.code||0,a=t?t.message:null;r.onError({code:n,text:a},e,t?t.details:null,i)})}getCacheAge(){let e=null;if(this.response){let t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r,i=0,n){let a=new pd,s=e.body.getReader(),o=()=>s.read().then(s=>{if(s.done)return a.dataLength&&n(t,r,a.flush(),e),Promise.resolve(new ArrayBuffer(0));let l=s.value,d=l.length;return t.loaded+=d,d<i||a.dataLength?(a.push(l),a.dataLength>=i&&n(t,r,a.flush(),e)):n(t,r,l,e),o()}).catch(()=>Promise.reject());return o()}}function gL(e,t){return new self.Request(e.url,t)}class gk extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}let gD=/\s/,gI=cR(cR({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:gS,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:fz,bufferController:mf,capLevelController:m8,errorController:fF,fpsController:m6,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:c5,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue(e,t,r,i){let n,a,s,o,l;let d=[],u=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(n=i.rows[h],s=!0,o=0,l="",!n.isEmpty()){var c;for(let e=0;e<n.chars.length;e++)gD.test(n.chars[e].uchar)&&s?o++:(l+=n.chars[e].uchar,s=!1);n.cueStartTime=t,t===r&&(r+=1e-4),o>=16?o--:o++;let i=mU(l.trim()),f=mH(t,r,i);null!=e&&null!=(c=e.cues)&&c.getCueById(f)||((a=new u(t,r,i)).id=f,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*o/32)),d.push(a))}return e&&d.length&&(d.sort((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line),d.forEach(t=>fr(e,t))),d}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:ml,subtitleTrackController:mu,timelineController:m2,audioStreamController:ms,audioTrackController:mo,emeController:m7,cmcdController:gE,contentSteeringController:gT});class gC extends fU{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){let{hls:e}=this;e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.on(cC.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(cC.FRAG_BUFFERED,this.onFragBuffered,this),e.on(cC.ERROR,this.onError,this)}_unregisterListeners(){let{hls:e}=this;e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.off(cC.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(cC.FRAG_BUFFERED,this.onFragBuffered,this),e.off(cC.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){let r=this.hls.config.preferManagedMediaSource,i=[],n={},s={},o=!1,l=!1,d=!1;t.levels.forEach(e=>{var t,u;let c=e.attrs,{audioCodec:h,videoCodec:f}=e;(null==(t=h)?void 0:t.indexOf("mp4a.40.34"))!==-1&&(a||(a=/chrome|firefox/i.test(navigator.userAgent)),a&&(e.audioCodec=h=void 0)),h&&(e.audioCodec=h=hV(h,r)),(null==(u=f)?void 0:u.indexOf("avc1"))===0&&(f=e.videoCodec=function(e){let t=e.split(",");for(let e=0;e<t.length;e++){let r=t[e].split(".");if(r.length>2){let i=r.shift()+".";i+=parseInt(r.shift()).toString(16)+("000"+parseInt(r.shift()).toString(16)).slice(-4),t[e]=i}}return t.join(",")}(f));let{width:p,height:m,unknownCodecs:g}=e;if(o||(o=!!(p&&m)),l||(l=!!f),d||(d=!!h),null!=g&&g.length||h&&!hB(h,"audio",r)||f&&!hB(f,"video",r))return;let{CODECS:v,"FRAME-RATE":y,"HDCP-LEVEL":b,"PATHWAY-ID":E,RESOLUTION:T,"VIDEO-RANGE":w}=c,x=`${E||"."}-`,S=`${x}${e.bitrate}-${T}-${y}-${v}-${w}-${b}`;if(n[S]){if(n[S].uri===e.url||e.attrs["PATHWAY-ID"])n[S].addGroupId("audio",c.AUDIO),n[S].addGroupId("text",c.SUBTITLES);else{let t=s[S]+=1;e.attrs["PATHWAY-ID"]=Array(t+1).join(".");let r=new fy(e);n[S]=r,i.push(r)}}else{let t=new fy(e);n[S]=t,s[S]=1,i.push(t)}}),this.filterAndSortMediaOptions(i,t,o,l,d)}filterAndSortMediaOptions(e,t,r,i,n){let a=[],s=[],o=e;if((r||i)&&n&&(o=o.filter(({videoCodec:e,videoRange:t,width:r,height:i})=>{var n;return(!!e||!!(r&&i))&&!!(n=t)&&fp.indexOf(n)>-1})),0===o.length){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);let e=Error("no level with compatible codecs found in manifest");this.hls.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}});return}if(t.audioTracks){let{preferManagedMediaSource:e}=this.hls.config;gP(a=t.audioTracks.filter(t=>!t.audioCodec||hB(t.audioCodec,"audio",e)))}t.subtitles&&gP(s=t.subtitles);let l=o.slice(0);o.sort((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return fp.indexOf(e.videoRange)-fp.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){let r=hG(e.videoCodec),i=hG(t.videoCodec);if(r!==i)return i-r}if(e.uri===t.uri&&e.codecSet!==t.codecSet){let r=hq(e.codecSet),i=hq(t.codecSet);if(r!==i)return i-r}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});let d=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o)).length!==l.length){for(let e=0;e<l.length;e++)if(l[e].pathwayId===o[0].pathwayId){d=l[e];break}}this._levels=o;for(let e=0;e<o.length;e++)if(o[e]===d){var u;this._firstLevel=e;let t=d.bitrate,r=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${o.length} level(s) found, first bitrate: ${t}`),(null==(u=this.hls.userConfig)?void 0:u.abrEwmaDefaultEstimate)===void 0){let e=Math.min(t,this.hls.config.abrEwmaDefaultEstimateMax);e>r&&r===gI.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=e)}break}let c=n&&!i,h={levels:o,audioTracks:a,subtitleTracks:s,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:n,video:i,altAudio:!c&&a.some(e=>!!e.url)};this.hls.trigger(cC.MANIFEST_PARSED,h),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){let t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){let r=Error("invalid level idx"),i=e<0;if(this.hls.trigger(cC.ERROR,{type:cP.OTHER_ERROR,details:cO.LEVEL_SWITCH_ERROR,level:e,fatal:i,error:r,reason:r.message}),i)return;e=Math.min(e,t.length-1)}let r=this.currentLevelIndex,i=this.currentLevel,n=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],s=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,r===e&&a.details&&i&&n===s)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${s?" with Pathway "+s:""} from level ${r}${n?" with Pathway "+n:""}`);let o={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(cC.LEVEL_SWITCHING,o);let l=a.details;if(!l||l.live){let e=this.switchParams(a.uri,null==i?void 0:i.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){let e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===h8.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===h6.MAIN){let e=t.elementaryStreams;if(!Object.keys(e).some(t=>!!e[t]))return;let r=this._levels[t.level];null!=r&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var r,i;let{level:n,details:a}=t,s=this._levels[n];if(!s){this.warn(`Invalid level index ${n}`),null!=(i=t.deliveryDirectives)&&i.skip&&(a.deltaUpdateFailed=!0);return}n===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0),this.playlistLoaded(n,t,s.details)):null!=(r=t.deliveryDirectives)&&r.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();let t=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){let i=r.uri;if(e)try{i=e.addDirectives(i)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}let n=r.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${(null==e?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${n?" Pathway "+n:""} ${i}`),this.clearTimer(),this.hls.trigger(cC.LEVEL_LOADING,{url:i,level:t,pathwayId:r.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return -1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;let r=this._levels.filter((t,r)=>r!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach(e=>e.level=-1)),!1));fA(r),this._levels=r,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(cC.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){let{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(cC.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function gP(e){let t={};e.forEach(e=>{let r=e.groupId||"";e.id=t[r]=t[r]||0,t[r]++})}class gO{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(let r in this.keyUriToKeyInfo){let i=this.keyUriToKeyInfo[r].loader;if(i){var t;if(e&&e!==(null==(t=i.context)?void 0:t.frag.type))return;i.abort()}}}detach(){for(let e in this.keyUriToKeyInfo){let t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){for(let e in this.detach(),this.keyUriToKeyInfo){let t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=cO.KEY_LOAD_ERROR,r,i,n){return new pt({type:cP.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:n,error:r,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){let{sn:r,cc:i}=e;for(let e=0;e<t.length;e++){let n=t[e];if(i<=n.cc&&("initSegment"===r||"initSegment"===n.sn||r<n.sn)){this.emeController.selectKeySystemFormat(n).then(e=>{n.setKeyFormat(e)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var r,i,n;t&&e.setKeyFormat(t);let a=e.decryptdata;if(!a){let r=Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,cO.KEY_LOAD_ERROR,r))}let s=a.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,cO.KEY_LOAD_ERROR,Error(`Invalid key URI: "${s}"`)));let o=this.keyUriToKeyInfo[s];if(null!=(r=o)&&r.decryptdata.key)return a.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if(null!=(i=o)&&i.keyLoadPromise)switch(null==(n=o.mediaKeySessionContext)?void 0:n.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(t=>(a.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}switch(o=this.keyUriToKeyInfo[s]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":if("identity"===a.keyFormat)return this.loadKeyHTTP(o,e);return this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,cO.KEY_LOAD_ERROR,Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,t){let r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){let t=this.emeController.loadKey(r);if(t)return(e.keyLoadPromise=t.then(t=>(e.mediaKeySessionContext=t,r))).catch(t=>{throw e.keyLoadPromise=null,t})}return Promise.resolve(r)}loadKeyHTTP(e,t){let r=this.config,i=new r.loader(r);return t.keyLoader=e.loader=i,e.keyLoadPromise=new Promise((n,a)=>{let s={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=r.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0};i.load(s,l,{onSuccess:(e,t,r,i)=>{let{frag:s,keyInfo:o,url:l}=r;if(!s.decryptdata||o!==this.keyUriToKeyInfo[l])return a(this.createKeyLoadError(s,cO.KEY_LOAD_ERROR,Error("after key load, decryptdata unset or changed"),i));o.decryptdata.key=s.decryptdata.key=new Uint8Array(e.data),s.keyLoader=null,o.loader=null,n({frag:s,keyInfo:o})},onError:(e,r,i,n)=>{this.resetLoader(r),a(this.createKeyLoadError(t,cO.KEY_LOAD_ERROR,Error(`HTTP Error ${e.code} loading key ${e.text}`),i,cR({url:s.url,data:void 0},e)))},onTimeout:(e,r,i)=>{this.resetLoader(r),a(this.createKeyLoadError(t,cO.KEY_LOAD_TIMEOUT,Error("key loading timed out"),i))},onAbort:(e,r,i)=>{this.resetLoader(r),a(this.createKeyLoadError(t,cO.INTERNAL_ABORTED,Error("key loading aborted"),i))}})})}resetLoader(e){let{frag:t,keyInfo:r,url:i}=e,n=r.loader;t.keyLoader===n&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],n&&n.destroy()}}function gN(){return self.SourceBuffer||self.WebKitSourceBuffer}function gM(){if(!hF())return!1;let e=gN();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}class gF{constructor(e,t,r,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=r,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){let{config:r,media:i,stalled:n}=this;if(null===i)return;let{currentTime:a,seeking:s}=i,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,a!==e){if(this.moved=!0,s||(this.nudgeRetry=0),null!==n){if(this.stallReported){let e=self.performance.now()-n;cU.warn(`playback not stuck anymore @${a}, after ${Math.round(e)}ms`),this.stallReported=!1}this.stalled=null}return}if(l||o){this.stalled=null;return}if(i.paused&&!s||i.ended||0===i.playbackRate||!f1.getBuffered(i).length){this.nudgeRetry=0;return}let d=f1.bufferInfo(i,a,0),u=d.nextStart||0;if(s){let e=d.len>2,r=!u||t&&t.start<=a||u-a>2&&!this.fragmentTracker.getPartialFragment(a);if(e||r)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var c;if(!(d.len>0)&&!u)return;let e=Math.max(u,d.start||0)-a,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,r=(null==t?void 0:null==(c=t.details)?void 0:c.live)?2*t.details.targetduration:2,n=this.fragmentTracker.getPartialFragment(a);if(e>0&&(e<=r||n)){i.paused||this._trySkipBufferHole(n);return}}let h=self.performance.now();if(null===n){this.stalled=h;return}let f=h-n;if(!s&&f>=250&&(this._reportStall(d),!this.media))return;let p=f1.bufferInfo(i,a,r.maxBufferHole);this._tryFixBufferStall(p,f)}_tryFixBufferStall(e,t){let{config:r,fragmentTracker:i,media:n}=this;if(null===n)return;let a=n.currentTime,s=i.getPartialFragment(a);!(s&&(this._trySkipBufferHole(s)||!this.media))&&(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-a<r.maxBufferHole)&&t>1e3*r.highBufferWatchdogPeriod&&(cU.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){let{hls:t,media:r,stallReported:i}=this;if(!i&&r){this.stallReported=!0;let i=Error(`Playback stalling at @${r.currentTime} due to low buffer (${JSON.stringify(e)})`);cU.warn(i.message),t.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}}_trySkipBufferHole(e){let{config:t,hls:r,media:i}=this;if(null===i)return 0;let n=i.currentTime,a=f1.bufferInfo(i,n,0),s=n<a.start?a.start:a.nextStart;if(s){let o=a.len<=t.maxBufferHole,l=a.len>0&&a.len<1&&i.readyState<3,d=s-n;if(d>0&&(o||l)){if(d>t.maxBufferHole){let{fragmentTracker:t}=this,r=!1;if(0===n){let e=t.getAppendedFrag(0,h6.MAIN);e&&s<e.end&&(r=!0)}if(!r){let r=e||t.getAppendedFrag(n,h6.MAIN);if(r){let e=!1,i=r.end;for(;i<s;){let r=t.getPartialFragment(i);if(r)i+=r.duration;else{e=!0;break}}if(e)return 0}}}let a=Math.max(s+.05,n+.1);if(cU.warn(`skipping hole, adjusting currentTime from ${n} to ${a}`),this.moved=!0,this.stalled=null,i.currentTime=a,e&&!e.gap){let t=Error(`fragment loaded with buffer holes, seeking from ${n} to ${a}`);r.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return a}}return 0}_tryNudgeBuffer(){let{config:e,hls:t,media:r,nudgeRetry:i}=this;if(null===r)return;let n=r.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){let a=n+(i+1)*e.nudgeOffset,s=Error(`Nudging 'currentTime' from ${n} to ${a}`);cU.warn(s.message),r.currentTime=a,t.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.BUFFER_NUDGE_ON_STALL,error:s,fatal:!1})}else{let r=Error(`Playhead still not moving while enough data buffered @${n} after ${e.nudgeMaxRetry} nudges`);cU.error(r.message),t.trigger(cC.ERROR,{type:cP.MEDIA_ERROR,details:cO.BUFFER_STALLED_ERROR,error:r,fatal:!0})}}}class gU extends pl{constructor(e,t,r){super(e,t,r,"[stream-controller]",h6.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){let{hls:e}=this;e.on(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.on(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.on(cC.LEVEL_LOADING,this.onLevelLoading,this),e.on(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.on(cC.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(cC.ERROR,this.onError,this),e.on(cC.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(cC.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(cC.BUFFER_CREATED,this.onBufferCreated,this),e.on(cC.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(cC.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(cC.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){let{hls:e}=this;e.off(cC.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(cC.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(cC.MANIFEST_LOADING,this.onManifestLoading,this),e.off(cC.MANIFEST_PARSED,this.onManifestParsed,this),e.off(cC.LEVEL_LOADED,this.onLevelLoaded,this),e.off(cC.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(cC.ERROR,this.onError,this),e.off(cC.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(cC.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(cC.BUFFER_CREATED,this.onBufferCreated,this),e.off(cC.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(cC.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(cC.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){let{lastCurrentTime:t,hls:r}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=r.startLevel;-1===e&&(r.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=r.firstAutoLevel),r.nextLoadLevel=e,this.level=r.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=po.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=po.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case po.WAITING_LEVEL:{let{levels:e,level:t}=this,r=null==e?void 0:e[t],i=null==r?void 0:r.details;if(i&&(!i.live||this.levelLastLoaded===r)){if(this.waitForCdnTuneIn(i))break;this.state=po.IDLE}else this.hls.nextLoadLevel!==this.level&&(this.state=po.IDLE);break}case po.FRAG_LOADING_WAITING_RETRY:{var e;let t=self.performance.now(),r=this.retryDate;if(!r||t>=r||null!=(e=this.media)&&e.seeking){let{levels:e,level:t}=this,r=null==e?void 0:e[t];this.resetStartWhenNotLoaded(r||null),this.state=po.IDLE}}}this.state===po.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){let{hls:e,levelLastLoaded:t,levels:r,media:i}=this;if(null===t||!i&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;let n=e.nextLoadLevel;if(!(null!=r&&r[n]))return;let a=r[n],s=this.getMainFwdBufferInfo();if(null===s)return;let o=this.getLevelDetails();if(o&&this._streamEnded(s,o)){let e={};this.altAudio&&(e.type="video"),this.hls.trigger(cC.BUFFER_EOS,e),this.state=po.ENDED;return}e.loadLevel!==n&&-1===e.manualLevel&&this.log(`Adapting to level ${n} from level ${this.level}`),this.level=e.nextLoadLevel=n;let l=a.details;if(!l||this.state===po.WAITING_LEVEL||l.live&&this.levelLastLoaded!==a){this.level=n,this.state=po.WAITING_LEVEL;return}let d=s.len,u=this.getMaxBufferLength(a.maxBitrate);if(d>=u)return;this.backtrackFragment&&this.backtrackFragment.start>s.end&&(this.backtrackFragment=null);let c=this.backtrackFragment?this.backtrackFragment.start:s.end,h=this.getNextFragment(c,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&"initSegment"!==h.sn&&this.fragmentTracker.getState(h)!==fX.OK){var f;let e=(null!=(f=this.backtrackFragment)?f:h).sn-l.startSN,t=l.fragments[e-1];t&&h.cc===t.cc&&(h=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&s.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,c)){if(!h.gap){let e=this.audioOnly&&!this.altAudio?cH.AUDIO:cH.VIDEO,t=(e===cH.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,h6.MAIN)}h=this.getNextFragmentLoopLoading(h,l,s,h6.MAIN,u)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,a,c))}loadFragment(e,t,r){let i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===fX.NOT_LOADED||i===fX.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,r)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,h6.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){let{levels:e,media:t}=this;if(null!=t&&t.readyState){let r;let i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);let n=this.getLevelDetails();if(null!=n&&n.live){let e=this.getMainFwdBufferInfo();if(!e||e.len<2*n.targetduration)return}if(!t.paused&&e){let t=e[this.hls.nextLoadLevel],i=this.fragLastKbps;r=i&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*i)+1:0}else r=0;let a=this.getBufferedFrag(t.currentTime+r);if(a){let e=this.followingBufferedFrag(a);if(e){this.abortCurrentFrag();let t=e.maxStartPTS?e.maxStartPTS:e.start,r=e.duration,i=Math.max(a.end,t+Math.min(Math.max(r-this.config.maxFragLookUpTolerance,r*(this.couldBacktrack?.5:.125)),r*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(i,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){let e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case po.KEY_LOADING:case po.FRAG_LOADING:case po.FRAG_LOADING_WAITING_RETRY:case po.PARSING:case po.PARSED:this.state=po.IDLE}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);let r=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new gF(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){let{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){let e=this.media,t=e?e.currentTime:null;ck(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);let r=this.getMainFwdBufferInfo();if(null===r||0===r.len){this.warn(`Main forward buffer length on "seeked" event ${r?r.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(cC.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let r=!1,i=!1;t.levels.forEach(e=>{let t=e.audioCodec;t&&(r=r||-1!==t.indexOf("mp4a.40.2"),i=i||-1!==t.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=r&&i&&!function(){var e;let t=gN();return"function"==typeof(null==t?void 0:null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){let{levels:r}=this;if(!r||this.state!==po.IDLE)return;let i=r[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=po.WAITING_LEVEL)}onLevelLoaded(e,t){var r,i;let{levels:n}=this,a=t.level,s=t.details,o=s.totalduration;if(!n){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""}, cc [${s.startCC}, ${s.endCC}] duration:${o}`);let l=n[a],d=this.fragCurrent;d&&(this.state===po.FRAG_LOADING||this.state===po.FRAG_LOADING_WAITING_RETRY)&&d.level!==t.level&&d.loader&&this.abortCurrentFrag();let u=0;if(s.live||null!=(r=l.details)&&r.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;u=this.alignPlaylists(s,l.details,null==(i=this.levelLastLoaded)?void 0:i.details)}if(l.details=s,this.levelLastLoaded=l,this.hls.trigger(cC.LEVEL_UPDATED,{details:s,level:a}),this.state===po.WAITING_LEVEL){if(this.waitForCdnTuneIn(s))return;this.state=po.IDLE}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,u),this.tick()}_handleFragmentLoadProgress(e){var t;let{frag:r,part:i,payload:n}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}let s=a[r.level],o=s.details;if(!o){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}let l=s.videoCodec,d=o.PTSKnown||!o.live,u=null==(t=r.initSegment)?void 0:t.data,c=this._getAudioCodec(s),h=this.transmuxer=this.transmuxer||new mr(this.hls,h6.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,p=new f2(r.level,r.sn,r.stats.chunkCount,n.byteLength,f,-1!==f),m=this.initPTS[r.cc];h.push(n,u,c,l,r,i,o.totalduration,d,p,m)}onAudioTrackSwitching(e,t){let r=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;let e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();let e=this.hls;r&&(e.trigger(cC.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(cC.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){let r=t.id,i=!!this.hls.audioTracks[r].url;if(i){let e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=i,this.tick()}onBufferCreated(e,t){let r,i;let n=t.tracks,a=!1;for(let e in n){let t=n[e];if("main"===t.id){if(i=e,r=t,"video"===e){let t=n[e];t&&(this.videoBuffer=t.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){let{frag:r,part:i}=t;if(r&&r.type!==h6.MAIN)return;if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===po.PARSED&&(this.state=po.IDLE);return}let n=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}onError(e,t){var r;if(t.fatal){this.state=po.ERROR;return}switch(t.details){case cO.FRAG_GAP:case cO.FRAG_PARSING_ERROR:case cO.FRAG_DECRYPT_ERROR:case cO.FRAG_LOAD_ERROR:case cO.FRAG_LOAD_TIMEOUT:case cO.KEY_LOAD_ERROR:case cO.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(h6.MAIN,t);break;case cO.LEVEL_LOAD_ERROR:case cO.LEVEL_LOAD_TIMEOUT:case cO.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==po.WAITING_LEVEL||(null==(r=t.context)?void 0:r.type)!==h8.LEVEL||(this.state=po.IDLE);break;case cO.BUFFER_APPEND_ERROR:case cO.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===cO.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case cO.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){let{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!f1.getBuffered(e).length){let e=this.state!==po.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=po.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==cH.AUDIO||this.audioOnly&&!this.altAudio){let e=(t===cH.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,t,h6.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){let{media:e}=this;if(!e)return;let t=e.currentTime,r=this.startPosition;if(r>=0&&t<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${t}`);return}let i=f1.getBuffered(e),n=(i.length?i.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${n} to match buffer start`),r+=n,this.startPosition=r),this.log(`seek to target start position ${r} from current time ${t}`),e.currentTime=r}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(r=>{let{hls:i}=this;if(!r||this.fragContextChanged(e))return;t.fragmentError=0,this.state=po.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;let n=e.stats;n.parsing.start=n.parsing.end=n.buffering.start=n.buffering.end=self.performance.now(),i.trigger(cC.FRAG_LOADED,r),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;let r="main",{hls:i}=this,{remuxResult:n,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s){this.resetWhenMissingContext(a);return}let{frag:o,part:l,level:d}=s,{video:u,text:c,id3:h,initSegment:f}=n,{details:p}=d,m=this.altAudio?void 0:n.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=po.PARSING,f){if(null!=f&&f.tracks){let e=o.initSegment||o;this._bufferInitSegment(d,f.tracks,e,a),i.trigger(cC.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:r,tracks:f.tracks})}let e=f.initPTS,t=f.timescale;ck(e)&&(this.initPTS[o.cc]={baseTime:e,timescale:t},i.trigger(cC.INIT_PTS_FOUND,{frag:o,id:r,initPTS:e,timescale:t}))}if(u&&p&&"initSegment"!==o.sn){let e=p.fragments[o.sn-1-p.startSN],t=o.sn===p.startSN,r=!e||o.cc>e.cc;if(!1!==n.independent){let{startPTS:e,endPTS:i,startDTS:n,endDTS:s}=u;if(l)l.elementaryStreams[u.type]={startPTS:e,endPTS:i,startDTS:n,endDTS:s};else if(u.firstKeyFrame&&u.independent&&1===a.id&&!r&&(this.couldBacktrack=!0),u.dropped&&u.independent){let n=this.getMainFwdBufferInfo(),a=(n?n.end:this.getLoadPosition())+this.config.maxBufferHole,l=u.firstKeyFramePTS?u.firstKeyFramePTS:e;if(t||!(a<l-this.config.maxBufferHole)||r)r&&(o.gap=!0);else{this.backtrack(o);return}o.setElementaryStreamInfo(u.type,o.start,i,o.start,s,!0)}else t&&e>2&&(o.gap=!0);o.setElementaryStreamInfo(u.type,e,i,n,s),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(u,o,l,a,t||r)}else if(t||r)o.gap=!0;else{this.backtrack(o);return}}if(m){let{startPTS:e,endPTS:t,startDTS:r,endDTS:i}=m;l&&(l.elementaryStreams[cH.AUDIO]={startPTS:e,endPTS:t,startDTS:r,endDTS:i}),o.setElementaryStreamInfo(cH.AUDIO,e,t,r,i),this.bufferFragmentData(m,o,l,a)}if(p&&null!=h&&null!=(t=h.samples)&&t.length){let e={id:r,frag:o,details:p,samples:h.samples};i.trigger(cC.FRAG_PARSING_METADATA,e)}if(p&&c){let e={id:r,frag:o,details:p,samples:c.samples};i.trigger(cC.FRAG_PARSING_USERDATA,e)}}_bufferInitSegment(e,t,r,i){if(this.state!==po.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;let{audio:n,video:a,audiovideo:s}=t;if(n){let t=e.audioCodec,r=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");let e=n.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===r.indexOf("firefox")&&(t="mp4a.40.5")}t&&-1!==t.indexOf("mp4a.40.5")&&-1!==r.indexOf("android")&&"audio/mpeg"!==n.container&&(t="mp4a.40.2",this.log(`Android: force audio codec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${t}"`),n.levelCodec=t,n.id="main",this.log(`Init audio buffer, container:${n.container}, codecs[selected/level/parsed]=[${t||""}/${e.audioCodec||""}/${n.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),s&&this.log(`Init audiovideo buffer, container:${s.container}, codecs[level/parsed]=[${e.codecs}/${s.codec}]`),this.hls.trigger(cC.BUFFER_CODECS,t),Object.keys(t).forEach(e=>{let n=t[e].initSegment;null!=n&&n.byteLength&&this.hls.trigger(cC.BUFFER_APPENDING,{type:e,data:n,frag:r,part:null,chunkMeta:i,parent:r.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,h6.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=po.IDLE}checkFragmentChanged(){let e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){let r=e.currentTime;if(f1.isBuffered(e,r)?t=this.getAppendedFrag(r):f1.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;let e=this.fragPlaying,r=t.level;e&&t.sn===e.sn&&e.level===r||(this.fragPlaying=t,this.hls.trigger(cC.FRAG_CHANGED,{frag:t}),e&&e.level===r||this.hls.trigger(cC.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){let e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){let e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){let e=this.media;if(e){let t=e.currentTime,r=this.currentFrag;if(r&&ck(t)&&ck(r.programDateTime))return new Date(r.programDateTime+(t-r.start)*1e3)}return null}get currentLevel(){let e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){let e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class gB{static get version(){return"1.5.15"}static isMSESupported(){return gM()}static isSupported(){return function(){if(!gM())return!1;let e=hF();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>e.isTypeSupported(h$(t,"video")))||["mp4a.40.2","fLaC"].some(t=>e.isTypeSupported(h$(t,"audio"))))}()}static getMediaSource(){return hF()}static get Events(){return cC}static get ErrorTypes(){return cP}static get ErrorDetails(){return cO}static get DefaultConfig(){return gB.defaultConfig?gB.defaultConfig:gI}static set DefaultConfig(e){gB.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new mt,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,function(e,t){if("object"==typeof console&&!0===e||"object"==typeof e){!function(e,...t){t.forEach(function(t){cF[t]=e[t]?e[t].bind(e):function(e){let t=self.console[e];return t?t.bind(self.console,`[${e}] >`):cN}(t)})}(e,"debug","log","info","warn","error");try{cF.log(`Debug logs enabled for "${t}" in hls.js version 1.5.15`)}catch(e){cF=cM}}else cF=cM}(e.debug||!1,"Hls instance");let t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');let r=function e(t){return t&&"object"==typeof t?Array.isArray(t)?t.map(e):Object.keys(t).reduce((r,i)=>(r[i]=e(t[i]),r),{}):t}(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(e=>{let n=`${"level"===e?"playlist":e}LoadPolicy`,a=void 0===t[n],s=[];i.forEach(i=>{let o=`${e}Loading${i}`,l=t[o];if(void 0!==l&&a){s.push(o);let e=r[n].default;switch(t[n]={default:e},i){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}}),s.length&&cU.warn(`hls.js config: "${s.join('", "')}" setting(s) are deprecated, use "${n}": ${JSON.stringify(t[n])}`)}),cR(cR({},r),t)}(gB.DefaultConfig,e);this.userConfig=e,t.progressive&&function(e){let t=e.loader;t!==gR&&t!==gS?(cU.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=gR,e.progressive=!0,e.enableSoftwareAES=!0,cU.log("[config]: Progressive streaming enabled, using FetchLoader"))}(t);let{abrController:r,bufferController:i,capLevelController:n,errorController:a,fpsController:s}=t,o=new a(this),l=this.abrController=new r(this),d=this.bufferController=new i(this),u=this.capLevelController=new n(this),c=new s(this),h=new fe(this),f=new fc(this),p=t.contentSteeringController,m=p?new p(this):null,g=this.levelController=new gC(this,m),v=new fQ(this),y=new gO(this.config),b=this.streamController=new gU(this,v,y);u.setStreamController(b),c.setStreamController(b);let E=[h,g,b];m&&E.splice(1,0,m),this.networkControllers=E;let T=[l,d,u,c,f,v];this.audioTrackController=this.createController(t.audioTrackController,E);let w=t.audioStreamController;w&&E.push(new w(this,v,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,E);let x=t.subtitleStreamController;x&&E.push(new x(this,v,y)),this.createController(t.timelineController,T),y.emeController=this.emeController=this.createController(t.emeController,T),this.cmcdController=this.createController(t.cmcdController,T),this.latencyController=this.createController(fh,T),this.coreComponents=T,E.push(o);let S=o.onErrorOut;"function"==typeof S&&this.on(cC.ERROR,S,o)}createController(e,t){if(e){let r=new e(this);return t&&t.push(r),r}return null}on(e,t,r=this){this._emitter.on(e,t,r)}once(e,t,r=this){this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,r=this,i){this._emitter.off(e,t,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(cU.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;let r=e===cC.ERROR;this.trigger(cC.ERROR,{type:cP.OTHER_ERROR,details:cO.INTERNAL_EXCEPTION,fatal:r,event:e,error:t}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){cU.log("destroy"),this.trigger(cC.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(e=>e.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(e=>e.destroy()),this.coreComponents.length=0;let e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){cU.log("attachMedia"),this._media=e,this.trigger(cC.MEDIA_ATTACHING,{media:e})}detachMedia(){cU.log("detachMedia"),this.trigger(cC.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();let t=this.media,r=this.url,i=this.url=cS.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,cU.log(`loadSource:${i}`),t&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(cC.MANIFEST_LOADING,{url:e})}startLoad(e=-1){cU.log(`startLoad(${e})`),this.started=!0,this.networkControllers.forEach(t=>{t.startLoad(e)})}stopLoad(){cU.log("stopLoad"),this.started=!1,this.networkControllers.forEach(e=>{e.stopLoad()})}resumeBuffering(){this.started&&this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.startLoad(-1)})}pauseBuffering(){this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.stopLoad()})}swapAudioCodec(){cU.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){cU.log("recoverMediaError");let e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){return this.levelController.levels||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){cU.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){cU.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){cU.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){cU.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){let e=this.levelController.startLevel;return -1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){cU.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){let t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){let{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){let{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(cU.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){ff.indexOf(e)>-1&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return -1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){let{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;let r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){let e;let{levels:t,autoLevelCapping:r,maxHdcpLevel:i}=this;if(e=-1===r&&null!=t&&t.length?t.length-1:r,i)for(let r=e;r--;){let e=t[r].attrs["HDCP-LEVEL"];if(e&&e<=i)return r}return e}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null}get allAudioTracks(){let e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){let e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){let e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){let t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){let e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){let e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){let e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){let t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){let e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){let t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}gB.defaultConfig=void 0;var gj=class e extends Error{constructor(t,r=e.MEDIA_ERR_CUSTOM,i,n){var a;super(t),this.name="MediaError",this.code=r,this.context=n,this.fatal=null!=i?i:r>=e.MEDIA_ERR_NETWORK&&r<=e.MEDIA_ERR_ENCRYPTED,this.message||(this.message=null!=(a=e.defaultMessages[this.code])?a:"")}};gj.MEDIA_ERR_ABORTED=1,gj.MEDIA_ERR_NETWORK=2,gj.MEDIA_ERR_DECODE=3,gj.MEDIA_ERR_SRC_NOT_SUPPORTED=4,gj.MEDIA_ERR_ENCRYPTED=5,gj.MEDIA_ERR_CUSTOM=100,gj.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var g$=e=>null==e,gG=(e,t)=>!g$(t)&&e in t,gq={ANY:"any",MUTED:"muted"},gH={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},gK={MSE:"mse",NATIVE:"native"},gV={HEADER:"header",QUERY:"query",NONE:"none"},gW=(Object.values(gV),{M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"}),gz={HLS:gW.M3U8},gY=(Object.keys(gz),[...Object.values(gW),"hls","HLS"]),gX=(e,t,r,i,n=e)=>{n.addEventListener(t,r,i),e.addEventListener("teardown",()=>{n.removeEventListener(t,r)},{once:!0})},gQ=e=>{let t=e.indexOf("?");return t<0?[e]:[e.slice(0,t),e.slice(t)]},gJ=e=>{let t=e.type;if(t){let e=t.toUpperCase();return gG(e,gz)?gz[e]:t}let{src:r}=e;return r?g1(r):""},gZ=e=>"VOD"===e?gH.ON_DEMAND:gH.LIVE,g0=e=>"EVENT"===e?Number.POSITIVE_INFINITY:"VOD"===e?Number.NaN:0,g1=e=>{let t="";try{t=new URL(e).pathname}catch{console.error("invalid url")}let r=t.lastIndexOf(".");if(r<0)return"";let i=t.slice(r+1).toUpperCase();return gG(i,gW)?gW[i]:""},g2=Object.values(gq),g4=e=>"boolean"==typeof e||"string"==typeof e&&g2.includes(e),g3=(e,t,r)=>{let{autoplay:i}=e,n=!1,a=!1,s=g4(i)?i:!!i,o=()=>{n||gX(t,"playing",()=>{n=!0},{once:!0})};if(o(),gX(t,"loadstart",()=>{n=!1,o(),g5(t,s)},{once:!0}),gX(t,"loadstart",()=>{r||(a=e.streamType&&e.streamType!==gH.UNKNOWN?e.streamType===gH.LIVE:!Number.isFinite(t.duration)),g5(t,s)},{once:!0}),r&&r.once(gB.Events.LEVEL_LOADED,(t,r)=>{var i;a=e.streamType&&e.streamType!==gH.UNKNOWN?e.streamType===gH.LIVE:null!=(i=r.details.live)&&i}),!s){let i=()=>{!a||Number.isFinite(e.startTime)||(null!=r&&r.liveSyncPosition?t.currentTime=r.liveSyncPosition:Number.isFinite(t.seekable.end(0))&&(t.currentTime=t.seekable.end(0)))};r&&gX(t,"play",()=>{"metadata"===t.preload?r.once(gB.Events.LEVEL_UPDATED,i):i()},{once:!0})}return e=>{n||g5(t,s=g4(e)?e:!!e)}},g5=(e,t)=>{if(!t)return;let r=e.muted,i=()=>e.muted=r;switch(t){case gq.ANY:e.play().catch(()=>{e.muted=!0,e.play().catch(i)});break;case gq.MUTED:e.muted=!0,e.play().catch(i);break;default:e.play().catch(()=>{})}},g8=({preload:e,src:t},r,i)=>{let n=e=>{null!=e&&["","none","metadata","auto"].includes(e)?r.setAttribute("preload",e):r.removeAttribute("preload")};if(!i)return n(e),n;let a=!1,s=!1,o=i.config.maxBufferLength,l=i.config.maxBufferSize,d=e=>{n(e);let t=null!=e?e:r.preload;s||"none"===t||("metadata"===t?(i.config.maxBufferLength=1,i.config.maxBufferSize=1):(i.config.maxBufferLength=o,i.config.maxBufferSize=l),u())},u=()=>{!a&&t&&(a=!0,i.loadSource(t))};return gX(r,"play",()=>{s=!0,i.config.maxBufferLength=o,i.config.maxBufferSize=l,u()},{once:!0}),d(e),d},g6=e=>"time"in e?e.time:e.startTime;function g9(e,t,r,i,n){let a=document.createElement("track");return a.kind=t,a.label=r,i&&(a.srclang=i),n&&(a.id=n),a.track.mode=["subtitles","captions"].includes(t)?"disabled":"hidden",a.setAttribute("data-removeondestroy",""),e.append(a),a.track}function g7(e,t,r){var i;return null==(i=Array.from(e.querySelectorAll("track")).find(e=>e.track.label===t&&e.track.kind===r))?void 0:i.track}async function ve(e,t,r,i){let n=g7(e,r,i);return n||((n=g9(e,i,r)).mode="hidden",await new Promise(e=>setTimeout(()=>e(void 0),0))),"hidden"!==n.mode&&(n.mode="hidden"),[...t].sort((e,t)=>g6(t)-g6(e)).forEach(t=>{var r,a;let s=t.value,o=g6(t);if("endTime"in t&&null!=t.endTime)null==n||n.addCue(new VTTCue(o,t.endTime,"chapters"===i?s:JSON.stringify(null!=s?s:null)));else{let t=Array.prototype.findIndex.call(null==n?void 0:n.cues,e=>e.startTime>=o),l=null==(r=null==n?void 0:n.cues)?void 0:r[t],d=l?l.startTime:Number.isFinite(e.duration)?e.duration:Number.MAX_SAFE_INTEGER,u=null==(a=null==n?void 0:n.cues)?void 0:a[t-1];u&&(u.endTime=o),null==n||n.addCue(new VTTCue(o,d,"chapters"===i?s:JSON.stringify(null!=s?s:null)))}}),e.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),n}var vt="cuepoints",vr=Object.freeze({label:vt});async function vi(e,t,r=vr){return ve(e,t,r.label,"metadata")}var vn=e=>({time:e.startTime,value:JSON.parse(e.text)});async function va(e,t=vr){return new Promise(r=>{gX(e,"loadstart",async()=>{let i=await vi(e,[],t);gX(e,"cuechange",()=>{let t=function(e,t={label:vt}){var r,i;let n=g7(e,t.label,"metadata");if(!(null!=(r=null==n?void 0:n.activeCues)&&r.length))return;if(1===n.activeCues.length)return vn(n.activeCues[0]);let{currentTime:a}=e;return vn(Array.prototype.find.call(null!=(i=n.activeCues)?i:[],({startTime:e,endTime:t})=>e<=a&&t>a)||n.activeCues[0])}(e);if(t){let r=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(r)}},{},i),r(i)})})}var vs="chapters",vo=Object.freeze({label:vs}),vl=e=>({startTime:e.startTime,endTime:e.endTime,value:e.text});async function vd(e,t,r=vo){return ve(e,t,r.label,"chapters")}async function vu(e,t=vo){return new Promise(r=>{gX(e,"loadstart",async()=>{let i=await vd(e,[],t);gX(e,"cuechange",()=>{let t=function(e,t={label:vs}){var r,i;let n=g7(e,t.label,"chapters");if(!(null!=(r=null==n?void 0:n.activeCues)&&r.length))return;if(1===n.activeCues.length)return vl(n.activeCues[0]);let{currentTime:a}=e;return vl(Array.prototype.find.call(null!=(i=n.activeCues)?i:[],({startTime:e,endTime:t})=>e<=a&&t>a)||n.activeCues[0])}(e);if(t){let r=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(r)}},{},i),r(i)})})}var vc,vh,vf,vp,vm,vg,vv,vy,vb,vE={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},vT=e=>e.includes("fps")?vE.FAIRPLAY:e.includes("playready")?vE.PLAYREADY:e.includes("widevine")?vE.WIDEVINE:void 0,v_=async e=>fetch(e).then(e=>e.text()).then(e=>fetch(e.split(`
`).find((e,t,r)=>t&&r[t-1].startsWith("#EXT-X-STREAM-INF"))).then(e=>e.text()).then(e=>e.split(`
`))),vw=e=>{var t,r,i;let n=null==(r=(null!=(t=e.find(e=>e.startsWith("#EXT-X-PLAYLIST-TYPE")))?t:"").split(":")[1])?void 0:r.trim(),a=gZ(n),s=g0(n),o;if(a===gH.LIVE){let t=e.find(e=>e.startsWith("#EXT-X-PART-INF"));if(t)o=2*+t.split(":")[1].split("=")[1];else{let t=e.find(e=>e.startsWith("#EXT-X-TARGETDURATION")),r=null==(i=null==t?void 0:t.split(":"))?void 0:i[1];o=3*+(null!=r?r:6)}}return{streamType:a,targetLiveWindow:s,liveEdgeStartOffset:o}},vx=async(e,t)=>t===gW.MP4?{streamType:gH.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0}:t===gW.M3U8?vw(await v_(e)):(console.error(`Media type ${t} is an unrecognized or unsupported type for src ${e}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}),vS=async(e,t,r=gJ({src:e}))=>{var i,n,a;let{streamType:s,targetLiveWindow:o,liveEdgeStartOffset:l}=await vx(e,r);(null!=(i=vI.get(t))?i:{}).liveEdgeStartOffset=l,(null!=(n=vI.get(t))?n:{}).targetLiveWindow=o,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(a=vI.get(t))?a:{}).streamType=s,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},vA=e=>{var t;let r=e.type,i=gZ(r),n=g0(r),a,s=!!(null!=(t=e.partList)&&t.length);return i===gH.LIVE&&(a=s?2*e.partTarget:3*e.targetduration),{streamType:i,targetLiveWindow:n,liveEdgeStartOffset:a,lowLatency:s}},vR=(e,t,r)=>{var i,n,a,s,o,l,d,u;let{streamType:c,targetLiveWindow:h,liveEdgeStartOffset:f,lowLatency:p}=vA(e);if(c===gH.LIVE){p?(r.config.backBufferLength=null!=(i=r.userConfig.backBufferLength)?i:4,r.config.maxFragLookUpTolerance=null!=(n=r.userConfig.maxFragLookUpTolerance)?n:.001,r.config.abrBandWidthUpFactor=null!=(a=r.userConfig.abrBandWidthUpFactor)?a:r.config.abrBandWidthFactor):r.config.backBufferLength=null!=(s=r.userConfig.backBufferLength)?s:8;let e=Object.freeze({get length(){return t.seekable.length},start:e=>t.seekable.start(e),end(e){var i;return e>this.length||e<0||Number.isFinite(t.duration)?t.seekable.end(e):null!=(i=r.liveSyncPosition)?i:t.seekable.end(e)}});(null!=(o=vI.get(t))?o:{}).seekable=e}(null!=(l=vI.get(t))?l:{}).liveEdgeStartOffset=f,(null!=(d=vI.get(t))?d:{}).targetLiveWindow=h,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(u=vI.get(t))?u:{}).streamType=c,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},vL=null!=(vm=null==(vp=null==globalThis?void 0:globalThis.navigator)?void 0:vp.userAgent)?vm:"",vk=null!=(vy=null==(vv=null==(vg=null==globalThis?void 0:globalThis.navigator)?void 0:vg.userAgentData)?void 0:vv.platform)?vy:"",vD=vL.toLowerCase().includes("android")||["x11","android"].some(e=>vk.toLowerCase().includes(e)),vI=new WeakMap,vC="mux.com",vP=null==(vb=gB.isSupported)?void 0:vb.call(gB),vO=()=>c_.utils.now(),vN=c_.utils.generateUUID,vM=({playbackId:e,customDomain:t=vC,maxResolution:r,minResolution:i,renditionOrder:n,programStartTime:a,programEndTime:s,tokens:{playback:o}={},extraSourceParams:l={}}={})=>{if(!e)return;let[d,u=""]=gQ(e),c=new URL(`https://stream.${t}/${d}.m3u8${u}`);return o||c.searchParams.has("token")?(c.searchParams.forEach((e,t)=>{"token"!=t&&c.searchParams.delete(t)}),o&&c.searchParams.set("token",o)):(r&&c.searchParams.set("max_resolution",r),i&&(c.searchParams.set("min_resolution",i),r&&+r.slice(0,-1)<+i.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",i,"maxResolution",r)),n&&c.searchParams.set("rendition_order",n),a&&c.searchParams.set("program_start_time",`${a}`),s&&c.searchParams.set("program_end_time",`${s}`),Object.entries(l).forEach(([e,t])=>{null!=t&&c.searchParams.set(e,t)})),c.toString()},vF=e=>{if(!e)return;let[t]=e.split("?");return t||void 0},vU=e=>{if(!e||!e.startsWith("https://stream."))return;let[t]=new URL(e).pathname.slice(1).split(".m3u8");return t||void 0},vB=e=>{var t,r,i;return null!=(t=null==e?void 0:e.metadata)&&t.video_id?e.metadata.video_id:v5(e)&&null!=(i=null!=(r=vF(e.playbackId))?r:vU(e.src))?i:e.src},vj=e=>{var t,r;return null!=(r=null==(t=vI.get(e))?void 0:t.streamType)?r:gH.UNKNOWN},v$=e=>{var t,r;return null!=(r=null==(t=vI.get(e))?void 0:t.seekable)?r:e.seekable},vG=.034,vq=(e,t,r=vG)=>Math.abs(e-t)<=r,vH=(e,t,r=vG)=>e>t||vq(e,t,r),vK=(e,t=vG)=>e.paused&&vH(e.currentTime,e.duration,t),vV=(e,t)=>{var r,i,n;if(!t||!e.buffered.length)return;if(e.readyState>2)return!1;let a=t.currentLevel>=0?null==(i=null==(r=t.levels)?void 0:r[t.currentLevel])?void 0:i.details:null==(n=t.levels.find(e=>!!e.details))?void 0:n.details;if(!a||a.live)return;let{fragments:s}=a;if(!(null!=s&&s.length))return;if(e.currentTime<e.duration-(a.targetduration+.5))return!1;let o=s[s.length-1];if(e.currentTime<=o.start)return!1;let l=o.start+o.duration/2,d=e.buffered.start(e.buffered.length-1),u=e.buffered.end(e.buffered.length-1);return l>d&&l<u},vW=(e,t)=>e.ended||e.loop?e.ended:!!(t&&vV(e,t))||vK(e),vz=(e,t,r)=>{vY(t,r);let{metadata:i={}}=e,{view_session_id:n=vN()}=i,a=vB(e);i.view_session_id=n,i.video_id=a,e.metadata=i,e.drmTypeCb=e=>{var r;null==(r=t.mux)||r.emit("hb",{view_drm_type:e})},vI.set(t,{});let s=vQ(e,t),o=g8(e,t,s);v8(e,t,s),v6(e,t,s),va(t),vu(t);let l=g3(e,t,s);return{engine:s,setAutoplay:l,setPreload:o}},vY=(e,t)=>{let r=null==t?void 0:t.engine;r&&(r.detachMedia(),r.destroy()),null!=e&&e.mux&&!e.mux.deleted&&(e.mux.destroy(),delete e.mux),e&&(e.removeAttribute("src"),e.load(),e.removeEventListener("error",v7),e.removeEventListener("error",ye),e.removeEventListener("durationchange",v9),vI.delete(e),e.dispatchEvent(new Event("teardown")))};function vX(e,t){var r;let i=gJ(e);if(i!==gW.M3U8)return!0;let n=!i||null==(r=t.canPlayType(i))||r,{preferPlayback:a}=e,s=a===gK.MSE,o=a===gK.NATIVE;return n&&(o||!(vP&&(s||vD)))}var vQ=(e,t)=>{let{debug:r,streamType:i,startTime:n=-1,metadata:a,preferCmcd:s,_hlsConfig:o={}}=e,l=gJ(e)===gW.M3U8,d=vX(e,t);if(l&&!d&&vP){let t=vJ(i),l=vZ(e);return new gB({debug:r,startPosition:n,cmcd:s!==gV.NONE?{useHeaders:s===gV.HEADER,sessionId:null==a?void 0:a.view_session_id,contentId:null==a?void 0:a.video_id}:void 0,xhrSetup:(e,t)=>{var r,i;if(s&&s!==gV.QUERY)return;let n=new URL(t);if(!n.searchParams.has("CMCD"))return;let a=(null!=(i=null==(r=n.searchParams.get("CMCD"))?void 0:r.split(","))?i:[]).filter(e=>e.startsWith("sid")||e.startsWith("cid")).join(",");n.searchParams.set("CMCD",a),e.open("GET",n)},backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0,...t,...l,...o})}},vJ=e=>e===gH.LIVE?{backBufferLength:8}:{},vZ=e=>{let{drmToken:t,src:r,playbackId:i=vU(r),drmTypeCb:n}=e;return t&&i?{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:v4(e,"fairplay"),serverCertificateUrl:v3(e,"fairplay")},"com.widevine.alpha":{licenseUrl:v4(e,"widevine")},"com.microsoft.playready":{licenseUrl:v4(e,"playready")}},requestMediaKeySystemAccessFunc:(e,t)=>("com.widevine.alpha"===e&&(t=[...t.map(e=>{var t;let r=null==(t=e.videoCapabilities)?void 0:t.map(e=>({...e,robustness:"HW_SECURE_ALL"}));return{...e,videoCapabilities:r}}),...t]),navigator.requestMediaKeySystemAccess(e,t).then(t=>{let r=vT(e);return null==n||n(r),t}))}:{}},v0=async e=>await (await fetch(e)).arrayBuffer(),v1=async(e,t)=>new Uint8Array(await (await fetch(t,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:e})).arrayBuffer()),v2=(e,t)=>{gX(t,"encrypted",async r=>{try{let i=r.initDataType;if("skd"!==i){console.error(`Received unexpected initialization data type "${i}"`);return}if(!t.mediaKeys){let r=await (await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[i],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(t=>{var r;return null==(r=e.drmTypeCb)||r.call(e,vE.FAIRPLAY),t})).createMediaKeys(),n=await v0(v3(e,"fairplay"));await r.setServerCertificate(n),await t.setMediaKeys(r)}let n=r.initData;if(null==n){console.error(`Could not start encrypted playback due to missing initData in ${r.type} event`);return}let a=t.mediaKeys.createSession();a.generateRequest(i,n);let s=await new Promise(e=>{a.addEventListener("message",t=>{e(t.message)},{once:!0})}),o=await v1(s,v4(e,"fairplay"));return await a.update(o),a}catch(e){console.error(`Could not start encrypted playback due to exception "${e}"`)}})},v4=({playbackId:e,drmToken:t,customDomain:r=vC},i)=>`https://license.${r.toLocaleLowerCase().endsWith(vC)?r:vC}/license/${i}/${e}?token=${t}`,v3=({playbackId:e,drmToken:t,customDomain:r=vC},i)=>`https://license.${r.toLocaleLowerCase().endsWith(vC)?r:vC}/appcert/${i}/${e}?token=${t}`,v5=({playbackId:e,src:t,customDomain:r})=>{if(e)return!0;if("string"!=typeof t)return!1;let i=new URL(t,null==window?void 0:window.location.href).hostname.toLocaleLowerCase();return i.includes(vC)||!!r&&i.includes(r.toLocaleLowerCase())},v8=(e,t,r)=>{var i;let{envKey:n,disableTracking:a}=e,s=v5(e);if(!a&&(n||s)){let{playerInitTime:a,playerSoftwareName:s,playerSoftwareVersion:o,beaconCollectionDomain:l,debug:d,disableCookies:u}=e,c={...e.metadata,video_title:(null==(i=null==e?void 0:e.metadata)?void 0:i.video_title)||void 0};c_.monitor(t,{debug:d,beaconCollectionDomain:l,hlsjs:r,Hls:r?gB:void 0,automaticErrorTracking:!1,errorTranslator:t=>"string"!=typeof t.player_error_code&&("function"==typeof e.errorTranslator?e.errorTranslator(t):t),disableCookies:u,data:{...n?{env_key:n}:{},player_software_name:s,player_software:s,player_software_version:o,player_init_time:a,...c}})}},v6=(e,t,r)=>{var i;let n=vX(e,t),{src:a}=e,s=()=>{t.ended||!vW(t,r)||(vV(t,r)?t.currentTime=t.buffered.end(t.buffered.length-1):t.dispatchEvent(new Event("ended")))},o,l,d=()=>{var e,r;let i=null==(e=v$(t))?void 0:e.start(0),n=null==(r=v$(t))?void 0:r.end(0);(l!==n||o!==i)&&t.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),o=i,l=n};if(gX(t,"durationchange",d),t&&n){let r=gJ(e);if("string"==typeof a){let n=()=>{if(vj(t)!==gH.LIVE||Number.isFinite(t.duration))return;let e=setInterval(d,1e3);t.addEventListener("teardown",()=>{clearInterval(e)},{once:!0}),gX(t,"durationchange",()=>{Number.isFinite(t.duration)&&clearInterval(e)})};if("none"===t.preload){let e=()=>{vS(a,t,r).then(n),t.removeEventListener("loadedmetadata",i)},i=()=>{vS(a,t,r).then(n),t.removeEventListener("play",e)};gX(t,"play",e,{once:!0}),gX(t,"loadedmetadata",i,{once:!0})}else vS(a,t,r).then(n);e.drmToken&&v2(e,t),t.setAttribute("src",a),e.startTime&&((null!=(i=vI.get(t))?i:{}).startTime=e.startTime,t.addEventListener("durationchange",v9,{once:!0}))}else t.removeAttribute("src");t.addEventListener("error",v7),t.addEventListener("error",ye),t.addEventListener("emptied",()=>{t.querySelectorAll("track[data-removeondestroy]").forEach(e=>{e.remove()})},{once:!0}),gX(t,"pause",s),gX(t,"seeked",s),gX(t,"play",()=>{t.ended||vH(t.currentTime,t.duration)&&(t.currentTime=t.seekable.length?t.seekable.start(0):0)})}else r&&a?(r.once(gB.Events.LEVEL_LOADED,(e,i)=>{vR(i.details,t,r),d(),vj(t)!==gH.LIVE||Number.isFinite(t.duration)||(r.on(gB.Events.LEVEL_UPDATED,d),gX(t,"durationchange",()=>{Number.isFinite(t.duration)&&r.off(gB.Events.LEVELS_UPDATED,d)}))}),r.on(gB.Events.ERROR,(e,r)=>{let i={[gB.ErrorTypes.NETWORK_ERROR]:gj.MEDIA_ERR_NETWORK,[gB.ErrorTypes.MEDIA_ERROR]:gj.MEDIA_ERR_DECODE},n=new gj("",i[r.type]);n.fatal=r.fatal,n.data=r,t.dispatchEvent(new CustomEvent("error",{detail:n}))}),t.addEventListener("error",ye),gX(t,"waiting",s),function(e,t){var r;if(!("videoTracks"in e))return;let i=new WeakMap;t.on(gB.Events.MANIFEST_PARSED,function(t,r){o();let n=e.addVideoTrack("main");for(let[e,t]of(n.selected=!0,r.levels.entries())){let r=n.addRendition(t.url[0],t.width,t.height,t.videoCodec,t.bitrate);i.set(t,`${e}`),r.id=`${e}`}}),t.on(gB.Events.AUDIO_TRACKS_UPDATED,function(t,r){for(let t of(s(),r.audioTracks)){let r=t.default?"main":"alternative",i=e.addAudioTrack(r,t.name,t.lang);i.id=`${t.id}`,t.default&&(i.enabled=!0)}}),e.audioTracks.addEventListener("change",()=>{var r;let i=+(null==(r=[...e.audioTracks].find(e=>e.enabled))?void 0:r.id),n=t.audioTracks.map(e=>e.id);i!=t.audioTrack&&n.includes(i)&&(t.audioTrack=i)}),t.on(gB.Events.LEVELS_UPDATED,function(t,r){var n;let a=e.videoTracks[null!=(n=e.videoTracks.selectedIndex)?n:0];if(!a)return;let s=r.levels.map(e=>i.get(e));for(let t of e.videoRenditions)t.id&&!s.includes(t.id)&&a.removeRendition(t)});let n=r=>{let i=e.currentTime,n=!1,a=(e,t)=>{n||(n=!Number.isFinite(t.endOffset))};t.on(gB.Events.BUFFER_FLUSHING,a),t.nextLevel=r,t.off(gB.Events.BUFFER_FLUSHING,a),n||t.trigger(gB.Events.BUFFER_FLUSHING,{startOffset:i+10,endOffset:1/0,type:"video"})};null==(r=e.videoRenditions)||r.addEventListener("change",e=>{let r=e.target.selectedIndex;r!=t.nextLevel&&n(r)});let a=()=>{for(let t of e.videoTracks)e.removeVideoTrack(t)},s=()=>{for(let t of e.audioTracks)e.removeAudioTrack(t)},o=()=>{a(),s()};t.once(gB.Events.DESTROYING,o)}(e,r),function(e,t){t.on(gB.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(r,{tracks:i})=>{i.forEach(r=>{var i;let n=null!=(i=r.subtitleTrack)?i:r.closedCaptions,a=t.subtitleTracks.findIndex(({lang:e,name:t,type:i})=>e==(null==n?void 0:n.lang)&&t===r.label&&i.toLowerCase()===r.kind);g9(e,r.kind,r.label,null==n?void 0:n.lang,`${r.kind}${a}`)})});let r=()=>{var r;if(!t.subtitleTracks.length)return;let i=Array.from(e.textTracks).find(e=>e.id&&"showing"===e.mode&&["subtitles","captions"].includes(e.kind)),n=`${null==(r=t.subtitleTracks[t.subtitleTrack])?void 0:r.type.toLowerCase()}${t.subtitleTrack}`;if(i&&(t.subtitleTrack<0||(null==i?void 0:i.id)!==n)){let e=t.subtitleTracks.findIndex(({lang:e,name:t,type:r})=>e==i.language&&t===i.label&&r.toLowerCase()===i.kind);t.subtitleTrack=e}i&&(null==i?void 0:i.id)===n&&i.cues&&Array.from(i.cues).forEach(e=>{i.addCue(e)})};e.textTracks.addEventListener("change",r),t.on(gB.Events.CUES_PARSED,(t,{track:r,cues:i})=>{let n=e.textTracks.getTrackById(r);if(!n)return;let a="disabled"===n.mode;a&&(n.mode="hidden"),i.forEach(e=>{var t;null!=(t=n.cues)&&t.getCueById(e.id)||n.addCue(e)}),a&&(n.mode="disabled")}),t.once(gB.Events.DESTROYING,()=>{e.textTracks.removeEventListener("change",r),e.querySelectorAll("track[data-removeondestroy]").forEach(e=>{e.remove()})});let i=()=>{Array.from(e.textTracks).forEach(t=>{var r,i;if(!["subtitles","caption"].includes(t.kind)&&"thumbnails"===t.label){if(!(null!=(r=t.cues)&&r.length)){let t=e.querySelector('track[label="thumbnails"]'),r=null!=(i=null==t?void 0:t.getAttribute("src"))?i:"";null==t||t.removeAttribute("src"),setTimeout(()=>{null==t||t.setAttribute("src",r)},0)}"hidden"!==t.mode&&(t.mode="hidden")}})};t.once(gB.Events.MANIFEST_LOADED,i),t.once(gB.Events.MEDIA_ATTACHED,i)}(t,r),r.attachMedia(t)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function v9(e){var t;let r=e.target,i=null==(t=vI.get(r))?void 0:t.startTime;if(i&&function(e,t,r){t&&r>t&&(r=t);for(let t=0;t<e.length;t++)if(e.start(t)<=r&&e.end(t)>=r)return!0;return!1}(r.seekable,r.duration,i)){let e="auto"===r.preload;e&&(r.preload="none"),r.currentTime=i,e&&(r.preload="auto")}}async function v7(e){if(!e.isTrusted)return;e.stopImmediatePropagation();let t=e.target;if(!(null!=t&&t.error))return;let{message:r,code:i}=t.error,n=new gj(r,i);if(t.src&&(i!==gj.MEDIA_ERR_DECODE||void 0!==i))try{let{status:e}=await fetch(t.src);n.data={response:{code:e}}}catch{}t.dispatchEvent(new CustomEvent("error",{detail:n}))}function ye(e){var t,r;if(!(e instanceof CustomEvent)||!(e.detail instanceof gj))return;let i=e.target,n=e.detail;n&&n.fatal&&((null!=(t=vI.get(i))?t:{}).error=n,null==(r=i.mux)||r.emit("error",{player_error_code:n.code,player_error_message:n.message,player_error_context:n.context}))}var yt=(...e)=>{let t=(0,d.useRef)(null);return(0,d.useEffect)(()=>{e.forEach(e=>{e&&("function"==typeof e?e(t.current):e.current=t.current)})},[e]),t},yr=(()=>{try{return"0.11.4"}catch{}return"UNKNOWN"})(),yi=d.forwardRef((e,t)=>{var r;let{playbackId:i,src:n,children:a,autoPlay:s,preload:o,...l}=e,u=Object.fromEntries(Object.entries(l).filter(([e])=>!Object.keys(yi.propTypes).includes(e))),[c]=(0,d.useState)(vO()),[h,f]=(0,d.useState)(null!=(r=vM(e))?r:n),p=(0,d.useRef)(void 0),m=yt((0,d.useRef)(null),t);return(0,d.useEffect)(()=>{var t;f(null!=(t=vM(e))?t:n)},[n,i]),(0,d.useEffect)(()=>{let t={...e,src:h,playerInitTime:c,playerSoftwareName:"mux-video-react",playerSoftwareVersion:yr,autoplay:s},r=m.current;return r&&(p.current=vz(t,r,p.current)),()=>{vY(r,p.current),r=void 0,p.current=void 0}},[h]),(0,d.useEffect)(()=>{var e;null==(e=p.current)||e.setAutoplay(s)},[s]),(0,d.useEffect)(()=>{var e;null==(e=p.current)||e.setPreload(o)},[o]),d.createElement("video",{ref:m,...u},a)});yi.propTypes={_hlsConfig:dn.any,beaconCollectionDomain:dn.string,customDomain:dn.string,debug:dn.bool,disableCookies:dn.bool,disableTracking:dn.bool,envKey:dn.string,errorTranslator:dn.any,liveEdgeStart:dn.number,maxResolution:dn.oneOf(["720p","1080p","1440p","2160p"]),metadata:dn.any,minResolution:dn.oneOf(["480p","540p","720p","1080p","1440p","2160p"]),playbackId:dn.string,playerInitTime:dn.number,preferCmcd:dn.oneOf(Object.values(gV)),preferPlayback:dn.oneOf(Object.values(gK)),programStartTime:dn.number,programEndTime:dn.number,renditionOrder:dn.oneOf(["desc"]),startTime:dn.number,streamType:dn.oneOf(Object.values(gH)),targetLiveWindow:dn.number,tokens:dn.any,type:dn.oneOf(gY)};let yn=({t:e,setIsHalfPageModalOpen:t})=>(0,l.jsxs)("section",{className:"relative w-full py-12 md:py-24 lg:py-32 xl:py-48 bg-gradient-to-r from-[#e6f3f3] to-[#f0f8f8]",children:[l.jsx(yi,{style:{height:"100%",maxWidth:"100%"},playbackId:"spiirAKtzZ7TGB01MH8JSz8i101bjm2kU3","stream-type":"on-demand",loop:!0,autoPlay:"muted",muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-100 to-pink-100 opacity-60"}),l.jsx("div",{className:"container relative z-10 px-4 md:px-6",children:l.jsx("div",{className:"flex flex-col items-center space-y-4 text-center",children:(0,l.jsxs)(iG,{children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl lg:text-6xl/none text-white",children:e.hero.title}),l.jsx("p",{className:"mx-auto max-w-[700px] text-white md:text-xl",children:e.hero.subtitle}),(0,l.jsxs)("div",{className:"space-x-4",children:[(0,l.jsxs)(lB,{children:[l.jsx(l$,{asChild:!0,children:l.jsx(em,{className:"bg-[#0d6c70] text-white hover:bg-[#0d6c70]/90",children:e.hero.cta1})}),l.jsx(di,{className:"sm:max-w-[425px]",children:l.jsx("iframe",{src:"https://patimota.typeform.com/to/XNQHJbgT?utm_source=eleva-care&utm_medium=website&utm_campaign=ongoing&utm_term=physical%2Btherapy&utm_content=temp_home_btn",width:"100%",height:"500px",frameBorder:"0"})})]}),l.jsx(em,{variant:"outline",className:"border-[#0d6c70] text-[#0d6c70] hover:bg-[#0d6c70] hover:text-white",onClick:()=>t(!0),children:e.hero.cta2})]})]})})})]}),ya={en:eR,pt:eL,es:ek};function ys(){let[e,t]=(0,d.useState)("en"),r=ya[e],[i,n]=(0,d.useState)(!1);return(0,l.jsxs)("div",{className:"flex flex-col min-h-screen bg-gradient-to-b from-white to-[#e6f3f3]",children:[l.jsx(lP,{t:r,setLang:e=>t(e)}),(0,l.jsxs)("main",{className:"flex-1 pt-16",children:[l.jsx(yn,{t:r,setIsHalfPageModalOpen:n}),i&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"bg-white w-full max-w-2xl h-1/2 rounded-t-lg overflow-hidden flex flex-col",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-[#0d6c70]/10",children:[l.jsx("h2",{className:"text-xl font-bold text-[#0d6c70]",children:r.hero.cta2}),l.jsx(em,{variant:"ghost",size:"icon",onClick:()=>n(!1),children:l.jsx(eC,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"flex-1 overflow-auto",children:l.jsx("iframe",{src:"https://cal.com/patimota/consulta-de-fisioterapia",width:"100%",height:"100%",frameBorder:"0"})})]})}),l.jsx(iG,{children:l.jsx("section",{className:"w-full py-12 md:py-24 lg:py-32 bg-[#f0f8f8]",children:l.jsx("div",{className:"container px-4 md:px-6",children:(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2 items-center",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tighter sm:text-4xl text-[#0d6c70]",children:r.podcast.title}),l.jsx("p",{className:"text-[#576d69] md:text-lg",children:r.podcast.description}),l.jsx(em,{className:"bg-[#0d6c70] text-white hover:bg-[#0d6c70]/90",asChild:!0,children:(0,l.jsxs)(eq(),{href:"https://podcasters.spotify.com/pod/show/elevacare",target:"_blank",rel:"noopener noreferrer",children:[l.jsx(eP,{className:"mr-2 h-4 w-4"}),r.podcast.cta]})})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx(e$(),{src:"/img/Elevating-Women-Health-Podcast.png",alt:"Eleva Care Podcast",width:300,height:300,className:"rounded-lg shadow-lg"})})]})})})}),l.jsx(iG,{children:l.jsx("section",{id:"services",className:"w-full py-12 md:py-24 lg:py-32 bg-white",children:(0,l.jsxs)("div",{className:"container px-4 md:px-6",children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl text-center mb-4 text-[#0d6c70]",children:r.services.title}),l.jsx("p",{className:"text-xl text-center mb-8 text-[#576d69]",children:r.services.subtitle}),l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.services.items.map((e,t)=>(0,l.jsxs)(eD,{className:"bg-white border-[#0d6c70]/10 overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:[l.jsx(e$(),{src:e.image,alt:e.title,width:300,height:200,className:"w-full h-48 object-cover"}),(0,l.jsxs)(eI,{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[e.icon,l.jsx("h3",{className:"text-xl font-bold ml-4 text-[#0d6c70]",children:e.title})]}),l.jsx("p",{className:"text-[#576d69]",children:e.description})]})]},t))})]})})}),l.jsx(iG,{children:l.jsx("section",{id:"approach",className:"w-full py-12 md:py-24 lg:py-32 bg-[#f0f8f8]",children:(0,l.jsxs)("div",{className:"container px-4 md:px-6",children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl text-center mb-8 text-[#0d6c70]",children:r.approach.title}),l.jsx("p",{className:"text-xl text-center max-w-[800px] mx-auto text-[#576d69]",children:r.approach.description})]})})}),l.jsx(iG,{children:l.jsx("section",{id:"mission",className:"w-full py-12 md:py-24 lg:py-32 bg-white",children:(0,l.jsxs)("div",{className:"container px-4 md:px-6",children:[(0,l.jsxs)("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl text-[#0d6c70]",children:r.mission.title}),l.jsx("p",{className:"mt-4 text-xl text-[#576d69]",children:r.mission.subtitle})]}),(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2 items-center",children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-xl mb-6 text-[#576d69]",children:r.mission.description}),l.jsx("h3",{className:"text-2xl font-bold mb-2 text-[#0d6c70]",children:r.mission.vision.title}),l.jsx("p",{className:"text-xl mb-6 text-[#576d69]",children:r.mission.vision.description}),(0,l.jsxs)("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-xl font-bold mb-2 text-[#0d6c70]",children:r.mission.beliefs.title}),l.jsx("ul",{className:"list-disc list-inside text-[#576d69]",children:r.mission.beliefs.items.map((e,t)=>(0,l.jsxs)("li",{className:"flex items-center",children:[l.jsx(eO,{className:"mr-2 h-4 w-4 text-[#1999e]"}),e]},t))})]}),(0,l.jsxs)(em,{className:"mt-4 bg-[#0d6c70] text-white hover:bg-[#0d6c70]/90",children:[r.mission.cta,l.jsx(eO,{className:"ml-2 h-4 w-4"})]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.mission.stats.map((e,t)=>(0,l.jsxs)("div",{className:"bg-[#f0f8f8] p-6 rounded-lg text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-[#0d6c70]",children:e.value}),l.jsx("div",{className:"text-[#576d69]",children:e.label})]},t))})]})]})})}),l.jsx(iG,{children:l.jsx("section",{id:"team",className:"w-full py-12 md:py-24 lg:py-32 bg-[#f0f8f8]",children:(0,l.jsxs)("div",{className:"container px-4 md:px-6",children:[(0,l.jsxs)("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl text-[#0d6c70]",children:r.team.title}),l.jsx("p",{className:"mt-4 text-xl text-[#576d69]",children:r.team.subtitle})]}),l.jsx("p",{className:"text-center text-xl mb-12 text-[#576d69]",children:r.team.description}),l.jsx("div",{className:"embla",children:(0,l.jsxs)(ng,{className:"w-full max-w-xs sm:max-w-sm md:max-w-lg lg:max-w-4xl xl:max-w-5xl mx-auto",children:[l.jsx(nv,{children:r.team.members.map((e,t)=>l.jsx(ny,{className:"md:basis-1/2 lg:basis-1/3",children:l.jsx("div",{className:"p-1",children:l.jsx(eD,{className:"bg-background border-border",children:(0,l.jsxs)(eI,{className:"flex flex-col items-center p-6",children:[l.jsx(e$(),{src:e.image,alt:e.name,width:200,height:200,className:"rounded-full mb-4"}),l.jsx("h3",{className:"text-xl font-bold text-primary",children:e.name}),l.jsx("p",{className:"text-muted-foreground mb-4",children:e.role}),(0,l.jsxs)("p",{className:"text-center italic text-muted-foreground",children:['"',e.quote,'"']})]})})})},t))}),l.jsx(nb,{}),l.jsx(nE,{})]})})]})})}),l.jsx(iG,{children:l.jsx("section",{className:"w-full py-12 md:py-24 bg-white",children:l.jsx("div",{className:"container px-4 md:px-6",children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tighter sm:text-4xl text-[#0d6c70] mb-4",children:r.newsletter.title}),l.jsx("p",{className:"text-[#576d69] mb-8",children:r.newsletter.description}),(0,l.jsxs)("form",{action:"https://app.beehiiv.com/forms/YOUR_FORM_ID_HERE",method:"POST",className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[l.jsx(eH,{type:"email",name:"email",placeholder:r.newsletter.placeholder,required:!0,className:"flex-grow"}),l.jsx(em,{type:"submit",className:"bg-[#0d6c70] text-white hover:bg-[#0d6c70]/90",children:r.newsletter.cta})]}),l.jsx("p",{className:"text-xs text-[#576d69]",children:r.newsletter.privacy})]})]})})})}),l.jsx(iG,{children:l.jsx("section",{className:"w-full py-12 md:py-24 bg-[#f0f8f8]",children:(0,l.jsxs)("div",{className:"container px-4 md:px-6",children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tighter sm:text-4xl text-center mb-8 text-[#0d6c70]",children:r.social.title}),(0,l.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[l.jsx(em,{variant:"outline",className:"text-[#0d6c70] border-[#0d6c70] hover:bg-[#0d6c70] hover:text-white",asChild:!0,children:(0,l.jsxs)(eq(),{href:"https://www.linkedin.com/in/patimota/",target:"_blank",rel:"noopener noreferrer",children:[l.jsx(eN,{className:"mr-2 h-4 w-4"}),r.social.linkedin]})}),l.jsx(em,{variant:"outline",className:"text-[#0d6c70] border-[#0d6c70] hover:bg-[#0d6c70] hover:text-white",asChild:!0,children:(0,l.jsxs)(eq(),{href:"https://www.instagram.com/patricia_mota_pt_phd/",target:"_blank",rel:"noopener noreferrer",children:[l.jsx(eM,{className:"mr-2 h-4 w-4"}),r.social.instagram]})}),l.jsx(em,{variant:"outline",className:"text-[#0d6c70] border-[#0d6c70] hover:bg-[#0d6c70] hover:text-white",asChild:!0,children:(0,l.jsxs)(eq(),{href:"https://facebook.com/eleva.care",target:"_blank",rel:"noopener noreferrer",children:[l.jsx(eF,{className:"mr-2 h-4 w-4"}),r.social.facebook]})}),l.jsx(em,{variant:"outline",className:"text-[#0d6c70] border-[#0d6c70] hover:bg-[#0d6c70] hover:text-white",asChild:!0,children:(0,l.jsxs)(eq(),{href:"https://x.com/eleva.care",target:"_blank",rel:"noopener noreferrer",children:[l.jsx(eU,{className:"mr-2 h-4 w-4"}),r.social.twitter]})}),l.jsx(em,{variant:"outline",className:"text-[#0d6c70] border-[#0d6c70] hover:bg-[#0d6c70] hover:text-white",asChild:!0,children:(0,l.jsxs)(eq(),{href:"https://scholar.google.pt/citations?user=fNJsrScAAAAJ",target:"_blank",rel:"noopener noreferrer",children:[l.jsx(eB,{className:"mr-2 h-4 w-4"}),r.social.scholar]})})]})]})})})]}),(0,l.jsxs)("footer",{className:"flex flex-col gap-2 sm:flex-row py-6 w-full shrink-0 items-center px-4 md:px-6 border-t border-[#0d6c70]/10 bg-white",children:[l.jsx("p",{className:"text-xs text-[#576d69]",children:r.footer.copyright}),(0,l.jsxs)("nav",{className:"sm:ml-auto flex gap-4 sm:gap-6",children:[l.jsx(eq(),{className:"text-xs hover:underline underline-offset-4 text-[#576d69]",href:"#",children:r.footer.terms}),l.jsx(eq(),{className:"text-xs hover:underline underline-offset-4 text-[#576d69]",href:"#",children:r.footer.privacy})]})]})]})}},872:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return i}}),r(3861);let i=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9572:(e,t,r)=>{"use strict";function i(e,t,r,i){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return i}}),r(3861),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return b}});let i=r(9488),n=r(7178),a=r(9522),s=n._(r(1616)),o=i._(r(3625)),l=i._(r(5395)),d=r(9434),u=r(8305),c=r(1642);r(728);let h=r(3940),f=i._(r(7022)),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function m(e,t,r,i,n,a,s){let o=null==e?void 0:e.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&n(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let i=!1,n=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>i,isPropagationStopped:()=>n,persist:()=>{},preventDefault:()=>{i=!0,t.preventDefault()},stopPropagation:()=>{n=!0,t.stopPropagation()}})}(null==i?void 0:i.current)&&i.current(e)}}))}function g(e){return s.use?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let v=(0,s.forwardRef)((e,t)=>{let{src:r,srcSet:i,sizes:n,height:o,width:l,decoding:d,className:u,style:c,fetchPriority:h,placeholder:f,loading:p,unoptimized:v,fill:y,onLoadRef:b,onLoadingCompleteRef:E,setBlurComplete:T,setShowAltText:w,sizesInput:x,onLoad:S,onError:A,...R}=e;return(0,a.jsx)("img",{...R,...g(h),loading:p,width:l,height:o,decoding:d,"data-nimg":y?"fill":"1",className:u,style:c,sizes:n,srcSet:i,src:r,ref:(0,s.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(A&&(e.src=e.src),e.complete&&m(e,f,b,E,T,v,x))},[r,f,b,E,T,A,v,x,t]),onLoad:e=>{m(e.currentTarget,f,b,E,T,v,x)},onError:e=>{w(!0),"empty"!==f&&T(!0),A&&A(e)}})});function y(e){let{isAppRouter:t,imgAttributes:r}=e,i={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...g(r.fetchPriority)};return t&&o.default.preload?(o.default.preload(r.src,i),null):(0,a.jsx)(l.default,{children:(0,a.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...i},"__nimg-"+r.src+r.srcSet+r.sizes)})}let b=(0,s.forwardRef)((e,t)=>{let r=(0,s.useContext)(h.RouterContext),i=(0,s.useContext)(c.ImageConfigContext),n=(0,s.useMemo)(()=>{let e=p||i||u.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:r}},[i]),{onLoad:o,onLoadingComplete:l}=e,m=(0,s.useRef)(o);(0,s.useEffect)(()=>{m.current=o},[o]);let g=(0,s.useRef)(l);(0,s.useEffect)(()=>{g.current=l},[l]);let[b,E]=(0,s.useState)(!1),[T,w]=(0,s.useState)(!1),{props:x,meta:S}=(0,d.getImgProps)(e,{defaultLoader:f.default,imgConf:n,blurComplete:b,showAltText:T});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{...x,unoptimized:S.unoptimized,placeholder:S.placeholder,fill:S.fill,onLoadRef:m,onLoadingCompleteRef:g,setBlurComplete:E,setShowAltText:w,sizesInput:e.sizes,ref:t}),S.priority?(0,a.jsx)(y,{isAppRouter:!r,imgAttributes:x}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return y}});let i=r(9488),n=r(9522),a=i._(r(1616)),s=r(9883),o=r(518),l=r(7977),d=r(9428),u=r(872),c=r(3940),h=r(8797),f=r(4231),p=r(9572),m=r(9250),g=r(3007);function v(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}let y=a.default.forwardRef(function(e,t){let r,i;let{href:l,as:y,children:b,prefetch:E=null,passHref:T,replace:w,shallow:x,scroll:S,locale:A,onClick:R,onMouseEnter:L,onTouchStart:k,legacyBehavior:D=!1,...I}=e;r=b,D&&("string"==typeof r||"number"==typeof r)&&(r=(0,n.jsx)("a",{children:r}));let C=a.default.useContext(c.RouterContext),P=a.default.useContext(h.AppRouterContext),O=null!=C?C:P,N=!C,M=!1!==E,F=null===E?g.PrefetchKind.AUTO:g.PrefetchKind.FULL,{href:U,as:B}=a.default.useMemo(()=>{if(!C){let e=v(l);return{href:e,as:y?v(y):e}}let[e,t]=(0,s.resolveHref)(C,l,!0);return{href:e,as:y?(0,s.resolveHref)(C,y):t||e}},[C,l,y]),j=a.default.useRef(U),$=a.default.useRef(B);D&&(i=a.default.Children.only(r));let G=D?i&&"object"==typeof i&&i.ref:t,[q,H,K]=(0,f.useIntersection)({rootMargin:"200px"}),V=a.default.useCallback(e=>{($.current!==B||j.current!==U)&&(K(),$.current=B,j.current=U),q(e),G&&("function"==typeof G?G(e):"object"==typeof G&&(G.current=e))},[B,G,U,K,q]);a.default.useEffect(()=>{},[B,U,H,A,M,null==C?void 0:C.locale,O,N,F]);let W={ref:V,onClick(e){D||"function"!=typeof R||R(e),D&&i.props&&"function"==typeof i.props.onClick&&i.props.onClick(e),O&&!e.defaultPrevented&&function(e,t,r,i,n,s,l,d,u){let{nodeName:c}=e.currentTarget;if("A"===c.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!u&&!(0,o.isLocalURL)(r)))return;e.preventDefault();let h=()=>{let e=null==l||l;"beforePopState"in t?t[n?"replace":"push"](r,i,{shallow:s,locale:d,scroll:e}):t[n?"replace":"push"](i||r,{scroll:e})};u?a.default.startTransition(h):h()}(e,O,U,B,w,x,S,A,N)},onMouseEnter(e){D||"function"!=typeof L||L(e),D&&i.props&&"function"==typeof i.props.onMouseEnter&&i.props.onMouseEnter(e)},onTouchStart:function(e){D||"function"!=typeof k||k(e),D&&i.props&&"function"==typeof i.props.onTouchStart&&i.props.onTouchStart(e)}};if((0,d.isAbsoluteUrl)(B))W.href=B;else if(!D||T||"a"===i.type&&!("href"in i.props)){let e=void 0!==A?A:null==C?void 0:C.locale,t=(null==C?void 0:C.isLocaleDomain)&&(0,p.getDomainLocale)(B,e,null==C?void 0:C.locales,null==C?void 0:C.domainLocales);W.href=t||(0,m.addBasePath)((0,u.addLocale)(B,e,null==C?void 0:C.defaultLocale))}return D?a.default.cloneElement(i,W):(0,n.jsx)("a",{...I,...W,children:r})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3777:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cancelIdleCallback:function(){return i},requestIdleCallback:function(){return r}});let r="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},i="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return c}});let i=r(7715),n=r(7977),a=r(1545),s=r(9428),o=r(3861),l=r(518),d=r(5181),u=r(1117);function c(e,t,r){let c;let h="string"==typeof t?t:(0,n.formatWithValidation)(t),f=h.match(/^[a-zA-Z]{1,}:\/\//),p=f?h.slice(f[0].length):h;if((p.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+h+"' passed to next/router in page: '"+e.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let t=(0,s.normalizeRepeatedSlashes)(p);h=(f?f[0]:"")+t}if(!(0,l.isLocalURL)(h))return r?[h]:h;try{c=new URL(h.startsWith("#")?e.asPath:e.pathname,"http://n")}catch(e){c=new URL("/","http://n")}try{let e=new URL(h,c);e.pathname=(0,o.normalizePathTrailingSlash)(e.pathname);let t="";if((0,d.isDynamicRoute)(e.pathname)&&e.searchParams&&r){let r=(0,i.searchParamsToUrlQuery)(e.searchParams),{result:s,params:o}=(0,u.interpolateAs)(e.pathname,e.pathname,r);s&&(t=(0,n.formatWithValidation)({pathname:s,hash:e.hash,query:(0,a.omit)(r,o)}))}let s=e.origin===c.origin?e.href.slice(e.origin.length):e.href;return r?[s,t||s]:s}catch(e){return r?[h]:h}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let i=r(1616),n=r(3777),a="function"==typeof IntersectionObserver,s=new Map,o=[];function l(e){let{rootRef:t,rootMargin:r,disabled:l}=e,d=l||!a,[u,c]=(0,i.useState)(!1),h=(0,i.useRef)(null),f=(0,i.useCallback)(e=>{h.current=e},[]);return(0,i.useEffect)(()=>{if(a){if(d||u)return;let e=h.current;if(e&&e.tagName)return function(e,t,r){let{id:i,observer:n,elements:a}=function(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},i=o.find(e=>e.root===r.root&&e.margin===r.margin);if(i&&(t=s.get(i)))return t;let n=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=n.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:n},o.push(r),s.set(r,t),t}(r);return a.set(e,t),n.observe(e),function(){if(a.delete(e),n.unobserve(e),0===a.size){n.disconnect(),s.delete(i);let e=o.findIndex(e=>e.root===i.root&&e.margin===i.margin);e>-1&&o.splice(e,1)}}}(e,e=>e&&c(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!u){let e=(0,n.requestIdleCallback)(()=>c(!0));return()=>(0,n.cancelIdleCallback)(e)}},[d,r,t,u,h.current]),[f,u,(0,i.useCallback)(()=>{c(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3374:(e,t,r)=>{"use strict";e.exports=r(9947).vendored.contexts.AmpContext},8622:(e,t,r)=>{"use strict";e.exports=r(9947).vendored.contexts.HeadManagerContext},1642:(e,t,r)=>{"use strict";e.exports=r(9947).vendored.contexts.ImageConfigContext},3940:(e,t,r)=>{"use strict";e.exports=r(9947).vendored.contexts.RouterContext},1084:(e,t)=>{"use strict";function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:i=!1}=void 0===e?{}:e;return t||r&&i}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},2400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return n}});let r=/[|\\{}()[\]^$+*?.-]/,i=/[|\\{}()[\]^$+*?.-]/g;function n(e){return r.test(e)?e.replace(i,"\\$&"):e}},9434:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return o}}),r(728);let i=r(2635),n=r(8305);function a(e){return void 0!==e.default}function s(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function o(e,t){var r;let o,l,d,{src:u,sizes:c,unoptimized:h=!1,priority:f=!1,loading:p,className:m,quality:g,width:v,height:y,fill:b=!1,style:E,overrideSrc:T,onLoad:w,onLoadingComplete:x,placeholder:S="empty",blurDataURL:A,fetchPriority:R,layout:L,objectFit:k,objectPosition:D,lazyBoundary:I,lazyRoot:C,...P}=e,{imgConf:O,showAltText:N,blurComplete:M,defaultLoader:F}=t,U=O||n.imageConfigDefault;if("allSizes"in U)o=U;else{let e=[...U.deviceSizes,...U.imageSizes].sort((e,t)=>e-t),t=U.deviceSizes.sort((e,t)=>e-t);o={...U,allSizes:e,deviceSizes:t}}if(void 0===F)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let B=P.loader||F;delete P.loader,delete P.srcSet;let j="__next_img_default"in B;if(j){if("custom"===o.loader)throw Error('Image with src "'+u+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=B;B=t=>{let{config:r,...i}=t;return e(i)}}if(L){"fill"===L&&(b=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[L];e&&(E={...E,...e});let t={responsive:"100vw",fill:"100vw"}[L];t&&!c&&(c=t)}let $="",G=s(v),q=s(y);if("object"==typeof(r=u)&&(a(r)||void 0!==r.src)){let e=a(u)?u.default:u;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(l=e.blurWidth,d=e.blurHeight,A=A||e.blurDataURL,$=e.src,!b){if(G||q){if(G&&!q){let t=G/e.width;q=Math.round(e.height*t)}else if(!G&&q){let t=q/e.height;G=Math.round(e.width*t)}}else G=e.width,q=e.height}}let H=!f&&("lazy"===p||void 0===p);(!(u="string"==typeof u?u:$)||u.startsWith("data:")||u.startsWith("blob:"))&&(h=!0,H=!1),o.unoptimized&&(h=!0),j&&u.endsWith(".svg")&&!o.dangerouslyAllowSVG&&(h=!0),f&&(R="high");let K=s(g),V=Object.assign(b?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:k,objectPosition:D}:{},N?{}:{color:"transparent"},E),W=M||"empty"===S?null:"blur"===S?'url("data:image/svg+xml;charset=utf-8,'+(0,i.getImageBlurSvg)({widthInt:G,heightInt:q,blurWidth:l,blurHeight:d,blurDataURL:A||"",objectFit:V.objectFit})+'")':'url("'+S+'")',z=W?{backgroundSize:V.objectFit||"cover",backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:W}:{},Y=function(e){let{config:t,src:r,unoptimized:i,width:n,quality:a,sizes:s,loader:o}=e;if(i)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:d}=function(e,t,r){let{deviceSizes:i,allSizes:n}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let i;i=e.exec(r);i)t.push(parseInt(i[2]));if(t.length){let e=.01*Math.min(...t);return{widths:n.filter(t=>t>=i[0]*e),kind:"w"}}return{widths:n,kind:"w"}}return"number"!=typeof t?{widths:i,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>n.find(t=>t>=e)||n[n.length-1]))],kind:"x"}}(t,n,s),u=l.length-1;return{sizes:s||"w"!==d?s:"100vw",srcSet:l.map((e,i)=>o({config:t,src:r,quality:a,width:e})+" "+("w"===d?e:i+1)+d).join(", "),src:o({config:t,src:r,quality:a,width:l[u]})}}({config:o,src:u,unoptimized:h,width:G,quality:K,sizes:c,loader:B});return{props:{...P,loading:H?"lazy":p,fetchPriority:R,width:G,height:q,decoding:"async",className:m,style:{...V,...z},sizes:Y.sizes,srcSet:Y.srcSet,src:T||Y.src},meta:{unoptimized:h,priority:f,placeholder:S,fill:b}}}},5395:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return m},defaultHead:function(){return c}});let i=r(9488),n=r(7178),a=r(9522),s=n._(r(1616)),o=i._(r(3220)),l=r(3374),d=r(8622),u=r(1084);function c(e){void 0===e&&(e=!1);let t=[(0,a.jsx)("meta",{charSet:"utf-8"})];return e||t.push((0,a.jsx)("meta",{name:"viewport",content:"width=device-width"})),t}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===s.default.Fragment?e.concat(s.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(728);let f=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:r}=t;return e.reduce(h,[]).reverse().concat(c(r).reverse()).filter(function(){let e=new Set,t=new Set,r=new Set,i={};return n=>{let a=!0,s=!1;if(n.key&&"number"!=typeof n.key&&n.key.indexOf("$")>0){s=!0;let t=n.key.slice(n.key.indexOf("$")+1);e.has(t)?a=!1:e.add(t)}switch(n.type){case"title":case"base":t.has(n.type)?a=!1:t.add(n.type);break;case"meta":for(let e=0,t=f.length;e<t;e++){let t=f[e];if(n.props.hasOwnProperty(t)){if("charSet"===t)r.has(t)?a=!1:r.add(t);else{let e=n.props[t],r=i[t]||new Set;("name"!==t||!s)&&r.has(e)?a=!1:(r.add(e),i[t]=r)}}}}return a}}()).reverse().map((e,t)=>{let i=e.key||t;if(!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,s.default.cloneElement(e,t)}return s.default.cloneElement(e,{key:i})})}let m=function(e){let{children:t}=e,r=(0,s.useContext)(l.AmpStateContext),i=(0,s.useContext)(d.HeadManagerContext);return(0,a.jsx)(o.default,{reduceComponentsToState:p,headManager:i,inAmpMode:(0,u.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2635:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:i,blurHeight:n,blurDataURL:a,objectFit:s}=e,o=i?40*i:t,l=n?40*n:r,d=o&&l?"viewBox='0 0 "+o+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+d+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(d?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+a+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},8305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return i}});let r=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},1161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return o}});let i=r(9488),n=r(9434),a=r(5096),s=i._(r(7022));function o(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=a.Image},7022:(e,t)=>{"use strict";function r(e){let{config:t,src:r,width:i,quality:n}=e;return t.path+"?url="+encodeURIComponent(r)+"&w="+i+"&q="+(n||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}}),r.__next_img_default=!0;let i=r},7977:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{formatUrl:function(){return a},formatWithValidation:function(){return o},urlObjectKeys:function(){return s}});let i=r(7178)._(r(7715)),n=/https?|ftp|gopher|file/;function a(e){let{auth:t,hostname:r}=e,a=e.protocol||"",s=e.pathname||"",o=e.hash||"",l=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?"["+r+"]":r),e.port&&(d+=":"+e.port)),l&&"object"==typeof l&&(l=String(i.urlQueryToSearchParams(l)));let u=e.search||l&&"?"+l||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||n.test(a))&&!1!==d?(d="//"+(d||""),s&&"/"!==s[0]&&(s="/"+s)):d||(d=""),o&&"#"!==o[0]&&(o="#"+o),u&&"?"!==u[0]&&(u="?"+u),""+a+d+(s=s.replace(/[?#]/g,encodeURIComponent))+(u=u.replace("#","%23"))+o}let s=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function o(e){return a(e)}},5181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRoutes:function(){return i.getSortedRoutes},isDynamicRoute:function(){return n.isDynamicRoute}});let i=r(2175),n=r(2108)},1117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"interpolateAs",{enumerable:!0,get:function(){return a}});let i=r(4297),n=r(4622);function a(e,t,r){let a="",s=(0,n.getRouteRegex)(e),o=s.groups,l=(t!==e?(0,i.getRouteMatcher)(s)(t):"")||r;a=e;let d=Object.keys(o);return d.every(e=>{let t=l[e]||"",{repeat:r,optional:i}=o[e],n="["+(r?"...":"")+e+"]";return i&&(n=(t?"":"/")+"["+n+"]"),r&&!Array.isArray(t)&&(t=[t]),(i||e in l)&&(a=a.replace(n,r?t.map(e=>encodeURIComponent(e)).join("/"):encodeURIComponent(t))||"/")})||(a=""),{params:d,result:a}}},2108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return a}});let i=r(9516),n=/\/\[[^/]+?\](?=\/|$)/;function a(e){return(0,i.isInterceptionRouteAppPath)(e)&&(e=(0,i.extractInterceptionRouteInformation)(e).interceptedRoute),n.test(e)}},518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return a}});let i=r(9428),n=r(836);function a(e){if(!(0,i.isAbsoluteUrl)(e))return!0;try{let t=(0,i.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,n.hasBasePath)(r.pathname)}catch(e){return!1}}},1545:(e,t)=>{"use strict";function r(e,t){let r={};return Object.keys(e).forEach(i=>{t.includes(i)||(r[i]=e[i])}),r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"omit",{enumerable:!0,get:function(){return r}})},7715:(e,t)=>{"use strict";function r(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function i(e){return"string"!=typeof e&&("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function n(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,n]=e;Array.isArray(n)?n.forEach(e=>t.append(r,i(e))):t.set(r,i(n))}),t}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.forEach(t=>{Array.from(t.keys()).forEach(t=>e.delete(t)),t.forEach((t,r)=>e.append(r,t))}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return a},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return n}})},4297:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return n}});let i=r(9428);function n(e){let{re:t,groups:r}=e;return e=>{let n=t.exec(e);if(!n)return!1;let a=e=>{try{return decodeURIComponent(e)}catch(e){throw new i.DecodeError("failed to decode param")}},s={};return Object.keys(r).forEach(e=>{let t=r[e],i=n[t.pos];void 0!==i&&(s[e]=~i.indexOf("/")?i.split("/").map(e=>a(e)):t.repeat?[a(i)]:a(i))}),s}}},4622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getNamedMiddlewareRegex:function(){return h},getNamedRouteRegex:function(){return c},getRouteRegex:function(){return l}});let i=r(9516),n=r(2400),a=r(3955);function s(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function o(e){let t=(0,a.removeTrailingSlash)(e).slice(1).split("/"),r={},o=1;return{parameterizedRoute:t.map(e=>{let t=i.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t)),a=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&a){let{key:e,optional:i,repeat:l}=s(a[1]);return r[e]={pos:o++,repeat:l,optional:i},"/"+(0,n.escapeStringRegexp)(t)+"([^/]+?)"}if(!a)return"/"+(0,n.escapeStringRegexp)(e);{let{key:e,repeat:t,optional:i}=s(a[1]);return r[e]={pos:o++,repeat:t,optional:i},t?i?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}function l(e){let{parameterizedRoute:t,groups:r}=o(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function d(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:i,routeKeys:a,keyPrefix:o}=e,{key:l,optional:d,repeat:u}=s(i),c=l.replace(/\W/g,"");o&&(c=""+o+c);let h=!1;(0===c.length||c.length>30)&&(h=!0),isNaN(parseInt(c.slice(0,1)))||(h=!0),h&&(c=r()),o?a[c]=""+o+l:a[c]=l;let f=t?(0,n.escapeStringRegexp)(t):"";return u?d?"(?:/"+f+"(?<"+c+">.+?))?":"/"+f+"(?<"+c+">.+?)":"/"+f+"(?<"+c+">[^/]+?)"}function u(e,t){let r;let s=(0,a.removeTrailingSlash)(e).slice(1).split("/"),o=(r=0,()=>{let e="",t=++r;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),l={};return{namedParameterizedRoute:s.map(e=>{let r=i.INTERCEPTION_ROUTE_MARKERS.some(t=>e.startsWith(t)),a=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&a){let[r]=e.split(a[0]);return d({getSafeRouteKey:o,interceptionMarker:r,segment:a[1],routeKeys:l,keyPrefix:t?"nxtI":void 0})}return a?d({getSafeRouteKey:o,segment:a[1],routeKeys:l,keyPrefix:t?"nxtP":void 0}):"/"+(0,n.escapeStringRegexp)(e)}).join(""),routeKeys:l}}function c(e,t){let r=u(e,t);return{...l(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}function h(e,t){let{parameterizedRoute:r}=o(e),{catchAll:i=!0}=t;if("/"===r)return{namedRegex:"^/"+(i?".*":"")+"$"};let{namedParameterizedRoute:n}=u(e,!1);return{namedRegex:"^"+n+(i?"(?:(/.*)?)":"")+"$"}}},2175:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSortedRoutes",{enumerable:!0,get:function(){return i}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,i){if(0===e.length){this.placeholder=!1;return}if(i)throw Error("Catch-all must be the last part of the URL.");let n=e[0];if(n.startsWith("[")&&n.endsWith("]")){let r=n.slice(1,-1),s=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),s=!0),r.startsWith("...")&&(r=r.substring(3),i=!0),r.startsWith("[")||r.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+r+"').");if(r.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+r+"').");function a(e,r){if(null!==e&&e!==r)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach(e=>{if(e===r)throw Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===n.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')}),t.push(r)}if(i){if(s){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');a(this.optionalRestSlugName,r),this.optionalRestSlugName=r,n="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');a(this.restSlugName,r),this.restSlugName=r,n="[...]"}}else{if(s)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');a(this.slugName,r),this.slugName=r,n="[]"}}this.children.has(n)||this.children.set(n,new r),this.children.get(n)._insert(e.slice(1),t,i)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function i(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}},3220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let i=r(1616),n=()=>{},a=()=>{};function s(e){var t;let{headManager:r,reduceComponentsToState:s}=e;function o(){if(r&&r.mountedInstances){let t=i.Children.toArray(Array.from(r.mountedInstances).filter(Boolean));r.updateHead(s(t,e))}}return null==r||null==(t=r.mountedInstances)||t.add(e.children),o(),n(()=>{var t;return null==r||null==(t=r.mountedInstances)||t.add(e.children),()=>{var t;null==r||null==(t=r.mountedInstances)||t.delete(e.children)}}),n(()=>(r&&(r._pendingUpdate=o),()=>{r&&(r._pendingUpdate=o)})),a(()=>(r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null),()=>{r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null)})),null}},9428:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return p},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return v},NormalizeError:function(){return m},PageNotFoundError:function(){return g},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return r},execOnce:function(){return i},getDisplayName:function(){return l},getLocationOrigin:function(){return s},getURL:function(){return o},isAbsoluteUrl:function(){return a},isResSent:function(){return d},loadGetInitialProps:function(){return c},normalizeRepeatedSlashes:function(){return u},stringifyError:function(){return b}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return function(){for(var i=arguments.length,n=Array(i),a=0;a<i;a++)n[a]=arguments[a];return r||(r=!0,t=e(...n)),t}}let n=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,a=e=>n.test(e);function s(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function o(){let{href:e}=window.location,t=s();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function d(e){return e.finished||e.headersSent}function u(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function c(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await c(t.Component,t.ctx)}:{};let i=await e.getInitialProps(t);if(r&&d(r))return i;if(!i)throw Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+i+'" instead.');return i}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class m extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class v extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},7476:(e,t,r)=>{"use strict";var i=r(1404);function n(){}function a(){}a.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,a,s){if(s!==i){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:n};return r.PropTypes=r,r}},8842:(e,t,r)=>{e.exports=r(7476)()},1404:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1550:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>d});var i=r(2375),n=r(7817),a=r.n(n),s=r(8338),o=r.n(s);r(4926);var l=r(3583);let d={title:"Expert care for Pregnancy, Postpartum & Sexual Health | Eleva Care",description:"Eleva Care: Empowering growth, embracing care. Expert care for pregnancy, postpartum, menopause, and sexual health.",openGraph:{type:"website",url:"https://eleva.care",siteName:"Eleva Care",title:"Expert care for Pregnancy, Postpartum & Sexual Health | Eleva Care",description:"Eleva Care: Empowering growth, embracing care. Expert care for pregnancy, postpartum, menopause, and sexual health.",images:[{url:"https://eleva.care/img/eleva-care-share.svg",width:1200,height:680,alt:"Eleva Care"}]}};function u({children:e}){return i.jsx("html",{lang:"en",children:(0,i.jsxs)("body",{className:`${a().variable} ${o().variable} antialiased`,children:[e,i.jsx(l.c,{})]})})}},8530:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(2375);let n=(0,r(6828).createProxy)(String.raw`/Users/rodrigo.barona/Documents/GitHub/eleva-care/components/landing-page.tsx#default`);function a(){return i.jsx(n,{})}},7602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION:function(){return i},FLIGHT_PARAMETERS:function(){return l},NEXT_DID_POSTPONE_HEADER:function(){return u},NEXT_ROUTER_PREFETCH_HEADER:function(){return a},NEXT_ROUTER_STATE_TREE:function(){return n},NEXT_RSC_UNION_QUERY:function(){return d},NEXT_URL:function(){return s},RSC_CONTENT_TYPE_HEADER:function(){return o},RSC_HEADER:function(){return r}});let r="RSC",i="Next-Action",n="Next-Router-State-Tree",a="Next-Router-Prefetch",s="Next-Url",o="text/x-component",l=[[r],[n],[a]],d="_rsc",u="x-nextjs-postponed";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7486:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var n={},a=t.split(i),s=(r||{}).decode||e,o=0;o<a.length;o++){var l=a[o],d=l.indexOf("=");if(!(d<0)){var u=l.substr(0,d).trim(),c=l.substr(++d,l.length).trim();'"'==c[0]&&(c=c.slice(1,-1)),void 0==n[u]&&(n[u]=function(e,t){try{return t(e)}catch(t){return e}}(c,s))}}return n},t.serialize=function(e,t,i){var a=i||{},s=a.encode||r;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var o=s(t);if(o&&!n.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=a.maxAge){var d=a.maxAge-0;if(isNaN(d)||!isFinite(d))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(d)}if(a.domain){if(!n.test(a.domain))throw TypeError("option domain is invalid");l+="; Domain="+a.domain}if(a.path){if(!n.test(a.path))throw TypeError("option path is invalid");l+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(l+="; HttpOnly"),a.secure&&(l+="; Secure"),a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var e=decodeURIComponent,r=encodeURIComponent,i=/; */,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},1164:(e,t)=>{"use strict";function r(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var i=e[r];if("*"===i||"+"===i||"?"===i){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===i){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===i){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===i){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===i){for(var n="",a=r+1;a<e.length;){var s=e.charCodeAt(a);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s){n+=e[a++];continue}break}if(!n)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:n}),r=a;continue}if("("===i){var o=1,l="",a=r+1;if("?"===e[a])throw TypeError('Pattern cannot start with "?" at '+a);for(;a<e.length;){if("\\"===e[a]){l+=e[a++]+e[a++];continue}if(")"===e[a]){if(0==--o){a++;break}}else if("("===e[a]&&(o++,"?"!==e[a+1]))throw TypeError("Capturing groups are not allowed at "+a);l+=e[a++]}if(o)throw TypeError("Unbalanced pattern at "+r);if(!l)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:l}),r=a;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),i=t.prefixes,n=void 0===i?"./":i,s="[^"+a(t.delimiter||"/#?")+"]+?",o=[],l=0,d=0,u="",c=function(e){if(d<r.length&&r[d].type===e)return r[d++].value},h=function(e){var t=c(e);if(void 0!==t)return t;var i=r[d];throw TypeError("Unexpected "+i.type+" at "+i.index+", expected "+e)},f=function(){for(var e,t="";e=c("CHAR")||c("ESCAPED_CHAR");)t+=e;return t};d<r.length;){var p=c("CHAR"),m=c("NAME"),g=c("PATTERN");if(m||g){var v=p||"";-1===n.indexOf(v)&&(u+=v,v=""),u&&(o.push(u),u=""),o.push({name:m||l++,prefix:v,suffix:"",pattern:g||s,modifier:c("MODIFIER")||""});continue}var y=p||c("ESCAPED_CHAR");if(y){u+=y;continue}if(u&&(o.push(u),u=""),c("OPEN")){var v=f(),b=c("NAME")||"",E=c("PATTERN")||"",T=f();h("CLOSE"),o.push({name:b||(E?l++:""),pattern:b&&!E?s:E,prefix:v,suffix:T,modifier:c("MODIFIER")||""});continue}h("END")}return o}function i(e,t){void 0===t&&(t={});var r=s(t),i=t.encode,n=void 0===i?function(e){return e}:i,a=t.validate,o=void 0===a||a,l=e.map(function(e){if("object"==typeof e)return RegExp("^(?:"+e.pattern+")$",r)});return function(t){for(var r="",i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){r+=a;continue}var s=t?t[a.name]:void 0,d="?"===a.modifier||"*"===a.modifier,u="*"===a.modifier||"+"===a.modifier;if(Array.isArray(s)){if(!u)throw TypeError('Expected "'+a.name+'" to not repeat, but got an array');if(0===s.length){if(d)continue;throw TypeError('Expected "'+a.name+'" to not be empty')}for(var c=0;c<s.length;c++){var h=n(s[c],a);if(o&&!l[i].test(h))throw TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but got "'+h+'"');r+=a.prefix+h+a.suffix}continue}if("string"==typeof s||"number"==typeof s){var h=n(String(s),a);if(o&&!l[i].test(h))throw TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+h+'"');r+=a.prefix+h+a.suffix;continue}if(!d){var f=u?"an array":"a string";throw TypeError('Expected "'+a.name+'" to be '+f)}}return r}}function n(e,t,r){void 0===r&&(r={});var i=r.decode,n=void 0===i?function(e){return e}:i;return function(r){var i=e.exec(r);if(!i)return!1;for(var a=i[0],s=i.index,o=Object.create(null),l=1;l<i.length;l++)!function(e){if(void 0!==i[e]){var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=i[e].split(r.prefix+r.suffix).map(function(e){return n(e,r)}):o[r.name]=n(i[e],r)}}(l);return{path:a,index:s,params:o}}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function s(e){return e&&e.sensitive?"":"i"}function o(e,t,r){void 0===r&&(r={});for(var i=r.strict,n=void 0!==i&&i,o=r.start,l=r.end,d=r.encode,u=void 0===d?function(e){return e}:d,c="["+a(r.endsWith||"")+"]|$",h="["+a(r.delimiter||"/#?")+"]",f=void 0===o||o?"^":"",p=0;p<e.length;p++){var m=e[p];if("string"==typeof m)f+=a(u(m));else{var g=a(u(m.prefix)),v=a(u(m.suffix));if(m.pattern){if(t&&t.push(m),g||v){if("+"===m.modifier||"*"===m.modifier){var y="*"===m.modifier?"?":"";f+="(?:"+g+"((?:"+m.pattern+")(?:"+v+g+"(?:"+m.pattern+"))*)"+v+")"+y}else f+="(?:"+g+"("+m.pattern+")"+v+")"+m.modifier}else f+="("+m.pattern+")"+m.modifier}else f+="(?:"+g+v+")"+m.modifier}}if(void 0===l||l)n||(f+=h+"?"),f+=r.endsWith?"(?="+c+")":"$";else{var b=e[e.length-1],E="string"==typeof b?h.indexOf(b[b.length-1])>-1:void 0===b;n||(f+="(?:"+h+"(?="+c+"))?"),E||(f+="(?="+h+"|"+c+")")}return new RegExp(f,s(r))}function l(e,t,i){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var i=0;i<r.length;i++)t.push({name:i,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?RegExp("(?:"+e.map(function(e){return l(e,t,i).source}).join("|")+")",s(i)):o(r(e,i),t,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=r,t.compile=function(e,t){return i(r(e,t),t)},t.tokensToFunction=i,t.match=function(e,t){var r=[];return n(l(e,r,t),r,t)},t.regexpToFunction=n,t.tokensToRegexp=o,t.pathToRegexp=l},4606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fillMetadataSegment:function(){return c},normalizeMetadataRoute:function(){return h}});let i=r(7777),n=function(e){return e&&e.__esModule?e:{default:e}}(r(7481)),a=r(2323),s=r(7527),o=r(4669),l=r(5922),d=r(5007);function u(e){let t="";return(e.includes("(")&&e.includes(")")||e.includes("@"))&&(t=(0,o.djb2Hash)(e).toString(36).slice(0,6)),t}function c(e,t,r){let i=(0,l.normalizeAppPath)(e),o=(0,s.getNamedRouteRegex)(i,!1),c=(0,a.interpolateDynamicPath)(i,t,o),h=u(e),f=h?`-${h}`:"",{name:p,ext:m}=n.default.parse(r);return(0,d.normalizePathSep)(n.default.join(c,`${p}${f}${m}`))}function h(e){if(!(0,i.isMetadataRoute)(e))return e;let t=e,r="";if("/robots"===e?t+=".txt":"/manifest"===e?t+=".webmanifest":e.endsWith("/sitemap")?t+=".xml":r=u(e.slice(0,-(n.default.basename(e).length+1))),!t.endsWith("/route")){let{dir:a,name:s,ext:o}=n.default.parse(t),l=(0,i.isStaticMetadataRoute)(e);t=n.default.posix.join(a,`${s}${r?`-${r}`:""}${o}`,l?"":"[[...__metadata_id__]]","route")}return t}},7777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{STATIC_METADATA_IMAGES:function(){return n},isMetadataRoute:function(){return u},isMetadataRouteFile:function(){return o},isStaticMetadataRoute:function(){return d},isStaticMetadataRouteFile:function(){return l}});let i=r(5007),n={icon:{filename:"icon",extensions:["ico","jpg","jpeg","png","svg"]},apple:{filename:"apple-icon",extensions:["jpg","jpeg","png"]},favicon:{filename:"favicon",extensions:["ico"]},openGraph:{filename:"opengraph-image",extensions:["jpg","jpeg","png","gif"]},twitter:{filename:"twitter-image",extensions:["jpg","jpeg","png","gif"]}},a=["js","jsx","ts","tsx"],s=e=>`(?:${e.join("|")})`;function o(e,t,r){let a=[RegExp(`^[\\\\/]robots${r?`\\.${s(t.concat("txt"))}$`:""}`),RegExp(`^[\\\\/]manifest${r?`\\.${s(t.concat("webmanifest","json"))}$`:""}`),RegExp("^[\\\\/]favicon\\.ico$"),RegExp(`[\\\\/]sitemap${r?`\\.${s(t.concat("xml"))}$`:""}`),RegExp(`[\\\\/]${n.icon.filename}\\d?${r?`\\.${s(t.concat(n.icon.extensions))}$`:""}`),RegExp(`[\\\\/]${n.apple.filename}\\d?${r?`\\.${s(t.concat(n.apple.extensions))}$`:""}`),RegExp(`[\\\\/]${n.openGraph.filename}\\d?${r?`\\.${s(t.concat(n.openGraph.extensions))}$`:""}`),RegExp(`[\\\\/]${n.twitter.filename}\\d?${r?`\\.${s(t.concat(n.twitter.extensions))}$`:""}`)],o=(0,i.normalizePathSep)(e);return a.some(e=>e.test(o))}function l(e){return o(e,[],!0)}function d(e){return"/robots"===e||"/manifest"===e||l(e)}function u(e){let t=e.replace(/^\/?app\//,"").replace(/\/route$/,"");return"/"!==t[0]&&(t="/"+t),!t.endsWith("/page")&&o(t,a,!1)}},9374:(e,t,r)=>{"use strict";function i(e){return function(){let{cookie:t}=e;if(!t)return{};let{parse:i}=r(7486);return i(Array.isArray(t)?t.join("; "):t)}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getCookieParser",{enumerable:!0,get:function(){return i}})},7903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return n},extractInterceptionRouteInformation:function(){return s},isInterceptionRouteAppPath:function(){return a}});let i=r(5922),n=["(..)(..)","(.)","(..)","(...)"];function a(e){return void 0!==e.split("/").find(e=>n.find(t=>e.startsWith(t)))}function s(e){let t,r,a;for(let i of e.split("/"))if(r=n.find(e=>i.startsWith(e))){[t,a]=e.split(r,2);break}if(!t||!r||!a)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,i.normalizeAppPath)(t),r){case"(.)":a="/"===t?`/${a}`:t+"/"+a;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);a=t.split("/").slice(0,-1).concat(a).join("/");break;case"(...)":a="/"+a;break;case"(..)(..)":let s=t.split("/");if(s.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);a=s.slice(0,-2).concat(a).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:a}}},2323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getUtils:function(){return m},interpolateDynamicPath:function(){return f},normalizeDynamicRouteParams:function(){return p},normalizeVercelUrl:function(){return h}});let i=r(7310),n=r(4105),a=r(312),s=r(7527),o=r(826),l=r(6061),d=r(3913),u=r(5922),c=r(6004);function h(e,t,r,n,a){if(n&&t&&a){let t=(0,i.parse)(e.url,!0);for(let e of(delete t.search,Object.keys(t.query)))(e!==c.NEXT_QUERY_PARAM_PREFIX&&e.startsWith(c.NEXT_QUERY_PARAM_PREFIX)||(r||Object.keys(a.groups)).includes(e))&&delete t.query[e];e.url=(0,i.format)(t)}}function f(e,t,r){if(!r)return e;for(let i of Object.keys(r.groups)){let{optional:n,repeat:a}=r.groups[i],s=`[${a?"...":""}${i}]`;n&&(s=`[${s}]`);let o=e.indexOf(s);if(o>-1){let r;let n=t[i];r=Array.isArray(n)?n.map(e=>e&&encodeURIComponent(e)).join("/"):n?encodeURIComponent(n):"",e=e.slice(0,o)+r+e.slice(o+s.length)}}return e}function p(e,t,r,i){let n=!0;return r?{params:e=Object.keys(r.groups).reduce((a,s)=>{let o=e[s];"string"==typeof o&&(o=(0,u.normalizeRscURL)(o)),Array.isArray(o)&&(o=o.map(e=>("string"==typeof e&&(e=(0,u.normalizeRscURL)(e)),e)));let l=i[s],d=r.groups[s].optional;return((Array.isArray(l)?l.some(e=>Array.isArray(o)?o.some(t=>t.includes(e)):null==o?void 0:o.includes(e)):null==o?void 0:o.includes(l))||void 0===o&&!(d&&t))&&(n=!1),d&&(!o||Array.isArray(o)&&1===o.length&&("index"===o[0]||o[0]===`[[...${s}]]`))&&(o=void 0,delete e[s]),o&&"string"==typeof o&&r.groups[s].repeat&&(o=o.split("/")),o&&(a[s]=o),a},{}),hasValidParams:n}:{params:e,hasValidParams:!1}}function m({page:e,i18n:t,basePath:r,rewrites:i,pageIsDynamic:u,trailingSlash:m,caseSensitive:g}){let v,y,b;return u&&(v=(0,s.getNamedRouteRegex)(e,!1),b=(y=(0,o.getRouteMatcher)(v))(e)),{handleRewrites:function(s,o){let c={},h=o.pathname,f=i=>{let d=(0,a.getPathMatch)(i.source+(m?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!g})(o.pathname);if((i.has||i.missing)&&d){let e=(0,l.matchHas)(s,o.query,i.has,i.missing);e?Object.assign(d,e):d=!1}if(d){let{parsedDestination:a,destQuery:s}=(0,l.prepareDestination)({appendParamsToQuery:!0,destination:i.destination,params:d,query:o.query});if(a.protocol)return!0;if(Object.assign(c,s,d),Object.assign(o.query,a.query),delete a.query,Object.assign(o,a),h=o.pathname,r&&(h=h.replace(RegExp(`^${r}`),"")||"/"),t){let e=(0,n.normalizeLocalePath)(h,t.locales);h=e.pathname,o.query.nextInternalLocale=e.detectedLocale||d.nextInternalLocale}if(h===e)return!0;if(u&&y){let e=y(h);if(e)return o.query={...o.query,...e},!0}}return!1};for(let e of i.beforeFiles||[])f(e);if(h!==e){let t=!1;for(let e of i.afterFiles||[])if(t=f(e))break;if(!t&&!(()=>{let t=(0,d.removeTrailingSlash)(h||"");return t===(0,d.removeTrailingSlash)(e)||(null==y?void 0:y(t))})()){for(let e of i.fallback||[])if(t=f(e))break}}return c},defaultRouteRegex:v,dynamicRouteMatcher:y,defaultRouteMatches:b,getParamsFromRouteMatches:function(e,r,i){return(0,o.getRouteMatcher)(function(){let{groups:e,routeKeys:n}=v;return{re:{exec:a=>{let s=Object.fromEntries(new URLSearchParams(a)),o=t&&i&&s["1"]===i;for(let e of Object.keys(s)){let t=s[e];e!==c.NEXT_QUERY_PARAM_PREFIX&&e.startsWith(c.NEXT_QUERY_PARAM_PREFIX)&&(s[e.substring(c.NEXT_QUERY_PARAM_PREFIX.length)]=t,delete s[e])}let l=Object.keys(n||{}),d=e=>{if(t){let n=Array.isArray(e),a=n?e[0]:e;if("string"==typeof a&&t.locales.some(e=>e.toLowerCase()===a.toLowerCase()&&(i=e,r.locale=i,!0)))return n&&e.splice(0,1),!n||0===e.length}return!1};return l.every(e=>s[e])?l.reduce((t,r)=>{let i=null==n?void 0:n[r];return i&&!d(s[r])&&(t[e[i].pos]=s[r]),t},{}):Object.keys(s).reduce((e,t)=>{if(!d(s[t])){let r=t;return o&&(r=parseInt(t,10)-1+""),Object.assign(e,{[r]:s[t]})}return e},{})}},groups:e}}())(e.headers["x-now-route-matches"])},normalizeDynamicRouteParams:(e,t)=>p(e,t,v,b),normalizeVercelUrl:(e,t,r)=>h(e,t,r,u,v),interpolateDynamicPath:(e,t)=>f(e,t,v)}}},1735:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return n}});let r=/[|\\{}()[\]^$+*?.-]/,i=/[|\\{}()[\]^$+*?.-]/g;function n(e){return r.test(e)?e.replace(i,"\\$&"):e}},4669:(e,t)=>{"use strict";function r(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)&4294967295;return t>>>0}function i(e){return r(e).toString(36).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{djb2Hash:function(){return r},hexHash:function(){return i}})},4105:(e,t)=>{"use strict";function r(e,t){let r;let i=e.split("/");return(t||[]).some(t=>!!i[1]&&i[1].toLowerCase()===t.toLowerCase()&&(r=t,i.splice(1,1),e=i.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return r}})},7481:(e,t,r)=>{"use strict";let i;i=r(1017),e.exports=i},3956:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},5007:(e,t)=>{"use strict";function r(e){return e.replace(/\\/g,"/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathSep",{enumerable:!0,get:function(){return r}})},5922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return a},normalizeRscURL:function(){return s}});let i=r(3956),n=r(6145);function a(e){return(0,i.ensureLeadingSlash)(e.split("/").reduce((e,t,r,i)=>!t||(0,n.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===i.length-1?e:e+"/"+t,""))}function s(e){return e.replace(/\.rsc($|\?)/,"$1")}},8707:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseRelativeUrl",{enumerable:!0,get:function(){return n}}),r(9218);let i=r(9200);function n(e,t){let r=new URL("http://n"),n=t?new URL(t,r):e.startsWith(".")?new URL("http://n"):r,{pathname:a,searchParams:s,search:o,hash:l,href:d,origin:u}=new URL(e,n);if(u!==r.origin)throw Error("invariant: invalid relative URL, router received "+e);return{pathname:a,query:(0,i.searchParamsToUrlQuery)(s),search:o,hash:l,href:d.slice(r.origin.length)}}},4303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return a}});let i=r(9200),n=r(8707);function a(e){if(e.startsWith("/"))return(0,n.parseRelativeUrl)(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:(0,i.searchParamsToUrlQuery)(t.searchParams),search:t.search}}},312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getPathMatch",{enumerable:!0,get:function(){return n}});let i=r(1164);function n(e,t){let r=[],n=(0,i.pathToRegexp)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),a=(0,i.regexpToFunction)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(n.source),n.flags):n,r);return(e,i)=>{if("string"!=typeof e)return!1;let n=a(e);if(!n)return!1;if(null==t?void 0:t.removeUnnamedParams)for(let e of r)"number"==typeof e.name&&delete n.params[e.name];return{...i,...n.params}}}},6061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{compileNonPath:function(){return c},matchHas:function(){return u},prepareDestination:function(){return h}});let i=r(1164),n=r(1735),a=r(4303),s=r(7903),o=r(7602),l=r(9374);function d(e){return e.replace(/__ESC_COLON_/gi,":")}function u(e,t,r,i){void 0===r&&(r=[]),void 0===i&&(i=[]);let n={},a=r=>{let i;let a=r.key;switch(r.type){case"header":a=a.toLowerCase(),i=e.headers[a];break;case"cookie":i="cookies"in e?e.cookies[r.key]:(0,l.getCookieParser)(e.headers)()[r.key];break;case"query":i=t[a];break;case"host":{let{host:t}=(null==e?void 0:e.headers)||{};i=null==t?void 0:t.split(":",1)[0].toLowerCase()}}if(!r.value&&i)return n[function(e){let t="";for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);(i>64&&i<91||i>96&&i<123)&&(t+=e[r])}return t}(a)]=i,!0;if(i){let e=RegExp("^"+r.value+"$"),t=Array.isArray(i)?i.slice(-1)[0].match(e):i.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{n[e]=t.groups[e]}):"host"===r.type&&t[0]&&(n.host=t[0])),!0}return!1};return!!r.every(e=>a(e))&&!i.some(e=>a(e))&&n}function c(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,i.compile)("/"+e,{validate:!1})(t).slice(1)}function h(e){let t;let r=Object.assign({},e.query);delete r.__nextLocale,delete r.__nextDefaultLocale,delete r.__nextDataReq,delete r.__nextInferredLocaleFromDefault,delete r[o.NEXT_RSC_UNION_QUERY];let l=e.destination;for(let t of Object.keys({...e.params,...r}))l=l.replace(RegExp(":"+(0,n.escapeStringRegexp)(t),"g"),"__ESC_COLON_"+t);let u=(0,a.parseUrl)(l),h=u.query,f=d(""+u.pathname+(u.hash||"")),p=d(u.hostname||""),m=[],g=[];(0,i.pathToRegexp)(f,m),(0,i.pathToRegexp)(p,g);let v=[];m.forEach(e=>v.push(e.name)),g.forEach(e=>v.push(e.name));let y=(0,i.compile)(f,{validate:!1}),b=(0,i.compile)(p,{validate:!1});for(let[t,r]of Object.entries(h))Array.isArray(r)?h[t]=r.map(t=>c(d(t),e.params)):"string"==typeof r&&(h[t]=c(d(r),e.params));let E=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!E.some(e=>v.includes(e)))for(let t of E)t in h||(h[t]=e.params[t]);if((0,s.isInterceptionRouteAppPath)(f))for(let t of f.split("/")){let r=s.INTERCEPTION_ROUTE_MARKERS.find(e=>t.startsWith(e));if(r){e.params["0"]=r;break}}try{let[r,i]=(t=y(e.params)).split("#",2);u.hostname=b(e.params),u.pathname=r,u.hash=(i?"#":"")+(i||""),delete u.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match");throw e}return u.query={...r,...u.query},{newUrl:t,destQuery:h,parsedDestination:u}}},9200:(e,t)=>{"use strict";function r(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function i(e){return"string"!=typeof e&&("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function n(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,n]=e;Array.isArray(n)?n.forEach(e=>t.append(r,i(e))):t.set(r,i(n))}),t}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.forEach(t=>{Array.from(t.keys()).forEach(t=>e.delete(t)),t.forEach((t,r)=>e.append(r,t))}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return a},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return n}})},3913:(e,t)=>{"use strict";function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})},826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return n}});let i=r(9218);function n(e){let{re:t,groups:r}=e;return e=>{let n=t.exec(e);if(!n)return!1;let a=e=>{try{return decodeURIComponent(e)}catch(e){throw new i.DecodeError("failed to decode param")}},s={};return Object.keys(r).forEach(e=>{let t=r[e],i=n[t.pos];void 0!==i&&(s[e]=~i.indexOf("/")?i.split("/").map(e=>a(e)):t.repeat?[a(i)]:a(i))}),s}}},7527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getNamedMiddlewareRegex:function(){return h},getNamedRouteRegex:function(){return c},getRouteRegex:function(){return l}});let i=r(7903),n=r(1735),a=r(3913);function s(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function o(e){let t=(0,a.removeTrailingSlash)(e).slice(1).split("/"),r={},o=1;return{parameterizedRoute:t.map(e=>{let t=i.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t)),a=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&a){let{key:e,optional:i,repeat:l}=s(a[1]);return r[e]={pos:o++,repeat:l,optional:i},"/"+(0,n.escapeStringRegexp)(t)+"([^/]+?)"}if(!a)return"/"+(0,n.escapeStringRegexp)(e);{let{key:e,repeat:t,optional:i}=s(a[1]);return r[e]={pos:o++,repeat:t,optional:i},t?i?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}function l(e){let{parameterizedRoute:t,groups:r}=o(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function d(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:i,routeKeys:a,keyPrefix:o}=e,{key:l,optional:d,repeat:u}=s(i),c=l.replace(/\W/g,"");o&&(c=""+o+c);let h=!1;(0===c.length||c.length>30)&&(h=!0),isNaN(parseInt(c.slice(0,1)))||(h=!0),h&&(c=r()),o?a[c]=""+o+l:a[c]=l;let f=t?(0,n.escapeStringRegexp)(t):"";return u?d?"(?:/"+f+"(?<"+c+">.+?))?":"/"+f+"(?<"+c+">.+?)":"/"+f+"(?<"+c+">[^/]+?)"}function u(e,t){let r;let s=(0,a.removeTrailingSlash)(e).slice(1).split("/"),o=(r=0,()=>{let e="",t=++r;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),l={};return{namedParameterizedRoute:s.map(e=>{let r=i.INTERCEPTION_ROUTE_MARKERS.some(t=>e.startsWith(t)),a=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&a){let[r]=e.split(a[0]);return d({getSafeRouteKey:o,interceptionMarker:r,segment:a[1],routeKeys:l,keyPrefix:t?"nxtI":void 0})}return a?d({getSafeRouteKey:o,segment:a[1],routeKeys:l,keyPrefix:t?"nxtP":void 0}):"/"+(0,n.escapeStringRegexp)(e)}).join(""),routeKeys:l}}function c(e,t){let r=u(e,t);return{...l(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}function h(e,t){let{parameterizedRoute:r}=o(e),{catchAll:i=!0}=t;if("/"===r)return{namedRegex:"^/"+(i?".*":"")+"$"};let{namedParameterizedRoute:n}=u(e,!1);return{namedRegex:"^"+n+(i?"(?:(/.*)?)":"")+"$"}}},6145:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return n},PAGE_SEGMENT_KEY:function(){return i},isGroupSegment:function(){return r}});let i="__PAGE__",n="__DEFAULT__"},9218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return p},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return v},NormalizeError:function(){return m},PageNotFoundError:function(){return g},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return r},execOnce:function(){return i},getDisplayName:function(){return l},getLocationOrigin:function(){return s},getURL:function(){return o},isAbsoluteUrl:function(){return a},isResSent:function(){return d},loadGetInitialProps:function(){return c},normalizeRepeatedSlashes:function(){return u},stringifyError:function(){return b}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return function(){for(var i=arguments.length,n=Array(i),a=0;a<i;a++)n[a]=arguments[a];return r||(r=!0,t=e(...n)),t}}let n=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,a=e=>n.test(e);function s(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function o(){let{href:e}=window.location,t=s();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function d(e){return e.finished||e.headersSent}function u(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function c(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await c(t.Component,t.ctx)}:{};let i=await e.getInitialProps(t);if(r&&d(r))return i;if(!i)throw Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+i+'" instead.');return i}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class m extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class v extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},2776:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=r(4606);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,i.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},4926:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[454,836],()=>r(2060));module.exports=i})();